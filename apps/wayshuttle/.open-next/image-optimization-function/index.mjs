globalThis.openNextDebug = false;globalThis.openNextVersion = "3.0.0-rc.16";
var uk=Object.create;var wl=Object.defineProperty;var pk=Object.getOwnPropertyDescriptor;var hk=Object.getOwnPropertyNames;var gk=Object.getPrototypeOf,yk=Object.prototype.hasOwnProperty;var a=(e,t)=>()=>(e&&(t=e(e=0)),t);var pt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ht=(e,t)=>{for(var r in t)wl(e,r,{get:t[r],enumerable:!0})},Ek=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of hk(t))!yk.call(e,o)&&o!==r&&wl(e,o,{get:()=>t[o],enumerable:!(n=pk(t,o))||n.enumerable});return e};var xk=(e,t,r)=>(r=e!=null?uk(gk(e)):{},Ek(t||!e||!e.__esModule?wl(r,"default",{value:e,enumerable:!0}):r,e));var Nr,Dr,kp=a(()=>{Nr=e=>{let t=e.httpHandler;return{setHttpHandler(r){t=r},httpHandler(){return t},updateHttpClientConfig(r,n){t.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},Dr=e=>({httpHandler:e.httpHandler()})});var Pp=a(()=>{kp()});var Op=a(()=>{});var Np,Dp=a(()=>{(function(e){e.HEADER="header",e.QUERY="query"})(Np||(Np={}))});var Al,Bp=a(()=>{(function(e){e.HEADER="header",e.QUERY="query"})(Al||(Al={}))});var Fp=a(()=>{});var Mp=a(()=>{});var Lp=a(()=>{});var Up=a(()=>{});var $p=a(()=>{Dp();Bp();Fp();Mp();Lp();Up()});var Hp=a(()=>{});var qp=a(()=>{});var Gp=a(()=>{});var zp=a(()=>{});var Kp=a(()=>{});var jp=a(()=>{});var Vp=a(()=>{});var Wp=a(()=>{Kp();jp();Vp()});var Xp=a(()=>{});var Yp=a(()=>{});var ho,Qp=a(()=>{(function(e){e.HTTP="http",e.HTTPS="https"})(ho||(ho={}))});var Jp=a(()=>{});var Zp=a(()=>{});var eh=a(()=>{});var th=a(()=>{});var rh=a(()=>{});var nh=a(()=>{Jp();Zp();eh();th();rh()});var oh=a(()=>{});var go,Rl=a(()=>{(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(go||(go={}))});var sh=a(()=>{Rl()});var ih=a(()=>{});var ah=a(()=>{sh();ih();Rl()});var ch=a(()=>{});var Tl,lh=a(()=>{(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Tl||(Tl={}))});var dh=a(()=>{});var fh=a(()=>{});var mh=a(()=>{});var uh=a(()=>{});var ph=a(()=>{});var hh=a(()=>{fh();mh();uh();ph()});var gh=a(()=>{});var yo,yh=a(()=>{yo="__smithy_context"});var Eh=a(()=>{});var dr,xh=a(()=>{(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(dr||(dr={}))});var Sh=a(()=>{});var _h=a(()=>{});var Ch=a(()=>{});var bh=a(()=>{});var wh=a(()=>{});var Ah=a(()=>{});var Rh=a(()=>{});var Th=a(()=>{});var Ih=a(()=>{});var vh,kh=a(()=>{(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(vh||(vh={}))});var Ph=a(()=>{});var Oh=a(()=>{});var Nh=a(()=>{});var Dh=a(()=>{});var Bh=a(()=>{});var Fh=a(()=>{});var et=a(()=>{Op();$p();Hp();qp();Gp();zp();Wp();Xp();Yp();Qp();nh();oh();ah();ch();lh();dh();hh();gh();yh();Eh();xh();Sh();_h();Ch();bh();wh();Ah();Rh();Th();Ih();kh();Ph();Oh();Nh();Dh();Bh();Fh()});var Mh=a(()=>{et()});var Lh=a(()=>{});var Uh=a(()=>{});function Sk(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var B,$h=a(()=>{B=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=Sk(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}}});var $e,Hh=a(()=>{$e=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}});var qh=a(()=>{});var Gh=a(()=>{});var K=a(()=>{Pp();Mh();Lh();Uh();$h();Hh();qh();Gh()});var Yh,Fr,Qh=a(()=>{Yh={warningEmitted:!1},Fr=e=>{e&&!Yh.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(Yh.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function J(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var Jh=a(()=>{});function we(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var Zh=a(()=>{});var He=a(()=>{Qh();Jh();Zh()});var vl,eg=a(()=>{K();vl=e=>$e.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var xo,kl=a(()=>{xo=e=>new Date(Date.now()+e)});var tg,rg=a(()=>{kl();tg=(e,t)=>Math.abs(xo(t).getTime()-e)>=3e5});var Pl,ng=a(()=>{rg();Pl=(e,t)=>{let r=Date.parse(e);return tg(r,t)?r-Date.now():t}});var Ol=a(()=>{eg();kl();ng()});var hs,ea,qe,Nl=a(()=>{K();Ol();hs=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},ea=async e=>{let t=hs("context",e.context),r=hs("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],s=await hs("signer",r.signer)(n),i=e?.signingRegion,c=e?.signingRegionSet,l=e?.signingName;return{config:r,signer:s,signingRegion:i,signingRegionSet:c,signingName:l}},qe=class{async sign(t,r,n){if(!B.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let o=await ea(n),{config:s,signer:i}=o,{signingRegion:c,signingName:l}=o,d=n.context;if(d?.authSchemes?.length??0>1){let[u,h]=d.authSchemes;u?.name==="sigv4a"&&h?.name==="sigv4"&&(c=h?.signingRegion??c,l=h?.signingName??l)}return await i.sign(t,{signingDate:xo(s.systemClockOffset),signingRegion:c,signingService:l})}errorHandler(t){return r=>{let n=r.ServerTime??vl(r.$response);if(n){let o=hs("config",t.config),s=o.systemClockOffset;o.systemClockOffset=Pl(n,o.systemClockOffset),o.systemClockOffset!==s&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=vl(t);if(n){let o=hs("config",r.config);o.systemClockOffset=Pl(n,o.systemClockOffset)}}}});var gs,og=a(()=>{K();Ol();Nl();gs=class extends qe{async sign(t,r,n){if(!B.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:o,signer:s,signingRegion:i,signingRegionSet:c,signingName:l}=await ea(n),m=(await o.sigv4aSigningRegionSet?.()??c??[i]).join(",");return await s.sign(t,{signingDate:xo(o.systemClockOffset),signingRegion:m,signingService:l})}}});var sg=a(()=>{et()});var ke,ig=a(()=>{et();ke=e=>e[yo]||(e[yo]={})});var de,ag=a(()=>{de=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});var Ge=a(()=>{ig();ag()});function Tk(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var Dl,ta=a(()=>{et();Ge();Dl=(e,t)=>(r,n)=>async o=>{let s=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,o.input)),i=Tk(e.httpAuthSchemes),c=ke(n),l=[];for(let d of s){let m=i.get(d.schemeId);if(!m){l.push(`HttpAuthScheme \`${d.schemeId}\` was not enabled for this service.`);continue}let u=m.identityProvider(await t.identityProviderConfigProvider(e));if(!u){l.push(`HttpAuthScheme \`${d.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:h={},signingProperties:g={}}=d.propertiesExtractor?.(e,n)||{};d.identityProperties=Object.assign(d.identityProperties||{},h),d.signingProperties=Object.assign(d.signingProperties||{},g),c.selectedHttpAuthScheme={httpAuthOption:d,identity:await u(d.identityProperties),signer:m.signer};break}if(!c.selectedHttpAuthScheme)throw new Error(l.join(`
`));return r(o)}});var Ik,Mr,cg=a(()=>{ta();Ik={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Mr=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Dl(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),Ik)}})});var lg,Bl=a(()=>{lg=(e,t)=>r=>async n=>{let{response:o}=await r(n);try{let s=await t(o,e);return{response:o,output:s}}catch(s){if(Object.defineProperty(s,"$response",{value:o}),!("$metadata"in s)){let i="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";s.message+=`
  `+i,typeof s.$responseBodyText<"u"&&s.$response&&(s.$response.body=s.$responseBodyText)}throw s}}});var dg,Fl=a(()=>{dg=(e,t)=>(r,n)=>async o=>{let s=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let i=await t(o.input,{...e,endpoint:s});return r({...o,request:i})}});function j(e,t,r){return{applyToStack:n=>{n.add(lg(e,r),vk),n.add(dg(e,t),ys)}}}var vk,ys,fg=a(()=>{Bl();Fl();vk={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},ys={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var me=a(()=>{Bl();fg();Fl()});var WU,mg=a(()=>{me();ta();WU={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:ys.name}});var ug=a(()=>{ta();cg();mg()});var kk,Pk,pg,Ml=a(()=>{K();et();Ge();kk=e=>t=>{throw t},Pk=(e,t)=>{},pg=e=>(t,r)=>async n=>{if(!B.isInstance(n.request))return t(n);let s=ke(r).selectedHttpAuthScheme;if(!s)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:c,signer:l}=s,d=await t({...n,request:await l.sign(n.request,c,i)}).catch((l.errorHandler||kk)(i));return(l.successHandler||Pk)(d.response,i),d}});var Ll,Lr,hg=a(()=>{Ml();Ll={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Lr=e=>({applyToStack:t=>{t.addRelativeTo(pg(e),Ll)}})});var gg=a(()=>{Ml();hg()});var fr,yg=a(()=>{fr=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function Es(e,t,r,n,o){return async function*(i,c,...l){let d=i.startingToken||void 0,m=!0,u;for(;m;){if(c[r]=d,o&&(c[o]=c[o]??i.pageSize),i.client instanceof e)u=await Ok(t,i.client,c,...l);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield u;let h=d;d=Nk(u,n),m=!!(d&&(!i.stopOnSameToken||d!==h))}return void 0}}var Ok,Nk,Eg=a(()=>{Ok=async(e,t,r,...n)=>await t.send(new e(r),...n);Nk=(e,t)=>{let r=e,n=t.split(".");for(let o of n){if(!r||typeof r!="object")return;r=r[o]}return r}});var So,ra=a(()=>{So=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]"});import{Buffer as Ul}from"buffer";var mr,_o,Hn=a(()=>{ra();mr=(e,t=0,r=e.byteLength-t)=>{if(!So(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Ul.from(e,t,r)},_o=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Ul.from(e,t):Ul.from(e)}});var Dk,Kt,xg=a(()=>{Hn();Dk=/^[A-Za-z0-9+/]*={0,2}$/,Kt=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Dk.exec(e))throw new TypeError("Invalid base64 string.");let t=_o(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}});var Pe,$l=a(()=>{Hn();Pe=e=>{let t=_o(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)}});var tt,Sg=a(()=>{$l();tt=e=>typeof e=="string"?Pe(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)});var gt,_g=a(()=>{Hn();gt=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return mr(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}});var ze=a(()=>{$l();Sg();_g()});var rt,Cg=a(()=>{Hn();ze();rt=e=>{let t;if(typeof e=="string"?t=Pe(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return mr(t.buffer,t.byteOffset,t.byteLength).toString("base64")}});var ur=a(()=>{xg();Cg()});function bg(e,t="utf-8"){return t==="base64"?rt(e):gt(e)}function wg(e,t){return t==="base64"?pr.mutate(Kt(e)):pr.mutate(Pe(e))}var Ag=a(()=>{ur();ze();Hl()});var pr,Hl=a(()=>{Ag();pr=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return wg(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return bg(this,t)}}});import{Readable as Bk}from"stream";var Rg,Tg=a(()=>{Rg=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:s,streamHasher:i}=t,c=r!==void 0&&o!==void 0&&s!==void 0&&i!==void 0,l=c?i(o,e):void 0,d=new Bk({read:()=>{}});return e.on("data",m=>{let u=n(m)||0;d.push(`${u.toString(16)}\r
`),d.push(m),d.push(`\r
`)}),e.on("end",async()=>{if(d.push(`0\r
`),c){let m=r(await l);d.push(`${s}:${m}\r
`),d.push(`\r
`)}d.push(null)}),d}});var Mt,Fk,ql=a(()=>{Mt=e=>encodeURIComponent(e).replace(/[!'()*]/g,Fk),Fk=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`});var Ig=a(()=>{ql()});var na=a(()=>{ql();Ig()});function oa(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Mt(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${Mt(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Mt(n)}`),t.push(o)}}return t.join("&")}var sa=a(()=>{na()});var vg,kg=a(()=>{vg=["ECONNRESET","EPIPE","ETIMEDOUT"]});var Gl,zl=a(()=>{Gl=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t}});var Pg,Og=a(()=>{Pg=(e,t,r=0)=>{if(!r)return-1;let n=o=>{let s=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r-o),i=c=>{c?.connecting?c.on("connect",()=>{clearTimeout(s)}):clearTimeout(s)};e.socket?i(e.socket):e.on("socket",i)};return r<2e3?(n(0),0):setTimeout(n.bind(null,1e3),1e3)}});var Ng,Dg=a(()=>{Ng=(e,{keepAlive:t,keepAliveMsecs:r},n=3e3)=>{if(t!==!0)return-1;let o=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",s=>{s.setKeepAlive(t,r||0)})};return n===0?(o(),0):setTimeout(o,n)}});var Bg,Fg=a(()=>{Bg=(e,t,r=0)=>{let n=o=>{e.setTimeout(r-o,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};return 0<r&&r<6e3?(n(0),0):setTimeout(n.bind(null,r===0?0:3e3),3e3)}});import{Readable as Mk}from"stream";async function Kl(e,t,r=Mg){let n=t.headers??{},o=n.Expect||n.expect,s=-1,i=!1;o==="100-continue"&&await Promise.race([new Promise(c=>{s=Number(setTimeout(c,Math.max(Mg,r)))}),new Promise(c=>{e.on("continue",()=>{clearTimeout(s),c()}),e.on("error",()=>{i=!0,clearTimeout(s),c()})})]),i||Lk(e,t.body)}function Lk(e,t){if(t instanceof Mk){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var Mg,jl=a(()=>{Mg=1e3});import{Agent as Lg,request as Uk}from"http";import{Agent as Ug,request as $k}from"https";var yt,$g=a(()=>{K();sa();kg();zl();Og();Dg();Fg();jl();yt=class e{static create(t){return typeof t?.handle=="function"?t:new e(t)}static checkSocketUsage(t,r,n=console){let{sockets:o,requests:s,maxSockets:i}=t;if(typeof i!="number"||i===1/0)return r;let c=15e3;if(Date.now()-c<r)return r;if(o&&s)for(let l in o){let d=o[l]?.length??0,m=s[l]?.length??0;if(d>=i&&m>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${d} and ${m} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(t){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,httpAgent:s,httpsAgent:i}=t||{},c=!0,l=50;return{connectionTimeout:n,requestTimeout:r??o,httpAgent:(()=>s instanceof Lg||typeof s?.destroy=="function"?s:new Lg({keepAlive:c,maxSockets:l,...s}))(),httpsAgent:(()=>i instanceof Ug||typeof i?.destroy=="function"?i:new Ug({keepAlive:c,maxSockets:l,...i}))(),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{let s,i=[],c=async L=>{await s,i.forEach(clearTimeout),n(L)},l=async L=>{await s,i.forEach(clearTimeout),o(L)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let L=new Error("Request aborted");L.name="AbortError",l(L);return}let d=t.protocol==="https:",m=d?this.config.httpsAgent:this.config.httpAgent;i.push(setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(m,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3)));let u=oa(t.query||{}),h;if(t.username!=null||t.password!=null){let L=t.username??"",te=t.password??"";h=`${L}:${te}`}let g=t.path;u&&(g+=`?${u}`),t.fragment&&(g+=`#${t.fragment}`);let x=t.hostname??"";x[0]==="["&&x.endsWith("]")?x=t.hostname.slice(1,-1):x=t.hostname;let I={headers:t.headers,host:x,method:t.method,path:g,port:t.port,agent:m,auth:h},P=(d?$k:Uk)(I,L=>{let te=new $e({statusCode:L.statusCode||-1,reason:L.statusMessage,headers:Gl(L.headers),body:L});c({response:te})});if(P.on("error",L=>{vg.includes(L.code)?l(Object.assign(L,{name:"TimeoutError"})):l(L)}),r){let L=()=>{P.destroy();let te=new Error("Request aborted");te.name="AbortError",l(te)};if(typeof r.addEventListener=="function"){let te=r;te.addEventListener("abort",L,{once:!0}),P.once("close",()=>te.removeEventListener("abort",L))}else r.onabort=L}i.push(Pg(P,l,this.config.connectionTimeout)),i.push(Bg(P,l,this.config.requestTimeout));let X=I.agent;typeof X=="object"&&"keepAlive"in X&&i.push(Ng(P,{keepAlive:X.keepAlive,keepAliveMsecs:X.keepAliveMsecs})),s=Kl(P,t,this.config.requestTimeout).catch(L=>(i.forEach(clearTimeout),o(L)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}}});var Vl,Hg=a(()=>{Vl=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}}});var qg=a(()=>{Hg()});var Gg=a(()=>{K();sa();zl();qg();jl()});import{Writable as Hk}from"stream";var ia,zg=a(()=>{ia=class extends Hk{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}}});async function Gk(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:c,value:l}=await r.read();l&&(t.push(l),o+=l.length),n=c}let s=new Uint8Array(o),i=0;for(let c of t)s.set(c,i),i+=c.length;return s}var jt,qk,Kg=a(()=>{zg();jt=e=>qk(e)?Gk(e):new Promise((t,r)=>{let n=new ia;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})}),qk=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream});var qn=a(()=>{$g();Gg();Kg()});var jg=a(()=>{});var Vg=a(()=>{K();sa();jg()});async function zk(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:c,value:l}=await r.read();l&&(t.push(l),o+=l.length),n=c}let s=new Uint8Array(o),i=0;for(let c of t)s.set(c,i),i+=c.length;return s}var Wg,Xg=a(()=>{Wg=async e=>typeof Blob=="function"&&e instanceof Blob?new Uint8Array(await e.arrayBuffer()):zk(e)});var Yg=a(()=>{Vg();Xg()});function aa(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in Wl)t[r/2]=Wl[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function ue(e){let t="";for(let r=0;r<e.byteLength;r++)t+=Qg[e[r]];return t}var Qg,Wl,Ur=a(()=>{Qg={},Wl={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Qg[e]=t,Wl[t]=e}});var hr,Gn=a(()=>{hr=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream)});var Jg,ey,Zg,ty=a(()=>{Yg();ur();Ur();ze();Gn();Jg="The stream has already been transformed.",ey=e=>{if(!Zg(e)&&!hr(e)){let o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1,r=async()=>{if(t)throw new Error(Jg);return t=!0,await Wg(e)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{let s=await r();if(o==="base64")return rt(s);if(o==="hex")return ue(s);if(o===void 0||o==="utf8"||o==="utf-8")return gt(s);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(s);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(Jg);if(t=!0,Zg(e))return n(e);if(hr(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},Zg=e=>typeof Blob=="function"&&e instanceof Blob});import{Readable as Xl}from"stream";import{TextDecoder as Kk}from"util";var ry,ca,ny=a(()=>{qn();Hn();ty();ry="The stream has already been transformed.",ca=e=>{if(!(e instanceof Xl))try{return ey(e)}catch{let o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${o}`)}let t=!1,r=async()=>{if(t)throw new Error(ry);return t=!0,await jt(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let o=await r();return n===void 0||Buffer.isEncoding(n)?mr(o.buffer,o.byteOffset,o.byteLength).toString(n):new Kk(n).decode(o)},transformToWebStream:()=>{if(t)throw new Error(ry);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Xl.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return t=!0,Xl.toWeb(e)}})}});async function oy(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}var sy=a(()=>{});import{PassThrough as iy}from"stream";async function ay(e){if(hr(e))return oy(e);let t=new iy,r=new iy;return e.pipe(t),e.pipe(r),[t,r]}var cy=a(()=>{sy();Gn()});async function ly(e,t){let r=0,n=[],o=e.getReader(),s=!1;for(;!s;){let{done:l,value:d}=await o.read();if(d&&(n.push(d),r+=d?.byteLength??0),r>=t)break;s=l}o.releaseLock();let i=new Uint8Array(Math.min(t,r)),c=0;for(let l of n){if(l.byteLength>i.byteLength-c){i.set(l.subarray(0,i.byteLength-c),c);break}else i.set(l,c);c+=l.length}return i}var dy=a(()=>{});import{Writable as jk}from"stream";var fy,Yl,my=a(()=>{dy();Gn();fy=(e,t)=>hr(e)?ly(e,t):new Promise((r,n)=>{let o=new Yl;o.limit=t,e.pipe(o),e.on("error",s=>{o.end(),n(s)}),o.on("error",n),o.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.buffers));r(s)})}),Yl=class extends jk{constructor(){super(...arguments),this.buffers=[],this.limit=1/0,this.bytesBuffered=0}_write(t,r,n){if(this.buffers.push(t),this.bytesBuffered+=t.byteLength??0,this.bytesBuffered>=this.limit){let o=this.bytesBuffered-this.limit,s=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=s.subarray(0,s.byteLength-o),this.emit("finish")}n()}}});var Ql=a(()=>{ur()});var uy=a(()=>{});var py=a(()=>{ur();Gn();uy()});var hy=a(()=>{Gn();Ql();py()});var xs=a(()=>{Hl();Tg();ny();cy();my();Gn();hy();Ql()});var $r,gy=a(()=>{xs();$r=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return pr.mutate(e);if(!e)return pr.mutate(new Uint8Array);let r=t.streamCollector(e);return pr.mutate(await r)}});function zn(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Jl=a(()=>{});function nt(e,t){return new Zl(e,t)}var Zl,yy=a(()=>{Co();K();Zl=class{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:t,protocol:r="https",port:n,path:o}=await this.context.endpoint();this.path=o;for(let s of this.resolvePathStack)s(this.path);return new B({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,o){return this.resolvePathStack.push(s=>{this.path=ed(s,this.input,t,r,n,o)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});var ed,Ey=a(()=>{Jl();ed=(e,t,r,n,o,s)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,s?i.split("/").map(c=>zn(c)).join("/"):zn(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});var Co=a(()=>{gy();Jl();yy();Ey()});var xy=a(()=>{Co()});function Sy(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var _y=a(()=>{});var Vt,Cy=a(()=>{Vt=class{constructor(t){this.authSchemes=new Map;for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var by=a(()=>{K();et()});var wy=a(()=>{K()});var Wt,Ay=a(()=>{Wt=class{async sign(t,r,n){return t}}});var Ry=a(()=>{by();wy();Ay()});var Vk,Ty,td,Iy,vy=a(()=>{Vk=e=>t=>td(t)&&t.expiration.getTime()-Date.now()<e,Ty=Vk(3e5),td=e=>e.expiration!==void 0,Iy=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,o,s,i,c=!1,l=async d=>{s||(s=n(d));try{o=await s,i=!0,c=!1}finally{s=void 0}return o};return t===void 0?async d=>((!i||d?.forceRefresh)&&(o=await l(d)),o):async d=>((!i||d?.forceRefresh)&&(o=await l(d)),c?o:r(o)?(t(o)&&await l(d),o):(c=!0,o))}});var ky=a(()=>{Cy();Ry();vy()});var Ce=a(()=>{sg();ug();gg();yg();Eg();xy();_y();ky()});var Ke,Ss=a(()=>{Ke=class e extends Error{constructor(t,r=!0){let n,o=!0;typeof r=="boolean"?(n=void 0,o=r):r!=null&&typeof r=="object"&&(n=r.logger,o=r.tryNextLink??!0),super(t),this.name="ProviderError",this.tryNextLink=o,Object.setPrototypeOf(this,e.prototype),n?.debug?.(`@smithy/property-provider ${o?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}}});var k,Py=a(()=>{Ss();k=class e extends Ke{constructor(t,r=!0){super(t,r),this.name="CredentialsProviderError",Object.setPrototypeOf(this,e.prototype)}}});var ot,Oy=a(()=>{Ss();ot=class e extends Ke{constructor(t,r=!0){super(t,r),this.name="TokenProviderError",Object.setPrototypeOf(this,e.prototype)}}});var gr,Ny=a(()=>{Ss();gr=(...e)=>async()=>{if(e.length===0)throw new Ke("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t}});var Dy,By=a(()=>{Dy=e=>()=>Promise.resolve(e)});var Kn,Fy=a(()=>{Kn=(e,t,r)=>{let n,o,s,i=!1,c=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async l=>((!s||l?.forceRefresh)&&(n=await c()),n):async l=>((!s||l?.forceRefresh)&&(n=await c()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await c(),n))}});var ee=a(()=>{Py();Ss();Oy();Ny();By();Fy()});var My,Ly,Uy=a(()=>{Ce();ee();My=e=>(e.sigv4aSigningRegionSet=fr(e.sigv4aSigningRegionSet),e),Ly={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new Ke("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new Ke("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var $y,Hy,rd,qy,Gy,nd,od,sd,id,Wk,zy,Ky,_s,jy,Vy,Wy,Xy,la,Yy,Qy,Jy,ad,Zy,jn=a(()=>{$y="X-Amz-Algorithm",Hy="X-Amz-Credential",rd="X-Amz-Date",qy="X-Amz-SignedHeaders",Gy="X-Amz-Expires",nd="X-Amz-Signature",od="X-Amz-Security-Token",sd="authorization",id=rd.toLowerCase(),Wk="date",zy=[sd,id,Wk],Ky=nd.toLowerCase(),_s="x-amz-content-sha256",jy=od.toLowerCase(),Vy={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Wy=/^proxy-/,Xy=/^sec-/,la="AWS4-HMAC-SHA256",Yy="AWS4-HMAC-SHA256-PAYLOAD",Qy="UNSIGNED-PAYLOAD",Jy=50,ad="aws4_request",Zy=60*60*24*7});var da,cd,fa,tE,eE,ld=a(()=>{Ur();ze();jn();da={},cd=[],fa=(e,t,r)=>`${e}/${t}/${r}/${ad}`,tE=async(e,t,r,n,o)=>{let s=await eE(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${ue(s)}:${t.sessionToken}`;if(i in da)return da[i];for(cd.push(i);cd.length>Jy;)delete da[cd.shift()];let c=`AWS4${t.secretAccessKey}`;for(let l of[r,n,o,ad])c=await eE(e,c,l);return da[i]=c},eE=(e,t,r)=>{let n=new e(t);return n.update(tt(r)),n.digest()}});var ma,dd=a(()=>{jn();ma=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in Vy||t?.has(s)||Wy.test(s)||Xy.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n}});var fd,md=a(()=>{na();jn();fd=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===Ky)continue;let o=Mt(n);t.push(o);let s=e[n];typeof s=="string"?r[o]=`${o}=${Mt(s)}`:Array.isArray(s)&&(r[o]=s.slice(0).reduce((i,c)=>i.concat([`${o}=${Mt(c)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")}});var Cs,ud=a(()=>{ra();Ur();ze();jn();Cs=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===_s)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||So(t)){let n=new r;return n.update(tt(t)),ue(await n.digest())}return Qy}});function nE(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var ua,rE,Xk,pd,oE=a(()=>{Ur();ze();ua=class{format(t){let r=[];for(let s of Object.keys(t)){let i=Pe(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let c=Pe(t.value),l=new DataView(new ArrayBuffer(3+c.byteLength));l.setUint8(0,7),l.setUint16(1,c.byteLength,!1);let d=new Uint8Array(l.buffer);return d.set(c,3),d;case"timestamp":let m=new Uint8Array(9);return m[0]=8,m.set(pd.fromNumber(t.value.valueOf()).bytes,1),m;case"uuid":if(!Xk.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let u=new Uint8Array(17);return u[0]=9,u.set(aa(t.value.replace(/\-/g,"")),1),u}}};(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(rE||(rE={}));Xk=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,pd=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&nE(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&nE(t),parseInt(ue(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}}});var sE,iE=a(()=>{sE=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1}});var hd,gd=a(()=>{K();hd=(e,t={})=>{let{headers:r,query:n={}}=B.clone(e);for(let o of Object.keys(r)){let s=o.toLowerCase();(s.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(s)||t.hoistableHeaders?.has(s))&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}}});var pa,yd=a(()=>{K();jn();pa=e=>{e=B.clone(e);for(let t of Object.keys(e.headers))zy.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e}});var aE,Yk,cE=a(()=>{aE=e=>Yk(e).toISOString().replace(/\.\d{3}Z$/,"Z"),Yk=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e});var Vn,ha,lE,dE=a(()=>{Ur();Ge();na();ze();jn();ld();dd();md();ud();oE();iE();gd();yd();cE();Vn=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.headerFormatter=new ua,this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=de(n),this.credentialProvider=de(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:c,hoistableHeaders:l,signingRegion:d,signingService:m}=r,u=await this.credentialProvider();this.validateResolvedCredentials(u);let h=d??await this.regionProvider(),{longDate:g,shortDate:x}=ha(n);if(o>Zy)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let I=fa(x,h,m??this.service),b=hd(pa(t),{unhoistableHeaders:i,hoistableHeaders:l});u.sessionToken&&(b.query[od]=u.sessionToken),b.query[$y]=la,b.query[Hy]=`${u.accessKeyId}/${I}`,b.query[rd]=g,b.query[Gy]=o.toString(10);let P=ma(b,s,c);return b.query[qy]=lE(P),b.query[nd]=await this.getSignature(g,I,this.getSigningKey(u,h,x,m),this.createCanonicalRequest(b,P,await Cs(t,this.sha256))),b}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let c=s??await this.regionProvider(),{shortDate:l,longDate:d}=ha(n),m=fa(l,c,i??this.service),u=await Cs({headers:{},body:r},this.sha256),h=new this.sha256;h.update(t);let g=ue(await h.digest()),x=[Yy,d,m,o,g,u].join(`
`);return this.signString(x,{signingDate:n,signingRegion:c,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n??await this.regionProvider(),{shortDate:c}=ha(r),l=new this.sha256(await this.getSigningKey(s,i,c,o));return l.update(tt(t)),ue(await l.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let c=await this.credentialProvider();this.validateResolvedCredentials(c);let l=s??await this.regionProvider(),d=pa(t),{longDate:m,shortDate:u}=ha(r),h=fa(u,l,i??this.service);d.headers[id]=m,c.sessionToken&&(d.headers[jy]=c.sessionToken);let g=await Cs(d,this.sha256);!sE(_s,d.headers)&&this.applyChecksum&&(d.headers[_s]=g);let x=ma(d,o,n),I=await this.getSignature(m,h,this.getSigningKey(c,l,u,i),this.createCanonicalRequest(d,x,g));return d.headers[sd]=`${la} Credential=${c.accessKeyId}/${h}, SignedHeaders=${lE(x)}, Signature=${I}`,d}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${fd(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n){let o=new this.sha256;o.update(tt(n));let s=await o.digest();return`${la}
${t}
${r}
${ue(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))s?.length!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return Mt(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o),i=new this.sha256(await n);return i.update(tt(s)),ue(await i.digest())}getSigningKey(t,r,n,o){return tE(this.sha256,t,n,r,o||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},ha=e=>{let t=aE(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},lE=e=>Object.keys(e).sort().join(";")});var Ed=a(()=>{dE();dd();md();ud();gd();yd();ld()});var Hr,fE=a(()=>{He();Ce();Ed();Hr=e=>{let t=!1,r;e.credentials&&(t=!0,r=Iy(e.credentials,Ty,td)),r||(e.credentialDefaultProvider?r=fr(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):r=async()=>{throw new Error("`credentials` is missing")});let{signingEscapePath:n=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:s}=e,i;return e.signer?i=fr(e.signer):e.regionInfoProvider?i=()=>fr(e.region)().then(async c=>[await e.regionInfoProvider(c,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},c]).then(([c,l])=>{let{signingRegion:d,signingService:m}=c;e.signingRegion=e.signingRegion||d||l,e.signingName=e.signingName||m||e.serviceId;let u={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:n},h=e.signerConstructor||Vn;return new h(u)}):i=async c=>{c=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await fr(e.region)(),properties:{}},c);let l=c.signingRegion,d=c.signingName;e.signingRegion=e.signingRegion||l,e.signingName=e.signingName||d||e.serviceId;let m={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:n},u=e.signerConstructor||Vn;return new u(m)},{...e,systemClockOffset:o,signingEscapePath:n,credentials:t?async()=>r().then(c=>J(c,"CREDENTIALS_CODE","e")):r,signer:i}}});var mE=a(()=>{Nl();og();Uy();fE()});var uE=a(()=>{mE()});var pE=a(()=>{});var Wn,qr,bo,hE,gE,yE=a(()=>{Wn=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},qr=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,bo=()=>{let e=[],t=[],r=!1,n=new Set,o=u=>u.sort((h,g)=>hE[g.step]-hE[h.step]||gE[g.priority||"normal"]-gE[h.priority||"normal"]),s=u=>{let h=!1,g=x=>{let I=Wn(x.name,x.aliases);if(I.includes(u)){h=!0;for(let b of I)n.delete(b);return!1}return!0};return e=e.filter(g),t=t.filter(g),h},i=u=>{let h=!1,g=x=>{if(x.middleware===u){h=!0;for(let I of Wn(x.name,x.aliases))n.delete(I);return!1}return!0};return e=e.filter(g),t=t.filter(g),h},c=u=>(e.forEach(h=>{u.add(h.middleware,{...h})}),t.forEach(h=>{u.addRelativeTo(h.middleware,{...h})}),u.identifyOnResolve?.(m.identifyOnResolve()),u),l=u=>{let h=[];return u.before.forEach(g=>{g.before.length===0&&g.after.length===0?h.push(g):h.push(...l(g))}),h.push(u),u.after.reverse().forEach(g=>{g.before.length===0&&g.after.length===0?h.push(g):h.push(...l(g))}),h},d=(u=!1)=>{let h=[],g=[],x={};return e.forEach(b=>{let P={...b,before:[],after:[]};for(let X of Wn(P.name,P.aliases))x[X]=P;h.push(P)}),t.forEach(b=>{let P={...b,before:[],after:[]};for(let X of Wn(P.name,P.aliases))x[X]=P;g.push(P)}),g.forEach(b=>{if(b.toMiddleware){let P=x[b.toMiddleware];if(P===void 0){if(u)return;throw new Error(`${b.toMiddleware} is not found when adding ${qr(b.name,b.aliases)} middleware ${b.relation} ${b.toMiddleware}`)}b.relation==="after"&&P.after.push(b),b.relation==="before"&&P.before.push(b)}}),o(h).map(l).reduce((b,P)=>(b.push(...P),b),[])},m={add:(u,h={})=>{let{name:g,override:x,aliases:I}=h,b={step:"initialize",priority:"normal",middleware:u,...h},P=Wn(g,I);if(P.length>0){if(P.some(X=>n.has(X))){if(!x)throw new Error(`Duplicate middleware name '${qr(g,I)}'`);for(let X of P){let L=e.findIndex(Or=>Or.name===X||Or.aliases?.some(Un=>Un===X));if(L===-1)continue;let te=e[L];if(te.step!==b.step||b.priority!==te.priority)throw new Error(`"${qr(te.name,te.aliases)}" middleware with ${te.priority} priority in ${te.step} step cannot be overridden by "${qr(g,I)}" middleware with ${b.priority} priority in ${b.step} step.`);e.splice(L,1)}}for(let X of P)n.add(X)}e.push(b)},addRelativeTo:(u,h)=>{let{name:g,override:x,aliases:I}=h,b={middleware:u,...h},P=Wn(g,I);if(P.length>0){if(P.some(X=>n.has(X))){if(!x)throw new Error(`Duplicate middleware name '${qr(g,I)}'`);for(let X of P){let L=t.findIndex(Or=>Or.name===X||Or.aliases?.some(Un=>Un===X));if(L===-1)continue;let te=t[L];if(te.toMiddleware!==b.toMiddleware||te.relation!==b.relation)throw new Error(`"${qr(te.name,te.aliases)}" middleware ${te.relation} "${te.toMiddleware}" middleware cannot be overridden by "${qr(g,I)}" middleware ${b.relation} "${b.toMiddleware}" middleware.`);t.splice(L,1)}}for(let X of P)n.add(X)}t.push(b)},clone:()=>c(bo()),use:u=>{u.applyToStack(m)},remove:u=>typeof u=="string"?s(u):i(u),removeByTag:u=>{let h=!1,g=x=>{let{tags:I,name:b,aliases:P}=x;if(I&&I.includes(u)){let X=Wn(b,P);for(let L of X)n.delete(L);return h=!0,!1}return!0};return e=e.filter(g),t=t.filter(g),h},concat:u=>{let h=c(bo());return h.use(u),h.identifyOnResolve(r||h.identifyOnResolve()||(u.identifyOnResolve?.()??!1)),h},applyToStack:c,identify:()=>d(!0).map(u=>{let h=u.step??u.relation+" "+u.toMiddleware;return qr(u.name,u.aliases)+" - "+h}),identifyOnResolve(u){return typeof u=="boolean"&&(r=u),r},resolve:(u,h)=>{for(let g of d().map(x=>x.middleware).reverse())u=g(u,h);return r&&console.log(m.identify()),u}};return m},hE={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},gE={high:3,normal:2,low:1}});var xd=a(()=>{yE()});var Et,EE=a(()=>{xd();Et=class{constructor(t){this.config=t,this.middlewareStack=bo()}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=o===void 0&&this.config.cacheMiddleware===!0,c;if(i){this.handlers||(this.handlers=new WeakMap);let l=this.handlers;l.has(t.constructor)?c=l.get(t.constructor):(c=t.resolveMiddleware(this.middlewareStack,this.config,o),l.set(t.constructor,c))}else delete this.handlers,c=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)c(t).then(l=>s(null,l.output),l=>s(l)).catch(()=>{});else return c(t).then(l=>l.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}});var xE=a(()=>{Co()});var U,Sd,SE=a(()=>{xd();et();U=class{constructor(){this.middlewareStack=bo()}static classBuilder(){return new Sd}resolveMiddlewareWithContext(t,r,n,{middlewareFn:o,clientName:s,commandName:i,inputFilterSensitiveLog:c,outputFilterSensitiveLog:l,smithyContext:d,additionalContext:m,CommandCtor:u}){for(let b of o.bind(this)(u,t,r,n))this.middlewareStack.use(b);let h=t.concat(this.middlewareStack),{logger:g}=r,x={logger:g,clientName:s,commandName:i,inputFilterSensitiveLog:c,outputFilterSensitiveLog:l,[yo]:{commandInstance:this,...d},...m},{requestHandler:I}=r;return h.resolve(b=>I.handle(b.request,n||{}),x)}},Sd=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){let t=this,r;return r=class extends U{static getEndpointParameterInstructions(){return t._ep}constructor(...[n]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=n??{},t._init(this)}resolveMiddleware(n,o,s){return this.resolveMiddlewareWithContext(n,o,s,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}});var G,_E=a(()=>{G="***SensitiveInformation***"});var wo,CE=a(()=>{wo=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],o=async function(i,c,l){let d=new n(i);if(typeof c=="function")this.send(d,c);else if(typeof l=="function"){if(typeof c!="object")throw new Error(`Expected http options but got ${typeof c}`);this.send(d,c||{},l)}else return this.send(d,c)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=o}}});var ga,Qk,Jk,bE,Ao,Xn,wE,AE,_d,Zk,ye,Lt,C,RE,eP,bs,TE,yr,Ro,IE,vE,kE,Cd=a(()=>{ga=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},Qk=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&kE.warn(vE(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},Jk=Math.ceil(34028234663852886e22),bE=e=>{let t=Qk(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Jk)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Ao=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},Xn=e=>_d(e,32),wE=e=>_d(e,16),AE=e=>_d(e,8),_d=(e,t)=>{let r=Ao(e);if(r!==void 0&&Zk(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},Zk=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},ye=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Lt=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},C=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return kE.warn(vE(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},RE=e=>bE(typeof e=="string"?bs(e):e),eP=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,bs=e=>{let t=e.match(eP);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},TE=e=>Ao(typeof e=="string"?bs(e):e),yr=e=>Xn(typeof e=="string"?bs(e):e),Ro=e=>wE(typeof e=="string"?bs(e):e),IE=e=>AE(typeof e=="string"?bs(e):e),vE=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),kE={warn:console.warn}});function ya(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),c=e.getUTCSeconds(),l=o<10?`0${o}`:`${o}`,d=s<10?`0${s}`:`${s}`,m=i<10?`0${i}`:`${i}`,u=c<10?`0${c}`:`${c}`;return`${tP[n]}, ${l} ${wd[r]} ${t} ${d}:${m}:${u} GMT`}var tP,wd,rP,PE,nP,As,oP,sP,iP,Rs,ws,aP,cP,lP,bd,dP,fP,mP,Xt,uP,pP,To,OE=a(()=>{Cd();tP=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];rP=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),PE=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=rP.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,c,l,d]=t,m=Ro(To(n)),u=Xt(o,"month",1,12),h=Xt(s,"day",1,31);return ws(m,u,h,{hours:i,minutes:c,seconds:l,fractionalMilliseconds:d})},nP=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),As=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=nP.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,c,l,d,m]=t,u=Ro(To(n)),h=Xt(o,"month",1,12),g=Xt(s,"day",1,31),x=ws(u,h,g,{hours:i,minutes:c,seconds:l,fractionalMilliseconds:d});return m.toUpperCase()!="Z"&&x.setTime(x.getTime()-pP(m)),x},oP=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),sP=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),iP=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Rs=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=oP.exec(e);if(t){let[r,n,o,s,i,c,l,d]=t;return ws(Ro(To(s)),bd(o),Xt(n,"day",1,31),{hours:i,minutes:c,seconds:l,fractionalMilliseconds:d})}if(t=sP.exec(e),t){let[r,n,o,s,i,c,l,d]=t;return lP(ws(aP(s),bd(o),Xt(n,"day",1,31),{hours:i,minutes:c,seconds:l,fractionalMilliseconds:d}))}if(t=iP.exec(e),t){let[r,n,o,s,i,c,l,d]=t;return ws(Ro(To(d)),bd(n),Xt(o.trimLeft(),"day",1,31),{hours:s,minutes:i,seconds:c,fractionalMilliseconds:l})}throw new TypeError("Invalid RFC-7231 date-time value")},ws=(e,t,r,n)=>{let o=t-1;return fP(e,o,r),new Date(Date.UTC(e,o,r,Xt(n.hours,"hour",0,23),Xt(n.minutes,"minute",0,59),Xt(n.seconds,"seconds",0,60),uP(n.fractionalMilliseconds)))},aP=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+Ro(To(e));return r<t?r+100:r},cP=50*365*24*60*60*1e3,lP=e=>e.getTime()-new Date().getTime()>cP?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,bd=e=>{let t=wd.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},dP=[31,28,31,30,31,30,31,31,30,31,30,31],fP=(e,t,r)=>{let n=dP[t];if(t===1&&mP(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${wd[t]} in ${e}: ${r}`)},mP=e=>e%4===0&&(e%100!==0||e%400===0),Xt=(e,t,r,n)=>{let o=IE(To(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},uP=e=>e==null?0:RE("0."+e)*1e3,pP=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},To=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var Yt,$,Ad=a(()=>{Yt=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},$=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e}});var hP,Gr,gP,NE=a(()=>{Ad();hP=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=gP(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:o});throw $(i,t)},Gr=e=>({output:t,parsedBody:r,errorCode:n})=>{hP({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},gP=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var zr,DE=a(()=>{zr=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}}});var BE,Kr,FE=a(()=>{BE=!1,Kr=e=>{e&&!BE&&parseInt(e.substring(1,e.indexOf(".")))<16&&(BE=!0)}});var ME=a(()=>{Co()});var LE,UE,$E=a(()=>{et();LE=e=>{let t=[];for(let r in go){let n=go[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},UE=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t}});var HE,qE,GE=a(()=>{HE=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},qE=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t}});var jr,Vr,zE=a(()=>{$E();GE();jr=e=>({...LE(e),...HE(e)}),Vr=e=>({...UE(e),...qE(e)})});var KE=a(()=>{zE()});var jE=a(()=>{});var Rd,VE=a(()=>{Rd=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Rd(e[r]));return e}});var Ut,WE=a(()=>{Ut=e=>e!=null});var Td,XE=a(()=>{Td=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};Td.prototype=Object.create(String.prototype,{constructor:{value:Td,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Td,String)});var at,YE=a(()=>{at=class{trace(){}debug(){}info(){}warn(){}error(){}}});function O(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,yP(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}QE(n,null,s,i)}return n}var Z,yP,QE,EP,xP,JE=a(()=>{Z=(e,t)=>{let r={};for(let n in t)QE(r,e,t,n);return r},yP=(e,t,r)=>O(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),QE=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[c=EP,l=xP,d=n]=i;(typeof c=="function"&&c(t[d])||typeof c!="function"&&c)&&(e[n]=l(t[d]));return}let[o,s]=r[n];if(typeof s=="function"){let i,c=o===void 0&&(i=s())!=null,l=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;c?e[n]=i:l&&(e[n]=s())}else{let i=o===void 0&&s!=null,c=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||c)&&(e[n]=s)}},EP=e=>e!=null,xP=e=>e});var ZE=a(()=>{});var ex=a(()=>{Co()});var tx=a(()=>{});var ct,rx=a(()=>{ct=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(ct);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=ct(e[r]));return t}return e}});var nx=a(()=>{});var ox=a(()=>{});var v=a(()=>{EE();xE();SE();_E();CE();OE();NE();DE();FE();Ad();ME();KE();jE();VE();WE();XE();YE();JE();Cd();ZE();ex();tx();rx();nx();ox()});var sx=a(()=>{v()});var Ea,Id=a(()=>{v();Ea=(e,t)=>$r(e,t).then(r=>t.utf8Encoder(r))});var Qt,xa,Sa,ix=a(()=>{Id();Qt=(e,t)=>Ea(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),xa=async(e,t)=>{let r=await Qt(e,t);return r.message=r.message??r.Message,r},Sa=(e,t)=>{let r=(s,i)=>Object.keys(s).find(c=>c.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)}});var _a=pt(Er=>{"use strict";var ax=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",_P=ax+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",cx="["+ax+"]["+_P+"]*",CP=new RegExp("^"+cx+"$"),bP=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let i=0;i<s;i++)o.push(n[i]);r.push(o),n=t.exec(e)}return r},wP=function(e){let t=CP.exec(e);return!(t===null||typeof t>"u")};Er.isExist=function(e){return typeof e<"u"};Er.isEmptyObject=function(e){return Object.keys(e).length===0};Er.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let s=0;s<o;s++)r==="strict"?e[n[s]]=[t[n[s]]]:e[n[s]]=t[n[s]]}};Er.getValue=function(e){return Er.isExist(e)?e:""};Er.isName=wP;Er.getAllMatches=bP;Er.nameRegexp=cx});var kd=pt(ux=>{"use strict";var vd=_a(),AP={allowBooleanAttributes:!1,unpairedTags:[]};ux.validate=function(e,t){t=Object.assign({},AP,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=dx(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=fx(e,s);continue}else{let c=!1;e[s]==="/"&&(c=!0,s++);let l="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)l+=e[s];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),s--),!NP(l)){let u;return l.trim().length===0?u="Invalid space after '<'.":u="Tag '"+l+"' is an invalid name.",pe("InvalidTag",u,je(e,s))}let d=IP(e,s);if(d===!1)return pe("InvalidAttr","Attributes for '"+l+"' have open quote.",je(e,s));let m=d.value;if(s=d.index,m[m.length-1]==="/"){let u=s-m.length;m=m.substring(0,m.length-1);let h=mx(m,t);if(h===!0)n=!0;else return pe(h.err.code,h.err.msg,je(e,u+h.err.line))}else if(c)if(d.tagClosed){if(m.trim().length>0)return pe("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",je(e,i));if(r.length===0)return pe("InvalidTag","Closing tag '"+l+"' has not been opened.",je(e,i));{let u=r.pop();if(l!==u.tagName){let h=je(e,u.tagStartPos);return pe("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+l+"'.",je(e,i))}r.length==0&&(o=!0)}}else return pe("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",je(e,s));else{let u=mx(m,t);if(u!==!0)return pe(u.err.code,u.err.msg,je(e,s-m.length+u.err.line));if(o===!0)return pe("InvalidXml","Multiple possible root nodes found.",je(e,s));t.unpairedTags.indexOf(l)!==-1||r.push({tagName:l,tagStartPos:i}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=fx(e,s);continue}else if(e[s+1]==="?"){if(s=dx(e,++s),s.err)return s}else break;else if(e[s]==="&"){let u=PP(e,s);if(u==-1)return pe("InvalidChar","char '&' is not expected.",je(e,s));s=u}else if(o===!0&&!lx(e[s]))return pe("InvalidXml","Extra text at the end",je(e,s));e[s]==="<"&&s--}}else{if(lx(e[s]))continue;return pe("InvalidChar","char '"+e[s]+"' is not expected.",je(e,s))}if(n){if(r.length==1)return pe("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",je(e,r[0].tagStartPos));if(r.length>0)return pe("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return pe("InvalidXml","Start tag expected.",1);return!0};function lx(e){return e===" "||e==="	"||e===`
`||e==="\r"}function dx(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return pe("InvalidXml","XML declaration allowed only at the start of the document.",je(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function fx(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var RP='"',TP="'";function IP(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===RP||e[t]===TP)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var vP=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function mx(e,t){let r=vd.getAllMatches(e,vP),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return pe("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",Ts(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return pe("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",Ts(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return pe("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",Ts(r[o]));let s=r[o][2];if(!OP(s))return pe("InvalidAttr","Attribute '"+s+"' is an invalid name.",Ts(r[o]));if(!n.hasOwnProperty(s))n[s]=1;else return pe("InvalidAttr","Attribute '"+s+"' is repeated.",Ts(r[o]))}return!0}function kP(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function PP(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,kP(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function pe(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function OP(e){return vd.isName(e)}function NP(e){return vd.isName(e)}function je(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Ts(e){return e.startIndex+e[1].length}});var hx=pt(Pd=>{var px={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},DP=function(e){return Object.assign({},px,e)};Pd.buildOptions=DP;Pd.defaultOptions=px});var yx=pt((SG,gx)=>{"use strict";var Od=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};gx.exports=Od});var xx=pt((_G,Ex)=>{var BP=_a();function FP(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,s=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(o&&UP(e,t))t+=7,[entityName,val,t]=MP(e,t+1),val.indexOf("&")===-1&&(r[GP(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&$P(e,t))t+=8;else if(o&&HP(e,t))t+=8;else if(o&&qP(e,t))t+=9;else if(LP)s=!0;else throw new Error("Invalid DOCTYPE");n++,i=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:i+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function MP(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],o="";for(;t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function LP(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function UP(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function $P(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function HP(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function qP(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function GP(e){if(BP.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}Ex.exports=FP});var _x=pt((CG,Sx)=>{var zP=/^[-+]?0x[a-fA-F0-9]+$/,KP=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var jP={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function VP(e,t={}){if(t=Object.assign({},jP,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&zP.test(r))return Number.parseInt(r,16);{let n=KP.exec(r);if(n){let o=n[1],s=n[2],i=WP(n[3]),c=n[4]||n[6];if(!t.leadingZeros&&s.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!o&&r[1]!==".")return e;{let l=Number(r),d=""+l;return d.search(/[eE]/)!==-1||c?t.eNotation?l:e:r.indexOf(".")!==-1?d==="0"&&i===""||d===i||o&&d==="-"+i?l:e:s?i===d||o+i===d?l:e:r===d||r===o+d?l:e}}else return e}}function WP(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}Sx.exports=VP});var wx=pt((bG,bx)=>{"use strict";var Cx=_a(),Is=yx(),XP=xx(),YP=_x(),Nd=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,16))}},this.addExternalEntities=QP,this.parseXml=rO,this.parseTextData=JP,this.resolveNameSpace=ZP,this.buildAttributesMap=tO,this.isItStopNode=iO,this.replaceEntitiesValue=oO,this.readStopNodeData=cO,this.saveTextToParentTag=sO,this.addChild=nO}};function QP(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function JP(e,t,r,n,o,s,i){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let c=this.options.tagValueProcessor(t,e,r,o,s);return c==null?e:typeof c!=typeof e||c!==e?c:this.options.trimValues?Bd(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Bd(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function ZP(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var eO=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function tO(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=Cx.getAllMatches(e,eO),o=n.length,s={};for(let i=0;i<o;i++){let c=this.resolveNameSpace(n[i][1]),l=n[i][4],d=this.options.attributeNamePrefix+c;if(c.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);let m=this.options.attributeValueProcessor(c,l,t);m==null?s[d]=l:typeof m!=typeof l||m!==l?s[d]=m:s[d]=Bd(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let i={};return i[this.options.attributesGroupName]=s,i}return s}}var rO=function(e){e=e.replace(/\r\n?/g,`
`);let t=new Is("!xml"),r=t,n="",o="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let c=Yn(e,">",s,"Closing Tag is not closed."),l=e.substring(s+2,c).trim();if(this.options.removeNSPrefix){let u=l.indexOf(":");u!==-1&&(l=l.substr(u+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&(n=this.saveTextToParentTag(n,r,o));let d=o.substring(o.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let m=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(m=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):m=o.lastIndexOf("."),o=o.substring(0,m),r=this.tagsNodeStack.pop(),n="",s=c}else if(e[s+1]==="?"){let c=Dd(e,s,!1,"?>");if(!c)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&c.tagName==="?xml"||this.options.ignorePiTags)){let l=new Is(c.tagName);l.add(this.options.textNodeName,""),c.tagName!==c.tagExp&&c.attrExpPresent&&(l[":@"]=this.buildAttributesMap(c.tagExp,o,c.tagName)),this.addChild(r,l,o)}s=c.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let c=Yn(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let l=e.substring(s+4,c-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}s=c}else if(e.substr(s+1,2)==="!D"){let c=XP(e,s);this.docTypeEntities=c.entities,s=c.i}else if(e.substr(s+1,2)==="!["){let c=Yn(e,"]]>",s,"CDATA is not closed.")-2,l=e.substring(s+9,c);n=this.saveTextToParentTag(n,r,o);let d=this.parseTextData(l,r.tagname,o,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):r.add(this.options.textNodeName,d),s=c+2}else{let c=Dd(e,s,this.options.removeNSPrefix),l=c.tagName,d=c.rawTagName,m=c.tagExp,u=c.attrExpPresent,h=c.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let g=r;if(g&&this.options.unpairedTags.indexOf(g.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),l!==t.tagname&&(o+=o?"."+l:l),this.isItStopNode(this.options.stopNodes,o,l)){let x="";if(m.length>0&&m.lastIndexOf("/")===m.length-1)l[l.length-1]==="/"?(l=l.substr(0,l.length-1),o=o.substr(0,o.length-1),m=l):m=m.substr(0,m.length-1),s=c.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)s=c.closeIndex;else{let b=this.readStopNodeData(e,d,h+1);if(!b)throw new Error(`Unexpected end of ${d}`);s=b.i,x=b.tagContent}let I=new Is(l);l!==m&&u&&(I[":@"]=this.buildAttributesMap(m,o,l)),x&&(x=this.parseTextData(x,l,o,!0,u,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),I.add(this.options.textNodeName,x),this.addChild(r,I,o)}else{if(m.length>0&&m.lastIndexOf("/")===m.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),o=o.substr(0,o.length-1),m=l):m=m.substr(0,m.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));let x=new Is(l);l!==m&&u&&(x[":@"]=this.buildAttributesMap(m,o,l)),this.addChild(r,x,o),o=o.substr(0,o.lastIndexOf("."))}else{let x=new Is(l);this.tagsNodeStack.push(r),l!==m&&u&&(x[":@"]=this.buildAttributesMap(m,o,l)),this.addChild(r,x,o),r=x}n="",s=h}}else n+=e[s];return t.child};function nO(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}var oO=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function sO(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function iO(e,t,r){let n="*."+r;for(let o in e){let s=e[o];if(n===s||t===s)return!0}return!1}function aO(e,t,r=">"){let n,o="";for(let s=t;s<e.length;s++){let i=e[s];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function Yn(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function Dd(e,t,r,n=">"){let o=aO(e,t+1,n);if(!o)return;let s=o.data,i=o.index,c=s.search(/\s/),l=s,d=!0;c!==-1&&(l=s.substring(0,c),s=s.substring(c+1).trimStart());let m=l;if(r){let u=l.indexOf(":");u!==-1&&(l=l.substr(u+1),d=l!==o.data.substr(u+1))}return{tagName:l,tagExp:s,closeIndex:i,attrExpPresent:d,rawTagName:m}}function cO(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=Yn(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=Yn(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Yn(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Yn(e,"]]>",r,"StopNode is not closed.")-2;else{let s=Dd(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,r=s.closeIndex)}}function Bd(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:YP(e,r)}else return Cx.isExist(e)?e:""}bx.exports=Nd});var Tx=pt(Rx=>{"use strict";function lO(e,t){return Ax(e,t)}function Ax(e,t,r){let n,o={};for(let s=0;s<e.length;s++){let i=e[s],c=dO(i),l="";if(r===void 0?l=c:l=r+"."+c,c===t.textNodeName)n===void 0?n=i[c]:n+=""+i[c];else{if(c===void 0)continue;if(i[c]){let d=Ax(i[c],t,l),m=mO(d,t);i[":@"]?fO(d,i[":@"],l,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),o[c]!==void 0&&o.hasOwnProperty(c)?(Array.isArray(o[c])||(o[c]=[o[c]]),o[c].push(d)):t.isArray(c,l,m)?o[c]=[d]:o[c]=d}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function dO(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function fO(e,t,r,n){if(t){let o=Object.keys(t),s=o.length;for(let i=0;i<s;i++){let c=o[i];n.isArray(c,r+"."+c,!0,!0)?e[c]=[t[c]]:e[c]=t[c]}}}function mO(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}Rx.prettify=lO});var vx=pt((AG,Ix)=>{var{buildOptions:uO}=hx(),pO=wx(),{prettify:hO}=Tx(),gO=kd(),Fd=class{constructor(t){this.externalEntities={},this.options=uO(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=gO.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new pO(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:hO(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};Ix.exports=Fd});var Dx=pt((RG,Nx)=>{var yO=`
`;function EO(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=yO),Px(e,t,"",r)}function Px(e,t,r,n){let o="",s=!1;for(let i=0;i<e.length;i++){let c=e[i],l=xO(c);if(l===void 0)continue;let d="";if(r.length===0?d=l:d=`${r}.${l}`,l===t.textNodeName){let x=c[l];SO(d,t)||(x=t.tagValueProcessor(l,x),x=Ox(x,t)),s&&(o+=n),o+=x,s=!1;continue}else if(l===t.cdataPropName){s&&(o+=n),o+=`<![CDATA[${c[l][0][t.textNodeName]}]]>`,s=!1;continue}else if(l===t.commentPropName){o+=n+`<!--${c[l][0][t.textNodeName]}-->`,s=!0;continue}else if(l[0]==="?"){let x=kx(c[":@"],t),I=l==="?xml"?"":n,b=c[l][0][t.textNodeName];b=b.length!==0?" "+b:"",o+=I+`<${l}${b}${x}?>`,s=!0;continue}let m=n;m!==""&&(m+=t.indentBy);let u=kx(c[":@"],t),h=n+`<${l}${u}`,g=Px(c[l],t,d,m);t.unpairedTags.indexOf(l)!==-1?t.suppressUnpairedNode?o+=h+">":o+=h+"/>":(!g||g.length===0)&&t.suppressEmptyNode?o+=h+"/>":g&&g.endsWith(">")?o+=h+`>${g}${n}</${l}>`:(o+=h+">",g&&n!==""&&(g.includes("/>")||g.includes("</"))?o+=n+t.indentBy+g+n:o+=g,o+=`</${l}>`),s=!0}return o}function xO(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(e.hasOwnProperty(n)&&n!==":@")return n}}function kx(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){if(!e.hasOwnProperty(n))continue;let o=t.attributeValueProcessor(n,e[n]);o=Ox(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function SO(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function Ox(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}Nx.exports=EO});var Fx=pt((TG,Bx)=>{"use strict";var _O=Dx(),CO={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Wr(e){this.options=Object.assign({},CO,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=AO),this.processTextOrObjNode=bO,this.options.format?(this.indentate=wO,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Wr.prototype.build=function(e){return this.options.preserveOrder?_O(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};Wr.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(Object.prototype.hasOwnProperty.call(e,o))if(typeof e[o]>"u")this.isAttribute(o)&&(n+="");else if(e[o]===null)this.isAttribute(o)?n+="":o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if(typeof e[o]!="object"){let s=this.isAttribute(o);if(s)r+=this.buildAttrPairStr(s,""+e[o]);else if(o===this.options.textNodeName){let i=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(i)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let s=e[o].length,i="",c="";for(let l=0;l<s;l++){let d=e[o][l];if(!(typeof d>"u"))if(d===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(typeof d=="object")if(this.options.oneListGroup){let m=this.j2x(d,t+1);i+=m.val,this.options.attributesGroupName&&d.hasOwnProperty(this.options.attributesGroupName)&&(c+=m.attrStr)}else i+=this.processTextOrObjNode(d,o,t);else if(this.options.oneListGroup){let m=this.options.tagValueProcessor(o,d);m=this.replaceEntitiesValue(m),i+=m}else i+=this.buildTextValNode(d,o,"",t)}this.options.oneListGroup&&(i=this.buildObjectNode(i,o,c,t)),n+=i}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let s=Object.keys(e[o]),i=s.length;for(let c=0;c<i;c++)r+=this.buildAttrPairStr(s[c],""+e[o][s[c]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};Wr.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function bO(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}Wr.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",o=""),(r||r==="")&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+s+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+o}};Wr.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Wr.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}};Wr.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function wO(e){return this.options.indentBy.repeat(e)}function AO(e){return e.startsWith(this.options.attributeNamePrefix)&&e!==this.options.textNodeName?e.substr(this.attrPrefixLen):!1}Bx.exports=Wr});var Lx=pt((IG,Mx)=>{"use strict";var RO=kd(),TO=vx(),IO=Fx();Mx.exports={XMLParser:TO,XMLValidator:RO,XMLBuilder:IO}});var Ux,xt,Ca,$x,Hx=a(()=>{v();Ux=xk(Lx());Id();xt=(e,t)=>Ea(e,t).then(r=>{if(r.length){let n=new Ux.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(l,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(r,!0)}catch(l){throw l&&typeof l=="object"&&Object.defineProperty(l,"$responseBodyText",{value:r}),l}let s="#text",i=Object.keys(o)[0],c=o[i];return c[s]&&(c[i]=c[s],delete c[s]),Rd(c)}return{}}),Ca=async(e,t)=>{let r=await xt(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},$x=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var qx=a(()=>{pE();sx();ix();Hx()});var Ee=a(()=>{He();uE();qx()});var BO,FO,Xr,Ds=a(()=>{K();BO=e=>t=>async r=>{if(!B.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},FO={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Xr=e=>({applyToStack:t=>{t.add(BO(e),FO)}})});var MO,LO,Yr,nS=a(()=>{MO=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:c={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:d}=c,m=l??t.inputFilterSensitiveLog,u=d??t.outputFilterSensitiveLog,{$metadata:h,...g}=n.output;return i?.info?.({clientName:o,commandName:s,input:m(r.input),output:u(g),metadata:h}),n}catch(n){let{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:c={}}=t,{overrideInputFilterSensitiveLog:l}=c,d=l??t.inputFilterSensitiveLog;throw i?.error?.({clientName:o,commandName:s,input:d(r.input),error:n,metadata:n.$metadata}),n}},LO={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Yr=e=>({applyToStack:t=>{t.add(MO(),LO)}})});var Bs=a(()=>{nS()});var oS,UO,$O,HO,qO,Qr,Fs=a(()=>{K();oS="X-Amzn-Trace-Id",UO="AWS_LAMBDA_FUNCTION_NAME",$O="_X_AMZN_TRACE_ID",HO=e=>t=>async r=>{let{request:n}=r;if(!B.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(oS))return t(r);let o=process.env[UO],s=process.env[$O],i=c=>typeof c=="string"&&c.length>0;return i(o)&&i(s)&&(n.headers[oS]=s),t({...r,request:n})},qO={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Qr=e=>({applyToStack:t=>{t.add(HO(e),qO)}})});var lt,lS=a(()=>{lt=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}}});var dS=a(()=>{});var Ve,fS=a(()=>{(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Ve||(Ve={}))});var Oo=a(()=>{lS();dS();fS()});function oN(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function Jr(e){let t=fr(e.userAgentAppId??jd);return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent,userAgentAppId:async()=>{let r=await t();if(!oN(r)){let n=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof r!="string"?n?.warn("userAgentAppId must be a string or undefined."):r.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return r}}}var jd,RS=a(()=>{Ce();jd=void 0});var Jt,TS=a(()=>{Jt=class{constructor({size:t,params:r}){this.data=new Map,this.parameters=[],this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let o=this.data.keys(),s=0;for(;;){let{value:i,done:c}=o.next();if(this.data.delete(i),c||++s>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let o of n){let s=String(t[o]??"");if(s.includes("|;"))return!1;r+=s+"|;"}return r}}});var sN,Us,Vd=a(()=>{sN=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Us=e=>sN.test(e)||e.startsWith("[")&&e.endsWith("]")});var iN,$s,Wd=a(()=>{iN=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),$s=(e,t=!1)=>{if(!t)return iN.test(e);let r=e.split(".");for(let n of r)if(!$s(n))return!1;return!0}});var dt,ka=a(()=>{dt={}});var xr,IS=a(()=>{xr="endpoints"});function St(e){return typeof e!="object"||e==null?e:"ref"in e?`$${St(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(St).join(", ")})`:JSON.stringify(e,null,2)}var vS=a(()=>{});var Hs=a(()=>{IS();vS()});var ne,kS=a(()=>{ne=class extends Error{constructor(t){super(t),this.name="EndpointError"}}});var PS=a(()=>{});var OS=a(()=>{});var NS=a(()=>{});var DS=a(()=>{});var BS=a(()=>{});var FS=a(()=>{});var _t=a(()=>{kS();PS();OS();NS();DS();BS();FS()});var MS,LS=a(()=>{MS=(e,t)=>e===t});var US,$S=a(()=>{_t();US=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new ne(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new ne(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r}});var Pa,HS=a(()=>{_t();$S();Pa=(e,t)=>US(t).reduce((r,n)=>{if(typeof r!="object")throw new ne(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e)});var qS,GS=a(()=>{qS=e=>e!=null});var zS,KS=a(()=>{zS=e=>!e});var Xd,jS,VS=a(()=>{et();Vd();Xd={[ho.HTTP]:80,[ho.HTTPS]:443},jS=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:h,port:g,protocol:x="",path:I="",query:b={}}=e,P=new URL(`${x}//${h}${g?`:${g}`:""}${I}`);return P.search=Object.entries(b).map(([X,L])=>`${X}=${L}`).join("&"),P}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:c}=t;if(c)return null;let l=i.slice(0,-1);if(!Object.values(ho).includes(l))return null;let d=Us(o),m=r.includes(`${n}:${Xd[l]}`)||typeof e=="string"&&e.includes(`${n}:${Xd[l]}`),u=`${n}${m?`:${Xd[l]}`:""}`;return{scheme:l,authority:u,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:d}}});var WS,XS=a(()=>{WS=(e,t)=>e===t});var YS,QS=a(()=>{YS=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r)});var JS,ZS=a(()=>{JS=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)});var Yd=a(()=>{LS();HS();GS();Wd();KS();VS();XS();QS();ZS()});var e_,t_=a(()=>{Yd();e_={booleanEquals:MS,getAttr:Pa,isSet:qS,isValidHostLabel:$s,not:zS,parseURL:jS,stringEquals:WS,substring:YS,uriEncode:JS}});var Oa,Qd=a(()=>{Yd();Oa=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let c=e.substring(s+1,i);if(c.includes("#")){let[l,d]=c.split("#");r.push(Pa(n[l],d))}else r.push(n[c]);o=i+1}return r.join("")}});var r_,n_=a(()=>{r_=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e]});var Zr,qs=a(()=>{_t();Jd();Qd();n_();Zr=(e,t,r)=>{if(typeof e=="string")return Oa(e,r);if(e.fn)return Na(e,r);if(e.ref)return r_(e,r);throw new ne(`'${t}': ${String(e)} is not a string, function or reference.`)}});var Na,Jd=a(()=>{ka();t_();qs();Na=({fn:e,argv:t},r)=>{let n=t.map(s=>["boolean","number"].includes(typeof s)?s:Zr(s,"arg",r)),o=e.split(".");return o[0]in dt&&o[1]!=null?dt[o[0]][o[1]](...n):e_[e](...n)}});var o_,s_=a(()=>{Hs();_t();Jd();o_=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new ne(`'${e}' is already defined in Reference Record.`);let n=Na(t,r);return r.logger?.debug?.(`${xr} evaluateCondition: ${St(t)} = ${St(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}}});var No,Da=a(()=>{Hs();s_();No=(e=[],t)=>{let r={};for(let n of e){let{result:o,toAssign:s}=o_(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};s&&(r[s.name]=s.value,t.logger?.debug?.(`${xr} assign: ${s.name} := ${St(s.value)}`))}return{result:!0,referenceRecord:r}}});var i_,a_=a(()=>{_t();qs();i_=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=Zr(s,"Header value entry",t);if(typeof i!="string")throw new ne(`Header '${n}' value '${i}' is not a string`);return i})}),{})});var Zd,c_=a(()=>{_t();Qd();ef();Zd=(e,t)=>{if(Array.isArray(e))return e.map(r=>Zd(r,t));switch(typeof e){case"string":return Oa(e,t);case"object":if(e===null)throw new ne(`Unexpected endpoint property: ${e}`);return Ba(e,t);case"boolean":return e;default:throw new ne(`Unexpected endpoint property type: ${typeof e}`)}}});var Ba,ef=a(()=>{c_();Ba=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:Zd(o,t)}),{})});var l_,d_=a(()=>{_t();qs();l_=(e,t)=>{let r=Zr(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new ne(`Endpoint URL must be a string, got ${typeof r}`)}});var f_,m_=a(()=>{Hs();Da();a_();ef();d_();f_=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=No(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:c,properties:l,headers:d}=n;return t.logger?.debug?.(`${xr} Resolving endpoint from template: ${St(n)}`),{...d!=null&&{headers:i_(d,i)},...l!=null&&{properties:Ba(l,i)},url:l_(c,i)}}});var u_,p_=a(()=>{_t();Da();qs();u_=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=No(r,t);if(o)throw new ne(Zr(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))}});var h_,g_=a(()=>{Da();tf();h_=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=No(r,t);if(o)return Fa(n,{...t,referenceRecord:{...t.referenceRecord,...s}})}});var Fa,tf=a(()=>{_t();m_();p_();g_();Fa=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=f_(r,t);if(n)return n}else if(r.type==="error")u_(r,t);else if(r.type==="tree"){let n=h_(r,t);if(n)return n}else throw new ne(`Unknown endpoint rule: ${r}`);throw new ne("Rules evaluation failed")}});var y_=a(()=>{ka();tf()});var Sr,E_=a(()=>{Hs();_t();y_();Sr=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;t.logger?.debug?.(`${xr} Initial EndpointParams: ${St(r)}`);let i=Object.entries(o).filter(([,d])=>d.default!=null).map(([d,m])=>[d,m.default]);if(i.length>0)for(let[d,m]of i)r[d]=r[d]??m;let c=Object.entries(o).filter(([,d])=>d.required).map(([d])=>d);for(let d of c)if(r[d]==null)throw new ne(`Missing required parameter: '${d}'`);let l=Fa(s,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${xr} Resolved endpoint: ${St(l)}`),l}});var Zt=a(()=>{TS();Vd();Wd();ka();E_();_t()});var rf=a(()=>{Zt()});var nf,x_=a(()=>{Zt();rf();nf=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!nf(r))return!1;return!0}return!(!$s(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Us(e))}});var S_,aN,__,C_=a(()=>{S_=":",aN="/",__=e=>{let t=e.split(S_);if(t.length<6)return null;let[r,n,o,s,i,...c]=t;if(r!=="arn"||n===""||o===""||c.join(S_)==="")return null;let l=c.map(d=>d.split(aN)).flat();return{partition:n,service:o,region:s,accountId:i,resourceId:l}}});var w_,b_=a(()=>{w_={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"}});var lN,dN,A_,R_,of=a(()=>{b_();lN=w_,dN="",A_=e=>{let{partitions:t}=lN;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,c]of Object.entries(o))if(i===e)return{...s,...c}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},R_=()=>dN});var _r,T_=a(()=>{Zt();x_();C_();of();_r={isVirtualHostableS3Bucket:nf,parseArn:__,partition:A_};dt.aws=_r});var I_=a(()=>{Zt()});var v_=a(()=>{Zt()});var k_=a(()=>{});var P_=a(()=>{});var O_=a(()=>{});var N_=a(()=>{});var D_=a(()=>{});var B_=a(()=>{v_();k_();P_();O_();N_();D_()});var Do=a(()=>{T_();of();rf();I_();B_()});async function F_(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&we(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let s=await t.retryStrategy();typeof s.acquireInitialRetryToken=="function"?s.constructor?.name?.includes("Adaptive")?we(e,"RETRY_MODE_ADAPTIVE","F"):we(e,"RETRY_MODE_STANDARD","E"):we(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let s=e.endpointV2;switch(String(s?.url?.hostname).match(fN)&&we(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":we(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":we(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":we(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let o=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(o?.$source){let s=o;s.accountId&&we(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,c]of Object.entries(s.$source??{}))we(e,i,c)}}var fN,M_=a(()=>{Ee();fN=/\d{12}\.ddb/});var sf,Ma,af,La,L_,U_,cf,$_=a(()=>{sf="user-agent",Ma="x-amz-user-agent",af=" ",La="/",L_=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,U_=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,cf="-"});function H_(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=1024){t.length?t+=","+n:t+=n;continue}break}return t}var q_=a(()=>{});var mN,Ua,uN,en,G_=a(()=>{Do();K();M_();$_();q_();mN=e=>(t,r)=>async n=>{let{request:o}=n;if(!B.isInstance(o))return t(n);let{headers:s}=o,i=r?.userAgent?.map(Ua)||[],c=(await e.defaultUserAgentProvider()).map(Ua);await F_(r,e,n);let l=r;c.push(`m/${H_(Object.assign({},r.__smithy_context?.features,l.__aws_sdk_context?.features))}`);let d=e?.customUserAgent?.map(Ua)||[],m=await e.userAgentAppId();m&&c.push(Ua([`app/${m}`]));let u=R_(),h=(u?[u]:[]).concat([...c,...i,...d]).join(af),g=[...c.filter(x=>x.startsWith("aws-sdk-")),...d].join(af);return e.runtime!=="browser"?(g&&(s[Ma]=s[Ma]?`${s[sf]} ${g}`:g),s[sf]=h):s[Ma]=h,t({...n,request:o})},Ua=e=>{let t=e[0].split(La).map(i=>i.replace(L_,cf)).join(La),r=e[1]?.replace(U_,cf),n=t.indexOf(La),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(i=>i&&i.length>0).reduce((i,c,l)=>{switch(l){case 0:return c;case 1:return`${i}/${c}`;default:return`${i}#${c}`}},"")},uN={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},en=e=>({applyToStack:t=>{t.add(mN(e),uN)}})});var Bo=a(()=>{RS();G_()});var pN,hN,tn,z_=a(()=>{Oo();pN="AWS_USE_DUALSTACK_ENDPOINT",hN="use_dualstack_endpoint",tn={environmentVariableSelector:e=>lt(e,pN,Ve.ENV),configFileSelector:e=>lt(e,hN,Ve.CONFIG),default:!1}});var gN,yN,rn,K_=a(()=>{Oo();gN="AWS_USE_FIPS_ENDPOINT",yN="use_fips_endpoint",rn={environmentVariableSelector:e=>lt(e,gN,Ve.ENV),configFileSelector:e=>lt(e,yN,Ve.CONFIG),default:!1}});var j_=a(()=>{Ge()});var V_=a(()=>{});var W_=a(()=>{Ge();V_()});var X_=a(()=>{z_();K_();j_();W_()});var EN,xN,er,nn,Y_=a(()=>{EN="AWS_REGION",xN="region",er={environmentVariableSelector:e=>e[EN],configFileSelector:e=>e[xN],default:()=>{throw new Error("Region is missing")}},nn={preferredFile:"credentials"}});var $a,lf=a(()=>{$a=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"))});var df,Q_=a(()=>{lf();df=e=>$a(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e});var on,J_=a(()=>{Q_();lf();on=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return df(t);let n=await t();return df(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return $a(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}}});var Z_=a(()=>{Y_();J_()});var eC=a(()=>{});var tC=a(()=>{});var rC=a(()=>{});var nC=a(()=>{});var oC=a(()=>{});var sC=a(()=>{});var iC=a(()=>{rC();nC();oC();sC()});var aC=a(()=>{eC();tC();iC()});var tr=a(()=>{X_();Z_();aC()});function SN(e){return t=>async r=>{let n=r.request;if(B.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(lC)===-1)try{let i=e(o);n.headers={...n.headers,[lC]:String(i)}}catch{}}return t({...r,request:n})}}var lC,_N,sn,Gs=a(()=>{K();lC="content-length";_N={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},sn=e=>({applyToStack:t=>{t.add(SN(e.bodyLengthChecker),_N)}})});var dC,CN,bN,wN,AN,RN,fC=a(()=>{dC=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),RN(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!AN(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},CN=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,bN=/(\d+\.){3}\d+/,wN=/\.\./,AN=e=>CN.test(e)&&!bN.test(e)&&!wN.test(e),RN=e=>{let[t,r,n,,,o]=e.split(":"),s=t==="arn"&&e.split(":").length>=6,i=!!(s&&r&&n&&o);if(s&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i}});var mC=a(()=>{fC()});var uC,pC=a(()=>{uC=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="credentialScope"||t==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:c,path:l}=o;return`${s}//${i}${c?":"+c:""}${l}`}}return o}:n}});function Ha(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}var ff=a(()=>{});var hC,gC=a(()=>{ee();ff();hC=(e,t)=>async()=>{try{let r=e(process.env);if(r===void 0)throw new Error;return r}catch(r){throw new k(r.message||`Not found in ENV: ${Ha(e.toString())}`,{logger:t})}}});import{homedir as TN}from"os";import{sep as IN}from"path";var mf,vN,an,Fo=a(()=>{mf={},vN=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",an=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${IN}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let o=vN();return mf[o]||(mf[o]=TN()),mf[o]}});var uf,kN,Ct,yC=a(()=>{uf="AWS_PROFILE",kN="default",Ct=e=>e.profile||process.env[uf]||kN});import{createHash as PN}from"crypto";import{join as ON}from"path";var qa,pf=a(()=>{Fo();qa=e=>{let r=PN("sha1").update(e).digest("hex");return ON(an(),".aws","sso","cache",`${r}.json`)}});import{promises as NN}from"fs";var DN,Ga,EC=a(()=>{pf();({readFile:DN}=NN),Ga=async e=>{let t=qa(e),r=await DN(t,"utf8");return JSON.parse(r)}});var xC,SC=a(()=>{et();Mo();xC=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(bt);return r===-1?!1:Object.values(dr).includes(t.substring(0,r))}).reduce((t,[r,n])=>{let o=r.indexOf(bt),s=r.substring(0,o)===dr.PROFILE?r.substring(o+1):r;return t[s]=n,t},{...e.default&&{default:e.default}})});import{join as BN}from"path";var FN,za,hf=a(()=>{Fo();FN="AWS_CONFIG_FILE",za=()=>process.env[FN]||BN(an(),".aws","config")});import{join as MN}from"path";var LN,_C,CC=a(()=>{Fo();LN="AWS_SHARED_CREDENTIALS_FILE",_C=()=>process.env[LN]||MN(an(),".aws","credentials")});var UN,$N,zs,gf=a(()=>{et();Mo();UN=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,$N=["__proto__","profile __proto__"],zs=e=>{let t={},r,n;for(let o of e.split(/\r?\n/)){let s=o.split(/(^|\s)[;#]/)[0].trim();if(s[0]==="["&&s[s.length-1]==="]"){r=void 0,n=void 0;let c=s.substring(1,s.length-1),l=UN.exec(c);if(l){let[,d,,m]=l;Object.values(dr).includes(d)&&(r=[d,m].join(bt))}else r=c;if($N.includes(c))throw new Error(`Found invalid profile name "${c}"`)}else if(r){let c=s.indexOf("=");if(![0,-1].includes(c)){let[l,d]=[s.substring(0,c).trim(),s.substring(c+1).trim()];if(d==="")n=l;else{n&&o.trimStart()===o&&(n=void 0),t[r]=t[r]||{};let m=n?[n,l].join(bt):l;t[r][m]=d}}}}return t}});import{promises as HN}from"fs";var qN,yf,Ks,Ef=a(()=>{({readFile:qN}=HN),yf={},Ks=(e,t)=>((!yf[e]||t?.ignoreCache)&&(yf[e]=qN(e,"utf8")),yf[e])});import{join as bC}from"path";var wC,bt,Ka,Mo=a(()=>{SC();hf();CC();Fo();gf();Ef();wC=()=>({}),bt=".",Ka=async(e={})=>{let{filepath:t=_C(),configFilepath:r=za()}=e,n=an(),o="~/",s=t;t.startsWith(o)&&(s=bC(n,t.slice(2)));let i=r;r.startsWith(o)&&(i=bC(n,r.slice(2)));let c=await Promise.all([Ks(i,{ignoreCache:e.ignoreCache}).then(zs).then(xC).catch(wC),Ks(s,{ignoreCache:e.ignoreCache}).then(zs).catch(wC)]);return{configFile:c[0],credentialsFile:c[1]}}});var AC,RC=a(()=>{et();Mo();AC=e=>Object.entries(e).filter(([t])=>t.startsWith(dr.SSO_SESSION+bt)).reduce((t,[r,n])=>({...t,[r.substring(r.indexOf(bt)+1)]:n}),{})});var GN,ja,TC=a(()=>{hf();RC();gf();Ef();GN=()=>({}),ja=async(e={})=>Ks(e.configFilepath??za()).then(zs).then(AC).catch(GN)});var IC,vC=a(()=>{IC=(...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t}});var cn,kC=a(()=>{Mo();vC();cn=async e=>{let t=await Ka(e);return IC(t.configFile,t.credentialsFile)}});var PC=a(()=>{});var $t=a(()=>{Fo();yC();pf();EC();Mo();TC();kC();PC()});var OC,NC=a(()=>{ee();$t();ff();OC=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=Ct(r),{configFile:o,credentialsFile:s}=await Ka(r),i=s[n]||{},c=o[n]||{},l=t==="config"?{...i,...c}:{...c,...i};try{let m=e(l,t==="config"?o:s);if(m===void 0)throw new Error;return m}catch(d){throw new k(d.message||`Not found in config files w/ profile [${n}]: ${Ha(e.toString())}`,{logger:r.logger})}}});var zN,DC,BC=a(()=>{ee();zN=e=>typeof e=="function",DC=e=>zN(e)?async()=>await e():Dy(e)});var M,FC=a(()=>{ee();gC();NC();BC();M=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>Kn(gr(hC(e),OC(t,n),DC(r)))});var Cr=a(()=>{FC()});var MC,LC,UC,$C=a(()=>{$t();MC="AWS_ENDPOINT_URL",LC="endpoint_url",UC=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(s=>s.toUpperCase()),n=t[[MC,...r].join("_")];if(n)return n;let o=t[MC];if(o)return o},configFileSelector:(t,r)=>{if(r&&t.services){let o=r[["services",t.services].join(bt)];if(o){let s=e.split(" ").map(c=>c.toLowerCase()),i=o[[s.join("_"),LC].join(bt)];if(i)return i}}let n=t[LC];if(n)return n},default:void 0})});var Va,xf=a(()=>{Cr();$C();Va=async e=>M(UC(e??""))()});function HC(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var qC=a(()=>{});var st,Zn=a(()=>{qC();st=e=>{if(typeof e=="string")return st(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=HC(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}}});var Wa,Xa=a(()=>{Zn();Wa=e=>typeof e=="object"?"url"in e?st(e.url):e:st(e)});var GC,Sf,_f=a(()=>{mC();pC();xf();Xa();GC=async(e,t,r,n)=>{if(!r.endpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await Va(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(Wa(i)))}let o=await Sf(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},Sf=async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[s,i]of Object.entries(o))switch(i.type){case"staticContextParams":n[s]=i.value;break;case"contextParams":n[s]=e[i.name];break;case"clientContextParams":case"builtInParams":n[s]=await uC(i.name,s,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await dC(n),n}});var zC=a(()=>{_f();Xa()});var KC,Cf=a(()=>{Ce();Ge();_f();KC=({config:e,instructions:t})=>(r,n)=>async o=>{e.endpoint&&Sy(n,"ENDPOINT_OVERRIDE","N");let s=await GC(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=s.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let l=ke(n)?.selectedHttpAuthScheme?.httpAuthOption;l&&(l.signingProperties=Object.assign(l.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...o})}});var KN,V,jC=a(()=>{me();Cf();KN={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:ys.name},V=(e,t)=>({applyToStack:r=>{r.addRelativeTo(KC({config:e,instructions:t}),KN)}})});var ln,VC=a(()=>{Ge();xf();Xa();ln=e=>{let t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>Wa(await de(r)()):void 0,s={...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:de(e.useDualstackEndpoint??!1),useFipsEndpoint:de(e.useFipsEndpoint??!1)},i;return s.serviceConfiguredEndpoint=async()=>(e.serviceId&&!i&&(i=Va(e.serviceId)),i),s}});var WC=a(()=>{});var ae=a(()=>{zC();Cf();jC();VC();WC()});var Ht,eo,rr,Ya=a(()=>{(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Ht||(Ht={}));eo=3,rr=Ht.STANDARD});var XC,YC,QC,JC,ZC=a(()=>{XC=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],YC=["TimeoutError","RequestTimeout","RequestTimeoutException"],QC=[500,502,503,504],JC=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"]});var jN,Lo,Qa,eb,js=a(()=>{ZC();jN=e=>e.$metadata?.clockSkewCorrected,Lo=e=>e.$metadata?.httpStatusCode===429||XC.includes(e.name)||e.$retryable?.throttling==!0,Qa=e=>jN(e)||YC.includes(e.name)||JC.includes(e?.code||"")||QC.includes(e.$metadata?.httpStatusCode||0),eb=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Qa(e)}return!1}});var Vs,bf=a(()=>{js();Vs=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),Lo(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}}});var Ja,Za,Uo=a(()=>{Ja="amz-sdk-invocation-id",Za="amz-sdk-request"});var tb,rb=a(()=>{Uo();tb=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}}});var wf,nb=a(()=>{Uo();wf=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r})});var to,tc=a(()=>{Ya();Uo();rb();nb();to=class{constructor(t){this.maxAttempts=t,this.mode=Ht.STANDARD,this.capacity=500,this.retryBackoffStrategy=tb(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return wf({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?500:100);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,c=this.getCapacityCost(o);return this.capacity-=c,wf({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:c})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${eo}`),eo}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}});var rc,cb=a(()=>{Ya();bf();tc();rc=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=Ht.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Vs,this.standardRetryStrategy=new to(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}});var lb=a(()=>{Uo();tc()});var db=a(()=>{});var wt=a(()=>{cb();lb();bf();tc();Ya();Uo();db()});import VN from"crypto";function Rf(){return nc>oc.length-16&&(VN.randomFillSync(oc),nc=0),oc.slice(nc,nc+=16)}var oc,nc,fb=a(()=>{oc=new Uint8Array(256),nc=oc.length});function mb(e,t=0){return Oe[e[t+0]]+Oe[e[t+1]]+Oe[e[t+2]]+Oe[e[t+3]]+"-"+Oe[e[t+4]]+Oe[e[t+5]]+"-"+Oe[e[t+6]]+Oe[e[t+7]]+"-"+Oe[e[t+8]]+Oe[e[t+9]]+"-"+Oe[e[t+10]]+Oe[e[t+11]]+Oe[e[t+12]]+Oe[e[t+13]]+Oe[e[t+14]]+Oe[e[t+15]]}var Oe,ub=a(()=>{Oe=[];for(let e=0;e<256;++e)Oe.push((e+256).toString(16).slice(1))});import WN from"crypto";var Tf,pb=a(()=>{Tf={randomUUID:WN.randomUUID}});function XN(e,t,r){if(Tf.randomUUID&&!t&&!e)return Tf.randomUUID();e=e||{};let n=e.random||(e.rng||Rf)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return mb(n)}var If,hb=a(()=>{pb();fb();ub();If=XN});var gb=a(()=>{hb()});var yb=a(()=>{wt()});var vf=a(()=>{wt()});var kf=a(()=>{js()});var Pf,Of=a(()=>{Pf=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`)});var Nf=a(()=>{K();js();wt();yb();vf();kf();Of()});var Eb=a(()=>{wt();Nf()});var xb,Sb,dn,fn,YN,QN,mn,_b=a(()=>{Ge();wt();xb="AWS_MAX_ATTEMPTS",Sb="max_attempts",dn={environmentVariableSelector:e=>{let t=e[xb];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${xb} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[Sb];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Sb} mast be a number, got "${t}"`);return r},default:eo},fn=e=>{let{retryStrategy:t}=e,r=de(e.maxAttempts??eo);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await de(e.retryMode)()===Ht.ADAPTIVE?new rc(r):new to(r))}},YN="AWS_RETRY_MODE",QN="retry_mode",mn={environmentVariableSelector:e=>e[YN],configFileSelector:e=>e[QN],default:rr}});var Cb=a(()=>{K();wt()});import{Readable as JN}from"stream";var bb,wb=a(()=>{bb=e=>e?.body instanceof JN||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream});var ZN,eD,tD,rD,nD,un,oD,Ab=a(()=>{K();js();v();wt();gb();wb();Of();ZN=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(eD(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),c=new Error,l=0,d=0,{request:m}=n,u=B.isInstance(m);for(u&&(m.headers[Ja]=If());;)try{u&&(m.headers[Za]=`attempt=${l+1}; max=${s}`);let{response:h,output:g}=await t(n);return o.recordSuccess(i),g.$metadata.attempts=l+1,g.$metadata.totalRetryDelay=d,{response:h,output:g}}catch(h){let g=tD(h);if(c=Pf(h),u&&bb(m))throw(r.logger instanceof at?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),c;try{i=await o.refreshRetryTokenForRetry(i,g)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=l+1,c.$metadata.totalRetryDelay=d,c}l=i.getRetryCount();let x=i.getRetryDelay();d+=x,await new Promise(I=>setTimeout(I,x))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},eD=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",tD=e=>{let t={error:e,errorType:rD(e)},r=oD(e.$response);return r&&(t.retryAfterHint=r),t},rD=e=>Lo(e)?"THROTTLING":Qa(e)?"TRANSIENT":eb(e)?"SERVER_ERROR":"CLIENT_ERROR",nD={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},un=e=>({applyToStack:t=>{t.add(ZN(e),nD)}}),oD=e=>{if(!$e.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)}});var br=a(()=>{Eb();Nf();_b();vf();Cb();kf();Ab()});var Oc,Nc,RA,TA,IA,vA,Cm,kA=a(()=>{He();ee();Oc="AWS_ACCESS_KEY_ID",Nc="AWS_SECRET_ACCESS_KEY",RA="AWS_SESSION_TOKEN",TA="AWS_CREDENTIAL_EXPIRATION",IA="AWS_CREDENTIAL_SCOPE",vA="AWS_ACCOUNT_ID",Cm=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[Oc],r=process.env[Nc],n=process.env[RA],o=process.env[TA],s=process.env[IA],i=process.env[vA];if(t&&r){let c={accessKeyId:t,secretAccessKey:r,...n&&{sessionToken:n},...o&&{expiration:new Date(o)},...s&&{credentialScope:s},...i&&{accountId:i}};return J(c,"CREDENTIALS_ENV_VARS","g"),c}throw new k("Unable to find environment variable credentials.",{logger:e?.logger})}});var PA={};ht(PA,{ENV_ACCOUNT_ID:()=>vA,ENV_CREDENTIAL_SCOPE:()=>IA,ENV_EXPIRATION:()=>TA,ENV_KEY:()=>Oc,ENV_SECRET:()=>Nc,ENV_SESSION:()=>RA,fromEnv:()=>Cm});var bm=a(()=>{kA()});import{Buffer as c3}from"buffer";import{request as l3}from"http";function gn(e){return new Promise((t,r)=>{let n=l3({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",o=>{r(Object.assign(new Ke("Unable to connect to instance metadata service"),o)),n.destroy()}),n.on("timeout",()=>{r(new Ke("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",o=>{let{statusCode:s=400}=o;(s<200||300<=s)&&(r(Object.assign(new Ke("Error response received from instance metadata service"),{statusCode:s})),n.destroy());let i=[];o.on("data",c=>{i.push(c)}),o.on("end",()=>{t(c3.concat(i)),n.destroy()})}),n.end()})}var Dc=a(()=>{ee()});var Bc,Fc,wm=a(()=>{Bc=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",Fc=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}})});var jJ,VJ,Js,Mc=a(()=>{jJ=1e3,VJ=0,Js=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t})});var Zs,Am=a(()=>{Zs=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r}});import{parse as d3}from"url";var Lc,Uc,Rm,f3,m3,u3,p3,h3,g3,OA=a(()=>{ee();Dc();wm();Mc();Am();Lc="AWS_CONTAINER_CREDENTIALS_FULL_URI",Uc="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Rm="AWS_CONTAINER_AUTHORIZATION_TOKEN",f3=(e={})=>{let{timeout:t,maxRetries:r}=Js(e);return()=>Zs(async()=>{let n=await g3({logger:e.logger}),o=JSON.parse(await m3(t,n));if(!Bc(o))throw new k("Invalid response received from instance metadata service.",{logger:e.logger});return Fc(o)},r)},m3=async(e,t)=>(process.env[Rm]&&(t.headers={...t.headers,Authorization:process.env[Rm]}),(await gn({...t,timeout:e})).toString()),u3="169.254.170.2",p3={localhost:!0,"127.0.0.1":!0},h3={"http:":!0,"https:":!0},g3=async({logger:e})=>{if(process.env[Uc])return{hostname:u3,path:process.env[Uc]};if(process.env[Lc]){let t=d3(process.env[Lc]);if(!t.hostname||!(t.hostname in p3))throw new k(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in h3))throw new k(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new k(`The container metadata credential provider cannot be used unless the ${Uc} or ${Lc} environment variable is set`,{tryNextLink:!1,logger:e})}});var $c,NA=a(()=>{ee();$c=class e extends k{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="InstanceMetadataV1FallbackError",Object.setPrototypeOf(this,e.prototype)}}});var oo,Tm=a(()=>{(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(oo||(oo={}))});var y3,E3,DA,BA=a(()=>{y3="AWS_EC2_METADATA_SERVICE_ENDPOINT",E3="ec2_metadata_service_endpoint",DA={environmentVariableSelector:e=>e[y3],configFileSelector:e=>e[E3],default:void 0}});var yn,Im=a(()=>{(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(yn||(yn={}))});var x3,S3,FA,MA=a(()=>{Im();x3="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",S3="ec2_metadata_service_endpoint_mode",FA={environmentVariableSelector:e=>e[x3],configFileSelector:e=>e[S3],default:yn.IPv4}});var Hc,_3,C3,vm=a(()=>{Cr();Zn();Tm();BA();Im();MA();Hc=async()=>st(await _3()||await C3()),_3=async()=>M(DA)(),C3=async()=>{let e=await M(FA)();switch(e){case yn.IPv4:return oo.IPv4;case yn.IPv6:return oo.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(yn)}`)}}});var b3,km,LA=a(()=>{b3="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",km=(e,t)=>{let r=300+Math.floor(Math.random()*300),n=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+b3);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}}});var UA,$A=a(()=>{LA();UA=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=km(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=km(n,r);else throw s}return n=o,o}}});var GA,w3,Pm,HA,qA,A3,R3,T3,I3,v3,zA=a(()=>{Cr();ee();NA();Dc();wm();Mc();Am();vm();$A();GA="/latest/meta-data/iam/security-credentials/",w3="/latest/api/token",Pm="AWS_EC2_METADATA_V1_DISABLED",HA="ec2_metadata_v1_disabled",qA="x-aws-ec2-metadata-token",A3=(e={})=>UA(R3(e),{logger:e.logger}),R3=(e={})=>{let t=!1,{logger:r,profile:n}=e,{timeout:o,maxRetries:s}=Js(e),i=async(c,l)=>{if(t||l.headers?.[qA]==null){let u=!1,h=!1,g=await M({environmentVariableSelector:x=>{let I=x[Pm];if(h=!!I&&I!=="false",I===void 0)throw new k(`${Pm} not set in env, checking config file next.`,{logger:e.logger});return h},configFileSelector:x=>{let I=x[HA];return u=!!I&&I!=="false",u},default:!1},{profile:n})();if(e.ec2MetadataV1Disabled||g){let x=[];throw e.ec2MetadataV1Disabled&&x.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),u&&x.push(`config file profile (${HA})`),h&&x.push(`process environment variable (${Pm})`),new $c(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${x.join(", ")}].`)}}let m=(await Zs(async()=>{let u;try{u=await I3(l)}catch(h){throw h.statusCode===401&&(t=!1),h}return u},c)).trim();return Zs(async()=>{let u;try{u=await v3(m,l,e)}catch(h){throw h.statusCode===401&&(t=!1),h}return u},c)};return async()=>{let c=await Hc();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(s,{...c,timeout:o});{let l;try{l=(await T3({...c,timeout:o})).toString()}catch(d){if(d?.statusCode===400)throw Object.assign(d,{message:"EC2 Metadata token request returned error"});return(d.message==="TimeoutError"||[403,404,405].includes(d.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(s,{...c,timeout:o})}return i(s,{...c,headers:{[qA]:l},timeout:o})}}},T3=async e=>gn({...e,path:w3,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),I3=async e=>(await gn({...e,path:GA})).toString(),v3=async(e,t,r)=>{let n=JSON.parse((await gn({...t,path:GA+e})).toString());if(!Bc(n))throw new k("Invalid response received from instance metadata service.",{logger:r.logger});return Fc(n)}});var KA=a(()=>{});var ei={};ht(ei,{DEFAULT_MAX_RETRIES:()=>VJ,DEFAULT_TIMEOUT:()=>jJ,ENV_CMDS_AUTH_TOKEN:()=>Rm,ENV_CMDS_FULL_URI:()=>Lc,ENV_CMDS_RELATIVE_URI:()=>Uc,Endpoint:()=>oo,fromContainerMetadata:()=>f3,fromInstanceMetadata:()=>A3,getInstanceMetadataEndpoint:()=>Hc,httpRequest:()=>gn,providerConfigFromInit:()=>Js});var ti=a(()=>{OA();zA();Mc();KA();Dc();vm();Tm()});var k3,P3,O3,jA,VA=a(()=>{ee();k3="169.254.170.2",P3="169.254.170.23",O3="[fd00:ec2::23]",jA=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===k3||e.hostname===P3||e.hostname===O3)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),n=o=>{let s=parseInt(o,10);return 0<=s&&s<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new k(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}}});function WA(e){return new B({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}async function XA(e,t){let n=await ca(e.body).transformToString();if(e.statusCode===200){let o=JSON.parse(n);if(typeof o.AccessKeyId!="string"||typeof o.SecretAccessKey!="string"||typeof o.Token!="string"||typeof o.Expiration!="string")throw new k("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.Token,expiration:PE(o.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let o={};try{o=JSON.parse(n)}catch{}throw Object.assign(new k(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:o.Code,Message:o.Message})}throw new k(`Server responded with status: ${e.statusCode}`,{logger:t})}var YA=a(()=>{ee();K();v();xs()});var QA,JA=a(()=>{QA=(e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(s=>setTimeout(s,r))}return await e()}});import N3 from"fs/promises";var D3,B3,F3,M3,L3,ZA,e0=a(()=>{He();qn();ee();VA();YA();JA();D3="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",B3="http://169.254.170.2",F3="AWS_CONTAINER_CREDENTIALS_FULL_URI",M3="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",L3="AWS_CONTAINER_AUTHORIZATION_TOKEN",ZA=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[D3],n=e.awsContainerCredentialsFullUri??process.env[F3],o=e.awsContainerAuthorizationToken??process.env[L3],s=e.awsContainerAuthorizationTokenFile??process.env[M3],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console.warn:e.logger.warn;if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),o&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)t=n;else if(r)t=`${B3}${r}`;else throw new k(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let c=new URL(t);jA(c,e.logger);let l=new yt({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return QA(async()=>{let d=WA(c);o?d.headers.Authorization=o:s&&(d.headers.Authorization=(await N3.readFile(s)).toString());try{let m=await l.handle(d);return XA(m.response).then(u=>J(u,"CREDENTIALS_HTTP","z"))}catch(m){throw new k(String(m),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)}});var Om={};ht(Om,{fromHttp:()=>ZA});var Nm=a(()=>{e0()});var U3,t0,r0=a(()=>{ee();U3="AWS_EC2_METADATA_DISABLED",t0=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:o}=await Promise.resolve().then(()=>(ti(),ei));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:s}=await Promise.resolve().then(()=>(Nm(),Om));return gr(s(e),n(e))}return process.env[U3]?async()=>{throw new k("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),o(e))}});var Dm,Bm=a(()=>{Dm=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string")});var Ko,qc=a(()=>{Ko="To refresh this SSO session run 'aws sso login' with the corresponding profile."});function $3(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Fm(e){return{schemeId:"smithy.api#noAuth"}}var n0,o0,s0,Mm=a(()=>{Ee();Ge();n0=async(e,t,r)=>({operation:ke(t).operation,region:await de(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});o0=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(Fm(e));break}case"RegisterClient":{t.push(Fm(e));break}case"StartDeviceAuthorization":{t.push(Fm(e));break}default:t.push($3(e))}return t},s0=e=>({...Hr(e)})});var i0,En,jo=a(()=>{i0=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),En={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var c0,a0=a(()=>{c0={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.686.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso-oidc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.686.0","@aws-sdk/credential-provider-node":"3.686.0","@aws-sdk/middleware-host-header":"3.686.0","@aws-sdk/middleware-logger":"3.686.0","@aws-sdk/middleware-recursion-detection":"3.686.0","@aws-sdk/middleware-user-agent":"3.686.0","@aws-sdk/region-config-resolver":"3.686.0","@aws-sdk/types":"3.686.0","@aws-sdk/util-endpoints":"3.686.0","@aws-sdk/util-user-agent-browser":"3.686.0","@aws-sdk/util-user-agent-node":"3.686.0","@smithy/config-resolver":"^3.0.10","@smithy/core":"^2.5.1","@smithy/fetch-http-handler":"^4.0.0","@smithy/hash-node":"^3.0.8","@smithy/invalid-dependency":"^3.0.8","@smithy/middleware-content-length":"^3.0.10","@smithy/middleware-endpoint":"^3.2.1","@smithy/middleware-retry":"^3.0.25","@smithy/middleware-serde":"^3.0.8","@smithy/middleware-stack":"^3.0.8","@smithy/node-config-provider":"^3.1.9","@smithy/node-http-handler":"^3.2.5","@smithy/protocol-http":"^4.1.5","@smithy/smithy-client":"^3.4.2","@smithy/types":"^3.6.0","@smithy/url-parser":"^3.0.8","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.25","@smithy/util-defaults-mode-node":"^3.0.25","@smithy/util-endpoints":"^2.1.4","@smithy/util-middleware":"^3.0.8","@smithy/util-retry":"^3.0.8","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",peerDependencies:{"@aws-sdk/client-sts":"^3.686.0"},browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}}});var Lm,Um=a(()=>{Lm={isCrtAvailable:!1}});var l0,d0=a(()=>{Um();l0=()=>Lm.isCrtAvailable?["md/crt-avail"]:null});import{platform as q3,release as G3}from"os";import{env as f0,versions as z3}from"process";var xn,m0=a(()=>{d0();Um();xn=({serviceId:e,clientVersion:t})=>async r=>{let n=[["aws-sdk-js",t],["ua","2.1"],[`os/${q3()}`,G3()],["lang/js"],["md/nodejs",`${z3.node}`]],o=l0();o&&n.push(o),e&&n.push([`api/${e}`,t]),f0.AWS_EXECUTION_ENV&&n.push([`exec-env/${f0.AWS_EXECUTION_ENV}`]);let s=await r?.userAgentAppId?.();return s?[...n,[`app/${s}`]]:[...n]}});var K3,j3,Sn,u0=a(()=>{Bo();K3="AWS_SDK_UA_APP_ID",j3="sdk-ua-app-id",Sn={environmentVariableSelector:e=>e[K3],configFileSelector:e=>e[j3],default:jd}});var ri=a(()=>{m0();u0()});import{Buffer as V3}from"buffer";import{createHash as W3,createHmac as X3}from"crypto";function p0(e,t){return V3.isBuffer(e)?e:typeof e=="string"?_o(e,t):ArrayBuffer.isView(e)?mr(e.buffer,e.byteOffset,e.byteLength):mr(e)}var Rt,ni=a(()=>{Hn();ze();Rt=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(tt(p0(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?X3(this.algorithmIdentifier,p0(this.secret)):W3(this.algorithmIdentifier)}}});import{fstatSync as Y3,lstatSync as Q3}from"fs";var _n,h0=a(()=>{_n=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return Q3(e.path).size;if(typeof e.fd=="number")return Y3(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)}});var oi=a(()=>{h0()});var A0,It,vt,Xo,g0,si,Vo,Wo,Ar,$m,Hm,y0,E0,x0,R0,T0,Tt,S0,I0,_0,C0,b0,w0,J3,v0,k0=a(()=>{A0="required",It="fn",vt="argv",Xo="ref",g0="isSet",si="booleanEquals",Vo="error",Wo="endpoint",Ar="tree",$m="PartitionResult",Hm="getAttr",y0={[A0]:!1,type:"String"},E0={[A0]:!0,default:!1,type:"Boolean"},x0={[Xo]:"Endpoint"},R0={[It]:si,[vt]:[{[Xo]:"UseFIPS"},!0]},T0={[It]:si,[vt]:[{[Xo]:"UseDualStack"},!0]},Tt={},S0={[It]:Hm,[vt]:[{[Xo]:$m},"supportsFIPS"]},I0={[Xo]:$m},_0={[It]:si,[vt]:[!0,{[It]:Hm,[vt]:[I0,"supportsDualStack"]}]},C0=[R0],b0=[T0],w0=[{[Xo]:"Region"}],J3={version:"1.0",parameters:{Region:y0,UseDualStack:E0,UseFIPS:E0,Endpoint:y0},rules:[{conditions:[{[It]:g0,[vt]:[x0]}],rules:[{conditions:C0,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Vo},{conditions:b0,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Vo},{endpoint:{url:x0,properties:Tt,headers:Tt},type:Wo}],type:Ar},{conditions:[{[It]:g0,[vt]:w0}],rules:[{conditions:[{[It]:"aws.partition",[vt]:w0,assign:$m}],rules:[{conditions:[R0,T0],rules:[{conditions:[{[It]:si,[vt]:[!0,S0]},_0],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Tt,headers:Tt},type:Wo}],type:Ar},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Vo}],type:Ar},{conditions:C0,rules:[{conditions:[{[It]:si,[vt]:[S0,!0]}],rules:[{conditions:[{[It]:"stringEquals",[vt]:[{[It]:Hm,[vt]:[I0,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Tt,headers:Tt},type:Wo},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Tt,headers:Tt},type:Wo}],type:Ar},{error:"FIPS is enabled but this partition does not support FIPS",type:Vo}],type:Ar},{conditions:b0,rules:[{conditions:[_0],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Tt,headers:Tt},type:Wo}],type:Ar},{error:"DualStack is enabled but this partition does not support DualStack",type:Vo}],type:Ar},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Tt,headers:Tt},type:Wo}],type:Ar}],type:Ar},{error:"Invalid Configuration: Missing Region",type:Vo}]},v0=J3});var Z3,P0,O0=a(()=>{Do();Zt();k0();Z3=new Jt({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),P0=(e,t={})=>Z3.get(e,()=>Sr(v0,{endpointParams:e,logger:t.logger}));dt.aws=_r});var N0,D0=a(()=>{Ee();Ce();v();Zn();ur();ze();Mm();O0();N0=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Kt,base64Encoder:e?.base64Encoder??rt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??P0,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??o0,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new qe},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Wt}],logger:e?.logger??new at,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??st,utf8Decoder:e?.utf8Decoder??Pe,utf8Encoder:e?.utf8Encoder??gt})});var B0,qm,Gm,F0,M0,L0,U0=a(()=>{B0="AWS_EXECUTION_ENV",qm="AWS_REGION",Gm="AWS_DEFAULT_REGION",F0="AWS_EC2_METADATA_DISABLED",M0=["in-region","cross-region","mobile","standard","legacy"],L0="/latest/meta-data/placement/region"});var eF,tF,$0,H0=a(()=>{eF="AWS_DEFAULTS_MODE",tF="defaults_mode",$0={environmentVariableSelector:e=>e[eF],configFileSelector:e=>e[tF],default:"legacy"}});var Cn,rF,nF,q0=a(()=>{tr();Cr();ee();U0();H0();Cn=({region:e=M(er),defaultsMode:t=M($0)}={})=>Kn(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return rF(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${M0.join(", ")}, got ${r}`)}}),rF=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await nF();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},nF=async()=>{if(process.env[B0]&&(process.env[qm]||process.env[Gm]))return process.env[qm]??process.env[Gm];if(!process.env[F0])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>(ti(),ei)),r=await e();return(await t({...r,path:L0})).toString()}catch{}}});var ii=a(()=>{q0()});var G0,z0=a(()=>{a0();Ee();Gc();ri();tr();ni();br();Cr();qn();oi();wt();D0();v();ii();v();G0=e=>{Kr(process.version);let t=Cn(e),r=()=>t().then(zr),n=N0(e);return Fr(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??_n,credentialDefaultProvider:e?.credentialDefaultProvider??so,defaultUserAgentProvider:e?.defaultUserAgentProvider??xn({serviceId:n.serviceId,clientVersion:c0.version}),maxAttempts:e?.maxAttempts??M(dn),region:e?.region??M(er,nn),requestHandler:yt.create(e?.requestHandler??r),retryMode:e?.retryMode??M({...mn,default:async()=>(await r()).retryMode||rr}),sha256:e?.sha256??Rt.bind(null,"sha256"),streamCollector:e?.streamCollector??jt,useDualstackEndpoint:e?.useDualstackEndpoint??M(tn),useFipsEndpoint:e?.useFipsEndpoint??M(rn),userAgentAppId:e?.userAgentAppId??M(Sn)}}});var bn,wn,K0=a(()=>{bn=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=e.region;return typeof r=="string"?r:r()};return{setRegion(r){t=r},region(){return t}}},wn=e=>({region:e.region()})});var j0=a(()=>{});var zm=a(()=>{});var V0=a(()=>{zm()});var W0=a(()=>{V0();zm()});var X0=a(()=>{j0();W0()});var ai=a(()=>{K0();X0()});var Y0,Q0,J0=a(()=>{Y0=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},Q0=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var zc,Z0,eR=a(()=>{ai();K();v();J0();zc=e=>e,Z0=(e,t)=>{let r={...zc(bn(e)),...zc(jr(e)),...zc(Nr(e)),...zc(Y0(e))};return t.forEach(n=>n.configure(r)),{...e,...wn(r),...Vr(r),...Dr(r),...Q0(r)}}});var ci,jm=a(()=>{Ds();Bs();Fs();Bo();tr();Ce();Gs();ae();br();v();Mm();jo();z0();eR();ci=class extends Et{constructor(...[t]){let r=G0(t||{}),n=i0(r),o=Jr(n),s=fn(o),i=on(s),c=i,l=ln(c),d=s0(l),m=Z0(d,t?.extensions||[]);super(m),this.config=m,this.middlewareStack.use(en(this.config)),this.middlewareStack.use(un(this.config)),this.middlewareStack.use(sn(this.config)),this.middlewareStack.use(Xr(this.config)),this.middlewareStack.use(Yr(this.config)),this.middlewareStack.use(Qr(this.config)),this.middlewareStack.use(Mr(this.config,{httpAuthSchemeParametersProvider:n0,identityProviderConfigProvider:async u=>new Vt({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(Lr(this.config))}destroy(){super.destroy()}}});var ge,Kc=a(()=>{v();ge=class e extends Yt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var li,di,fi,mi,ui,pi,hi,gi,yi,Ei,xi,Si,_i,Ci,Vm,Wm,Xm,Ym,Qm,Jm,io=a(()=>{v();Kc();li=class e extends ge{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},di=class e extends ge{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},fi=class e extends ge{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},mi=class e extends ge{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ui=class e extends ge{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},pi=class e extends ge{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},hi=class e extends ge{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},gi=class e extends ge{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},yi=class e extends ge{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ei=class e extends ge{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},xi=class e extends ge{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Si=class e extends ge{constructor(t){super({name:"InvalidRequestRegionException",$fault:"client",...t}),this.name="InvalidRequestRegionException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description,this.endpoint=t.endpoint,this.region=t.region}},_i=class e extends ge{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ci=class e extends ge{constructor(t){super({name:"InvalidRedirectUriException",$fault:"client",...t}),this.name="InvalidRedirectUriException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Vm=e=>({...e,...e.clientSecret&&{clientSecret:G},...e.refreshToken&&{refreshToken:G},...e.codeVerifier&&{codeVerifier:G}}),Wm=e=>({...e,...e.accessToken&&{accessToken:G},...e.refreshToken&&{refreshToken:G},...e.idToken&&{idToken:G}}),Xm=e=>({...e,...e.refreshToken&&{refreshToken:G},...e.assertion&&{assertion:G},...e.subjectToken&&{subjectToken:G},...e.codeVerifier&&{codeVerifier:G}}),Ym=e=>({...e,...e.accessToken&&{accessToken:G},...e.refreshToken&&{refreshToken:G},...e.idToken&&{idToken:G}}),Qm=e=>({...e,...e.clientSecret&&{clientSecret:G}}),Jm=e=>({...e,...e.clientSecret&&{clientSecret:G}})});var tR,rR,nR,oR,sR,iR,aR,cR,jc,sF,iF,aF,cF,lF,dF,fF,mF,uF,pF,hF,gF,yF,EF,xF,ve,SF,bi=a(()=>{Ee();Ce();v();io();Kc();tR=async(e,t)=>{let r=nt(e,t),n={"content-type":"application/json"};r.bp("/token");let o;return o=JSON.stringify(Z(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:s=>ct(s)})),r.m("POST").h(n).b(o),r.build()},rR=async(e,t)=>{let r=nt(e,t),n={"content-type":"application/json"};r.bp("/token");let o=O({[SF]:[,"t"]}),s;return s=JSON.stringify(Z(e,{assertion:[],clientId:[],code:[],codeVerifier:[],grantType:[],redirectUri:[],refreshToken:[],requestedTokenType:[],scope:i=>ct(i),subjectToken:[],subjectTokenType:[]})),r.m("POST").h(n).q(o).b(s),r.build()},nR=async(e,t)=>{let r=nt(e,t),n={"content-type":"application/json"};r.bp("/client/register");let o;return o=JSON.stringify(Z(e,{clientName:[],clientType:[],entitledApplicationArn:[],grantTypes:s=>ct(s),issuerUrl:[],redirectUris:s=>ct(s),scopes:s=>ct(s)})),r.m("POST").h(n).b(o),r.build()},oR=async(e,t)=>{let r=nt(e,t),n={"content-type":"application/json"};r.bp("/device_authorization");let o;return o=JSON.stringify(Z(e,{clientId:[],clientSecret:[],startUrl:[]})),r.m("POST").h(n).b(o),r.build()},sR=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return jc(e,t);let r=O({$metadata:ve(e)}),n=ye(Lt(await Qt(e.body,t)),"body"),o=Z(n,{accessToken:C,expiresIn:Xn,idToken:C,refreshToken:C,tokenType:C});return Object.assign(r,o),r},iR=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return jc(e,t);let r=O({$metadata:ve(e)}),n=ye(Lt(await Qt(e.body,t)),"body"),o=Z(n,{accessToken:C,expiresIn:Xn,idToken:C,issuedTokenType:C,refreshToken:C,scope:ct,tokenType:C});return Object.assign(r,o),r},aR=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return jc(e,t);let r=O({$metadata:ve(e)}),n=ye(Lt(await Qt(e.body,t)),"body"),o=Z(n,{authorizationEndpoint:C,clientId:C,clientIdIssuedAt:Ao,clientSecret:C,clientSecretExpiresAt:Ao,tokenEndpoint:C});return Object.assign(r,o),r},cR=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return jc(e,t);let r=O({$metadata:ve(e)}),n=ye(Lt(await Qt(e.body,t)),"body"),o=Z(n,{deviceCode:C,expiresIn:Xn,interval:Xn,userCode:C,verificationUri:C,verificationUriComplete:C});return Object.assign(r,o),r},jc=async(e,t)=>{let r={...e,body:await xa(e.body,t)},n=Sa(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await iF(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await aF(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await cF(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await lF(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await dF(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await mF(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await pF(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await gF(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await yF(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await EF(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await xF(r,t);case"InvalidRequestRegionException":case"com.amazonaws.ssooidc#InvalidRequestRegionException":throw await hF(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await fF(r,t);case"InvalidRedirectUriException":case"com.amazonaws.ssooidc#InvalidRedirectUriException":throw await uF(r,t);default:let o=r.body;return sF({output:e,parsedBody:o,errorCode:n})}},sF=Gr(ge),iF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{error:C,error_description:C});Object.assign(r,o);let s=new li({$metadata:ve(e),...r});return $(s,e.body)},aF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{error:C,error_description:C});Object.assign(r,o);let s=new di({$metadata:ve(e),...r});return $(s,e.body)},cF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{error:C,error_description:C});Object.assign(r,o);let s=new fi({$metadata:ve(e),...r});return $(s,e.body)},lF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{error:C,error_description:C});Object.assign(r,o);let s=new mi({$metadata:ve(e),...r});return $(s,e.body)},dF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{error:C,error_description:C});Object.assign(r,o);let s=new ui({$metadata:ve(e),...r});return $(s,e.body)},fF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{error:C,error_description:C});Object.assign(r,o);let s=new _i({$metadata:ve(e),...r});return $(s,e.body)},mF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{error:C,error_description:C});Object.assign(r,o);let s=new pi({$metadata:ve(e),...r});return $(s,e.body)},uF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{error:C,error_description:C});Object.assign(r,o);let s=new Ci({$metadata:ve(e),...r});return $(s,e.body)},pF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{error:C,error_description:C});Object.assign(r,o);let s=new hi({$metadata:ve(e),...r});return $(s,e.body)},hF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{endpoint:C,error:C,error_description:C,region:C});Object.assign(r,o);let s=new Si({$metadata:ve(e),...r});return $(s,e.body)},gF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{error:C,error_description:C});Object.assign(r,o);let s=new gi({$metadata:ve(e),...r});return $(s,e.body)},yF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{error:C,error_description:C});Object.assign(r,o);let s=new yi({$metadata:ve(e),...r});return $(s,e.body)},EF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{error:C,error_description:C});Object.assign(r,o);let s=new Ei({$metadata:ve(e),...r});return $(s,e.body)},xF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{error:C,error_description:C});Object.assign(r,o);let s=new xi({$metadata:ve(e),...r});return $(s,e.body)},ve=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),SF="aws_iam"});var wi,Zm=a(()=>{ae();me();v();jo();io();bi();wi=class extends U.classBuilder().ep(En).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(Vm,Wm).ser(tR).de(sR).build(){}});var Ai,eu=a(()=>{ae();me();v();jo();io();bi();Ai=class extends U.classBuilder().ep(En).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateTokenWithIAM",{}).n("SSOOIDCClient","CreateTokenWithIAMCommand").f(Xm,Ym).ser(rR).de(iR).build(){}});var Ri,tu=a(()=>{ae();me();v();jo();io();bi();Ri=class extends U.classBuilder().ep(En).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","RegisterClient",{}).n("SSOOIDCClient","RegisterClientCommand").f(void 0,Qm).ser(nR).de(aR).build(){}});var Ti,ru=a(()=>{ae();me();v();jo();io();bi();Ti=class extends U.classBuilder().ep(En).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","StartDeviceAuthorization",{}).n("SSOOIDCClient","StartDeviceAuthorizationCommand").f(Jm,void 0).ser(oR).de(cR).build(){}});var _F,Vc,lR=a(()=>{v();Zm();eu();tu();ru();jm();_F={CreateTokenCommand:wi,CreateTokenWithIAMCommand:Ai,RegisterClientCommand:Ri,StartDeviceAuthorizationCommand:Ti},Vc=class extends ci{};wo(_F,Vc)});var dR=a(()=>{Zm();eu();tu();ru()});var fR=a(()=>{io()});var nu={};ht(nu,{$Command:()=>U,AccessDeniedException:()=>li,AuthorizationPendingException:()=>di,CreateTokenCommand:()=>wi,CreateTokenRequestFilterSensitiveLog:()=>Vm,CreateTokenResponseFilterSensitiveLog:()=>Wm,CreateTokenWithIAMCommand:()=>Ai,CreateTokenWithIAMRequestFilterSensitiveLog:()=>Xm,CreateTokenWithIAMResponseFilterSensitiveLog:()=>Ym,ExpiredTokenException:()=>fi,InternalServerException:()=>mi,InvalidClientException:()=>ui,InvalidClientMetadataException:()=>_i,InvalidGrantException:()=>pi,InvalidRedirectUriException:()=>Ci,InvalidRequestException:()=>hi,InvalidRequestRegionException:()=>Si,InvalidScopeException:()=>gi,RegisterClientCommand:()=>Ri,RegisterClientResponseFilterSensitiveLog:()=>Qm,SSOOIDC:()=>Vc,SSOOIDCClient:()=>ci,SSOOIDCServiceException:()=>ge,SlowDownException:()=>yi,StartDeviceAuthorizationCommand:()=>Ti,StartDeviceAuthorizationRequestFilterSensitiveLog:()=>Jm,UnauthorizedClientException:()=>Ei,UnsupportedGrantTypeException:()=>xi,__Client:()=>Et});var ou=a(()=>{jm();lR();dR();fR();Kc()});var su,mR,uR=a(()=>{su={},mR=async e=>{let{SSOOIDCClient:t}=await Promise.resolve().then(()=>(ou(),nu));if(su[e])return su[e];let r=new t({region:e});return su[e]=r,r}});var pR,hR=a(()=>{uR();pR=async(e,t)=>{let{CreateTokenCommand:r}=await Promise.resolve().then(()=>(ou(),nu));return(await mR(t)).send(new r({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))}});var iu,gR=a(()=>{ee();qc();iu=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new ot(`Token is expired. ${Ko}`,!1)}});var An,yR=a(()=>{ee();qc();An=(e,t,r=!1)=>{if(typeof t>"u")throw new ot(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Ko}`,!1)}});import{promises as CF}from"fs";var bF,ER,xR=a(()=>{$t();({writeFile:bF}=CF),ER=(e,t)=>{let r=qa(e),n=JSON.stringify(t,null,2);return bF(r,n)}});var SR,_R,CR=a(()=>{ee();$t();qc();hR();gR();yR();xR();SR=new Date(0),_R=(e={})=>async()=>{e.logger?.debug("@aws-sdk/token-providers - fromSso");let t=await cn(e),r=Ct(e),n=t[r];if(n){if(!n.sso_session)throw new ot(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new ot(`Profile '${r}' could not be found in shared credentials file.`,!1);let o=n.sso_session,i=(await ja(e))[o];if(!i)throw new ot(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let g of["sso_start_url","sso_region"])if(!i[g])throw new ot(`Sso session '${o}' is missing required property '${g}'.`,!1);let c=i.sso_start_url,l=i.sso_region,d;try{d=await Ga(o)}catch{throw new ot(`The SSO session token associated with profile=${r} was not found or is invalid. ${Ko}`,!1)}An("accessToken",d.accessToken),An("expiresAt",d.expiresAt);let{accessToken:m,expiresAt:u}=d,h={token:m,expiration:new Date(u)};if(h.expiration.getTime()-Date.now()>3e5)return h;if(Date.now()-SR.getTime()<30*1e3)return iu(h),h;An("clientId",d.clientId,!0),An("clientSecret",d.clientSecret,!0),An("refreshToken",d.refreshToken,!0);try{SR.setTime(Date.now());let g=await pR(d,l);An("accessToken",g.accessToken),An("expiresIn",g.expiresIn);let x=new Date(Date.now()+g.expiresIn*1e3);try{await ER(o,{...d,accessToken:g.accessToken,expiresAt:x.toISOString(),refreshToken:g.refreshToken})}catch{}return{token:g.accessToken,expiration:x}}catch{return iu(h),h}}});var bR=a(()=>{ee()});var wR=a(()=>{ee()});var AR=a(()=>{CR();bR();wR()});function AF(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Wc(e){return{schemeId:"smithy.api#noAuth"}}var RR,TR,IR,au=a(()=>{Ee();Ge();RR=async(e,t,r)=>({operation:ke(t).operation,region:await de(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});TR=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(Wc(e));break}case"ListAccountRoles":{t.push(Wc(e));break}case"ListAccounts":{t.push(Wc(e));break}case"Logout":{t.push(Wc(e));break}default:t.push(AF(e))}return t},IR=e=>({...Hr(e)})});var vR,Rn,Yo=a(()=>{vR=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),Rn={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var PR,kR=a(()=>{PR={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.686.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.686.0","@aws-sdk/middleware-host-header":"3.686.0","@aws-sdk/middleware-logger":"3.686.0","@aws-sdk/middleware-recursion-detection":"3.686.0","@aws-sdk/middleware-user-agent":"3.686.0","@aws-sdk/region-config-resolver":"3.686.0","@aws-sdk/types":"3.686.0","@aws-sdk/util-endpoints":"3.686.0","@aws-sdk/util-user-agent-browser":"3.686.0","@aws-sdk/util-user-agent-node":"3.686.0","@smithy/config-resolver":"^3.0.10","@smithy/core":"^2.5.1","@smithy/fetch-http-handler":"^4.0.0","@smithy/hash-node":"^3.0.8","@smithy/invalid-dependency":"^3.0.8","@smithy/middleware-content-length":"^3.0.10","@smithy/middleware-endpoint":"^3.2.1","@smithy/middleware-retry":"^3.0.25","@smithy/middleware-serde":"^3.0.8","@smithy/middleware-stack":"^3.0.8","@smithy/node-config-provider":"^3.1.9","@smithy/node-http-handler":"^3.2.5","@smithy/protocol-http":"^4.1.5","@smithy/smithy-client":"^3.4.2","@smithy/types":"^3.6.0","@smithy/url-parser":"^3.0.8","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.25","@smithy/util-defaults-mode-node":"^3.0.25","@smithy/util-endpoints":"^2.1.4","@smithy/util-middleware":"^3.0.8","@smithy/util-retry":"^3.0.8","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var HR,Pt,Ot,Zo,OR,Ii,Qo,Jo,Rr,cu,lu,NR,DR,BR,qR,GR,kt,FR,zR,MR,LR,UR,$R,TF,KR,jR=a(()=>{HR="required",Pt="fn",Ot="argv",Zo="ref",OR="isSet",Ii="booleanEquals",Qo="error",Jo="endpoint",Rr="tree",cu="PartitionResult",lu="getAttr",NR={[HR]:!1,type:"String"},DR={[HR]:!0,default:!1,type:"Boolean"},BR={[Zo]:"Endpoint"},qR={[Pt]:Ii,[Ot]:[{[Zo]:"UseFIPS"},!0]},GR={[Pt]:Ii,[Ot]:[{[Zo]:"UseDualStack"},!0]},kt={},FR={[Pt]:lu,[Ot]:[{[Zo]:cu},"supportsFIPS"]},zR={[Zo]:cu},MR={[Pt]:Ii,[Ot]:[!0,{[Pt]:lu,[Ot]:[zR,"supportsDualStack"]}]},LR=[qR],UR=[GR],$R=[{[Zo]:"Region"}],TF={version:"1.0",parameters:{Region:NR,UseDualStack:DR,UseFIPS:DR,Endpoint:NR},rules:[{conditions:[{[Pt]:OR,[Ot]:[BR]}],rules:[{conditions:LR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Qo},{conditions:UR,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Qo},{endpoint:{url:BR,properties:kt,headers:kt},type:Jo}],type:Rr},{conditions:[{[Pt]:OR,[Ot]:$R}],rules:[{conditions:[{[Pt]:"aws.partition",[Ot]:$R,assign:cu}],rules:[{conditions:[qR,GR],rules:[{conditions:[{[Pt]:Ii,[Ot]:[!0,FR]},MR],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:kt,headers:kt},type:Jo}],type:Rr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Qo}],type:Rr},{conditions:LR,rules:[{conditions:[{[Pt]:Ii,[Ot]:[FR,!0]}],rules:[{conditions:[{[Pt]:"stringEquals",[Ot]:[{[Pt]:lu,[Ot]:[zR,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:kt,headers:kt},type:Jo},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:kt,headers:kt},type:Jo}],type:Rr},{error:"FIPS is enabled but this partition does not support FIPS",type:Qo}],type:Rr},{conditions:UR,rules:[{conditions:[MR],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:kt,headers:kt},type:Jo}],type:Rr},{error:"DualStack is enabled but this partition does not support DualStack",type:Qo}],type:Rr},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:kt,headers:kt},type:Jo}],type:Rr}],type:Rr},{error:"Invalid Configuration: Missing Region",type:Qo}]},KR=TF});var IF,VR,WR=a(()=>{Do();Zt();jR();IF=new Jt({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),VR=(e,t={})=>IF.get(e,()=>Sr(KR,{endpointParams:e,logger:t.logger}));dt.aws=_r});var XR,YR=a(()=>{Ee();Ce();v();Zn();ur();ze();au();WR();XR=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Kt,base64Encoder:e?.base64Encoder??rt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??VR,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??TR,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new qe},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Wt}],logger:e?.logger??new at,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??st,utf8Decoder:e?.utf8Decoder??Pe,utf8Encoder:e?.utf8Encoder??gt})});var QR,JR=a(()=>{kR();Ee();ri();tr();ni();br();Cr();qn();oi();wt();YR();v();ii();v();QR=e=>{Kr(process.version);let t=Cn(e),r=()=>t().then(zr),n=XR(e);return Fr(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??_n,defaultUserAgentProvider:e?.defaultUserAgentProvider??xn({serviceId:n.serviceId,clientVersion:PR.version}),maxAttempts:e?.maxAttempts??M(dn),region:e?.region??M(er,nn),requestHandler:yt.create(e?.requestHandler??r),retryMode:e?.retryMode??M({...mn,default:async()=>(await r()).retryMode||rr}),sha256:e?.sha256??Rt.bind(null,"sha256"),streamCollector:e?.streamCollector??jt,useDualstackEndpoint:e?.useDualstackEndpoint??M(tn),useFipsEndpoint:e?.useFipsEndpoint??M(rn),userAgentAppId:e?.userAgentAppId??M(Sn)}}});var ZR,eT,tT=a(()=>{ZR=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},eT=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Xc,rT,nT=a(()=>{ai();K();v();tT();Xc=e=>e,rT=(e,t)=>{let r={...Xc(bn(e)),...Xc(jr(e)),...Xc(Nr(e)),...Xc(ZR(e))};return t.forEach(n=>n.configure(r)),{...e,...wn(r),...Vr(r),...Dr(r),...eT(r)}}});var ir,vi=a(()=>{Ds();Bs();Fs();Bo();tr();Ce();Gs();ae();br();v();au();Yo();JR();nT();ir=class extends Et{constructor(...[t]){let r=QR(t||{}),n=vR(r),o=Jr(n),s=fn(o),i=on(s),c=i,l=ln(c),d=IR(l),m=rT(d,t?.extensions||[]);super(m),this.config=m,this.middlewareStack.use(en(this.config)),this.middlewareStack.use(un(this.config)),this.middlewareStack.use(sn(this.config)),this.middlewareStack.use(Xr(this.config)),this.middlewareStack.use(Yr(this.config)),this.middlewareStack.use(Qr(this.config)),this.middlewareStack.use(Mr(this.config,{httpAuthSchemeParametersProvider:RR,identityProviderConfigProvider:async u=>new Vt({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(Lr(this.config))}destroy(){super.destroy()}}});var Tr,du=a(()=>{v();Tr=class e extends Yt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Yc,Qc,Jc,Zc,oT,vF,sT,iT,aT,cT,ao=a(()=>{v();du();Yc=class e extends Tr{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Qc=class e extends Tr{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Jc=class e extends Tr{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Zc=class e extends Tr{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},oT=e=>({...e,...e.accessToken&&{accessToken:G}}),vF=e=>({...e,...e.secretAccessKey&&{secretAccessKey:G},...e.sessionToken&&{sessionToken:G}}),sT=e=>({...e,...e.roleCredentials&&{roleCredentials:vF(e.roleCredentials)}}),iT=e=>({...e,...e.accessToken&&{accessToken:G}}),aT=e=>({...e,...e.accessToken&&{accessToken:G}}),cT=e=>({...e,...e.accessToken&&{accessToken:G}})});var lT,dT,fT,mT,uT,pT,hT,gT,el,kF,PF,OF,NF,DF,Tn,yT,tl,ET,xT,ST,_T,CT,BF,FF,rl,ki=a(()=>{Ee();Ce();v();ao();du();lT=async(e,t)=>{let r=nt(e,t),n=O({},Ut,{[rl]:e[tl]});r.bp("/federation/credentials");let o=O({[FF]:[,ye(e[BF],"roleName")],[ET]:[,ye(e[yT],"accountId")]}),s;return r.m("GET").h(n).q(o).b(s),r.build()},dT=async(e,t)=>{let r=nt(e,t),n=O({},Ut,{[rl]:e[tl]});r.bp("/assignment/roles");let o=O({[CT]:[,e[_T]],[ST]:[()=>e.maxResults!==void 0,()=>e[xT].toString()],[ET]:[,ye(e[yT],"accountId")]}),s;return r.m("GET").h(n).q(o).b(s),r.build()},fT=async(e,t)=>{let r=nt(e,t),n=O({},Ut,{[rl]:e[tl]});r.bp("/assignment/accounts");let o=O({[CT]:[,e[_T]],[ST]:[()=>e.maxResults!==void 0,()=>e[xT].toString()]}),s;return r.m("GET").h(n).q(o).b(s),r.build()},mT=async(e,t)=>{let r=nt(e,t),n=O({},Ut,{[rl]:e[tl]});r.bp("/logout");let o;return r.m("POST").h(n).b(o),r.build()},uT=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return el(e,t);let r=O({$metadata:Tn(e)}),n=ye(Lt(await Qt(e.body,t)),"body"),o=Z(n,{roleCredentials:ct});return Object.assign(r,o),r},pT=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return el(e,t);let r=O({$metadata:Tn(e)}),n=ye(Lt(await Qt(e.body,t)),"body"),o=Z(n,{nextToken:C,roleList:ct});return Object.assign(r,o),r},hT=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return el(e,t);let r=O({$metadata:Tn(e)}),n=ye(Lt(await Qt(e.body,t)),"body"),o=Z(n,{accountList:ct,nextToken:C});return Object.assign(r,o),r},gT=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return el(e,t);let r=O({$metadata:Tn(e)});return await $r(e.body,t),r},el=async(e,t)=>{let r={...e,body:await xa(e.body,t)},n=Sa(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await PF(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await OF(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await NF(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await DF(r,t);default:let o=r.body;return kF({output:e,parsedBody:o,errorCode:n})}},kF=Gr(Tr),PF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{message:C});Object.assign(r,o);let s=new Yc({$metadata:Tn(e),...r});return $(s,e.body)},OF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{message:C});Object.assign(r,o);let s=new Qc({$metadata:Tn(e),...r});return $(s,e.body)},NF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{message:C});Object.assign(r,o);let s=new Jc({$metadata:Tn(e),...r});return $(s,e.body)},DF=async(e,t)=>{let r=O({}),n=e.body,o=Z(n,{message:C});Object.assign(r,o);let s=new Zc({$metadata:Tn(e),...r});return $(s,e.body)},Tn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),yT="accountId",tl="accessToken",ET="account_id",xT="maxResults",ST="max_result",_T="nextToken",CT="next_token",BF="roleName",FF="role_name",rl="x-amz-sso_bearer_token"});var es,fu=a(()=>{ae();me();v();Yo();ao();ki();es=class extends U.classBuilder().ep(Rn).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(oT,sT).ser(lT).de(uT).build(){}});var ts,nl=a(()=>{ae();me();v();Yo();ao();ki();ts=class extends U.classBuilder().ep(Rn).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(iT,void 0).ser(dT).de(pT).build(){}});var rs,ol=a(()=>{ae();me();v();Yo();ao();ki();rs=class extends U.classBuilder().ep(Rn).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(aT,void 0).ser(fT).de(hT).build(){}});var sl,mu=a(()=>{ae();me();v();Yo();ao();ki();sl=class extends U.classBuilder().ep(Rn).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(cT,void 0).ser(mT).de(gT).build(){}});var MF,uu,bT=a(()=>{v();fu();nl();ol();mu();vi();MF={GetRoleCredentialsCommand:es,ListAccountRolesCommand:ts,ListAccountsCommand:rs,LogoutCommand:sl},uu=class extends ir{};wo(MF,uu)});var wT=a(()=>{fu();nl();ol();mu()});var AT=a(()=>{});var Ose,RT=a(()=>{Ce();nl();vi();Ose=Es(ir,ts,"nextToken","nextToken","maxResults")});var Mse,TT=a(()=>{Ce();ol();vi();Mse=Es(ir,rs,"nextToken","nextToken","maxResults")});var IT=a(()=>{AT();RT();TT()});var vT=a(()=>{ao()});var kT=a(()=>{vi();bT();wT();IT();vT()});var PT={};ht(PT,{GetRoleCredentialsCommand:()=>es,SSOClient:()=>ir});var OT=a(()=>{kT()});var Pi,pu,NT=a(()=>{He();AR();ee();$t();Pi=!1,pu=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,clientConfig:i,profile:c,logger:l})=>{let d,m="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let $n=await _R({profile:c})();d={accessToken:$n.token,expiresAt:new Date($n.expiration).toISOString()}}catch($n){throw new k($n.message,{tryNextLink:Pi,logger:l})}else try{d=await Ga(e)}catch{throw new k(`The SSO session associated with this profile is invalid. ${m}`,{tryNextLink:Pi,logger:l})}if(new Date(d.expiresAt).getTime()-Date.now()<=0)throw new k(`The SSO session associated with this profile has expired. ${m}`,{tryNextLink:Pi,logger:l});let{accessToken:u}=d,{SSOClient:h,GetRoleCredentialsCommand:g}=await Promise.resolve().then(()=>(OT(),PT)),x=s||new h(Object.assign({},i??{},{region:i?.region??n})),I;try{I=await x.send(new g({accountId:r,roleName:o,accessToken:u}))}catch($n){throw new k($n,{tryNextLink:Pi,logger:l})}let{roleCredentials:{accessKeyId:b,secretAccessKey:P,sessionToken:X,expiration:L,credentialScope:te,accountId:Or}={}}=I;if(!b||!P||!X||!L)throw new k("SSO returns an invalid temporary credential.",{tryNextLink:Pi,logger:l});let Un={accessKeyId:b,secretAccessKey:P,sessionToken:X,expiration:new Date(L),...te&&{credentialScope:te},...Or&&{accountId:Or}};return t?J(Un,"CREDENTIALS_SSO","s"):J(Un,"CREDENTIALS_SSO_LEGACY","u"),Un}});var hu,gu=a(()=>{ee();hu=(e,t)=>{let{sso_start_url:r,sso_account_id:n,sso_region:o,sso_role_name:s}=e;if(!r||!n||!o||!s)throw new k(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e}});var LF,DT=a(()=>{ee();$t();Bm();NT();gu();LF=(e={})=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoSession:s}=e,{ssoClient:i}=e,c=Ct(e);if(!t&&!r&&!n&&!o&&!s){let d=(await cn(e))[c];if(!d)throw new k(`Profile ${c} was not found.`,{logger:e.logger});if(!Dm(d))throw new k(`Profile ${c} is not configured with SSO credentials.`,{logger:e.logger});if(d?.sso_session){let b=(await ja(e))[d.sso_session],P=` configurations in profile ${c} and sso-session ${d.sso_session}`;if(n&&n!==b.sso_region)throw new k("Conflicting SSO region"+P,{tryNextLink:!1,logger:e.logger});if(t&&t!==b.sso_start_url)throw new k("Conflicting SSO start_url"+P,{tryNextLink:!1,logger:e.logger});d.sso_region=b.sso_region,d.sso_start_url=b.sso_start_url}let{sso_start_url:m,sso_account_id:u,sso_region:h,sso_role_name:g,sso_session:x}=hu(d,e.logger);return pu({ssoStartUrl:m,ssoSession:x,ssoAccountId:u,ssoRegion:h,ssoRoleName:g,ssoClient:i,clientConfig:e.clientConfig,profile:c})}else{if(!t||!r||!n||!o)throw new k('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return pu({ssoStartUrl:t,ssoSession:s,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:i,clientConfig:e.clientConfig,profile:c})}}});var BT=a(()=>{});var yu={};ht(yu,{fromSSO:()=>LF,isSsoProfile:()=>Dm,validateSsoProfile:()=>hu});var Eu=a(()=>{DT();Bm();BT();gu()});var FT,xu,MT=a(()=>{He();ee();FT=(e,t,r)=>{let n={EcsContainer:async o=>{let{fromHttp:s}=await Promise.resolve().then(()=>(Nm(),Om)),{fromContainerMetadata:i}=await Promise.resolve().then(()=>(ti(),ei));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>gr(s(o??{}),i(o))().then(xu)},Ec2InstanceMetadata:async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:s}=await Promise.resolve().then(()=>(ti(),ei));return async()=>s(o)().then(xu)},Environment:async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:s}=await Promise.resolve().then(()=>(bm(),PA));return async()=>s(o)().then(xu)}};if(e in n)return n[e];throw new k(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},xu=e=>J(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p")});function UF(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function LT(e){return{schemeId:"smithy.api#noAuth"}}var UT,$T,$F,HT,Su=a(()=>{Ee();Ge();Oi();UT=async(e,t,r)=>({operation:ke(t).operation,region:await de(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});$T=e=>{let t=[];switch(e.operation){case"AssumeRoleWithSAML":{t.push(LT(e));break}case"AssumeRoleWithWebIdentity":{t.push(LT(e));break}default:t.push(UF(e))}return t},$F=e=>({...e,stsClientCtor:ar}),HT=e=>{let t=$F(e);return{...Hr(t)}}});var qT,Me,cr=a(()=>{qT=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Me={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var zT,GT=a(()=>{zT={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.686.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sts","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"rimraf ./dist-types tsconfig.types.tsbuildinfo && tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"vitest run","test:watch":"vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.686.0","@aws-sdk/core":"3.686.0","@aws-sdk/credential-provider-node":"3.686.0","@aws-sdk/middleware-host-header":"3.686.0","@aws-sdk/middleware-logger":"3.686.0","@aws-sdk/middleware-recursion-detection":"3.686.0","@aws-sdk/middleware-user-agent":"3.686.0","@aws-sdk/region-config-resolver":"3.686.0","@aws-sdk/types":"3.686.0","@aws-sdk/util-endpoints":"3.686.0","@aws-sdk/util-user-agent-browser":"3.686.0","@aws-sdk/util-user-agent-node":"3.686.0","@smithy/config-resolver":"^3.0.10","@smithy/core":"^2.5.1","@smithy/fetch-http-handler":"^4.0.0","@smithy/hash-node":"^3.0.8","@smithy/invalid-dependency":"^3.0.8","@smithy/middleware-content-length":"^3.0.10","@smithy/middleware-endpoint":"^3.2.1","@smithy/middleware-retry":"^3.0.25","@smithy/middleware-serde":"^3.0.8","@smithy/middleware-stack":"^3.0.8","@smithy/node-config-provider":"^3.1.9","@smithy/node-http-handler":"^3.2.5","@smithy/protocol-http":"^4.1.5","@smithy/smithy-client":"^3.4.2","@smithy/types":"^3.6.0","@smithy/url-parser":"^3.0.8","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.25","@smithy/util-defaults-mode-node":"^3.0.25","@smithy/util-endpoints":"^2.1.4","@smithy/util-middleware":"^3.0.8","@smithy/util-retry":"^3.0.8","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}}});var tI,H,Y,Q,vn,In,Ne,rI,nI,oI,ce,KT,lr,ns,Cu,jT,_u,sI,VT,De,WT,iI,aI,Le,ut,XT,cI,lI,YT,dI,QT,JT,ZT,eI,qF,fI,mI=a(()=>{tI="required",H="type",Y="fn",Q="argv",vn="ref",In="booleanEquals",Ne="stringEquals",rI="sigv4",nI="sts",oI="us-east-1",ce="endpoint",KT="https://sts.{Region}.{PartitionResult#dnsSuffix}",lr="tree",ns="error",Cu="getAttr",jT={[tI]:!1,[H]:"String"},_u={[tI]:!0,default:!1,[H]:"Boolean"},sI={[vn]:"Endpoint"},VT={[Y]:"isSet",[Q]:[{[vn]:"Region"}]},De={[vn]:"Region"},WT={[Y]:"aws.partition",[Q]:[De],assign:"PartitionResult"},iI={[vn]:"UseFIPS"},aI={[vn]:"UseDualStack"},Le={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:rI,signingName:nI,signingRegion:oI}]},headers:{}},ut={},XT={conditions:[{[Y]:Ne,[Q]:[De,"aws-global"]}],[ce]:Le,[H]:ce},cI={[Y]:In,[Q]:[iI,!0]},lI={[Y]:In,[Q]:[aI,!0]},YT={[Y]:Cu,[Q]:[{[vn]:"PartitionResult"},"supportsFIPS"]},dI={[vn]:"PartitionResult"},QT={[Y]:In,[Q]:[!0,{[Y]:Cu,[Q]:[dI,"supportsDualStack"]}]},JT=[{[Y]:"isSet",[Q]:[sI]}],ZT=[cI],eI=[lI],qF={version:"1.0",parameters:{Region:jT,UseDualStack:_u,UseFIPS:_u,Endpoint:jT,UseGlobalEndpoint:_u},rules:[{conditions:[{[Y]:In,[Q]:[{[vn]:"UseGlobalEndpoint"},!0]},{[Y]:"not",[Q]:JT},VT,WT,{[Y]:In,[Q]:[iI,!1]},{[Y]:In,[Q]:[aI,!1]}],rules:[{conditions:[{[Y]:Ne,[Q]:[De,"ap-northeast-1"]}],endpoint:Le,[H]:ce},{conditions:[{[Y]:Ne,[Q]:[De,"ap-south-1"]}],endpoint:Le,[H]:ce},{conditions:[{[Y]:Ne,[Q]:[De,"ap-southeast-1"]}],endpoint:Le,[H]:ce},{conditions:[{[Y]:Ne,[Q]:[De,"ap-southeast-2"]}],endpoint:Le,[H]:ce},XT,{conditions:[{[Y]:Ne,[Q]:[De,"ca-central-1"]}],endpoint:Le,[H]:ce},{conditions:[{[Y]:Ne,[Q]:[De,"eu-central-1"]}],endpoint:Le,[H]:ce},{conditions:[{[Y]:Ne,[Q]:[De,"eu-north-1"]}],endpoint:Le,[H]:ce},{conditions:[{[Y]:Ne,[Q]:[De,"eu-west-1"]}],endpoint:Le,[H]:ce},{conditions:[{[Y]:Ne,[Q]:[De,"eu-west-2"]}],endpoint:Le,[H]:ce},{conditions:[{[Y]:Ne,[Q]:[De,"eu-west-3"]}],endpoint:Le,[H]:ce},{conditions:[{[Y]:Ne,[Q]:[De,"sa-east-1"]}],endpoint:Le,[H]:ce},{conditions:[{[Y]:Ne,[Q]:[De,oI]}],endpoint:Le,[H]:ce},{conditions:[{[Y]:Ne,[Q]:[De,"us-east-2"]}],endpoint:Le,[H]:ce},{conditions:[{[Y]:Ne,[Q]:[De,"us-west-1"]}],endpoint:Le,[H]:ce},{conditions:[{[Y]:Ne,[Q]:[De,"us-west-2"]}],endpoint:Le,[H]:ce},{endpoint:{url:KT,properties:{authSchemes:[{name:rI,signingName:nI,signingRegion:"{Region}"}]},headers:ut},[H]:ce}],[H]:lr},{conditions:JT,rules:[{conditions:ZT,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[H]:ns},{conditions:eI,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[H]:ns},{endpoint:{url:sI,properties:ut,headers:ut},[H]:ce}],[H]:lr},{conditions:[VT],rules:[{conditions:[WT],rules:[{conditions:[cI,lI],rules:[{conditions:[{[Y]:In,[Q]:[!0,YT]},QT],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ut,headers:ut},[H]:ce}],[H]:lr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[H]:ns}],[H]:lr},{conditions:ZT,rules:[{conditions:[{[Y]:In,[Q]:[YT,!0]}],rules:[{conditions:[{[Y]:Ne,[Q]:[{[Y]:Cu,[Q]:[dI,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:ut,headers:ut},[H]:ce},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ut,headers:ut},[H]:ce}],[H]:lr},{error:"FIPS is enabled but this partition does not support FIPS",[H]:ns}],[H]:lr},{conditions:eI,rules:[{conditions:[QT],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ut,headers:ut},[H]:ce}],[H]:lr},{error:"DualStack is enabled but this partition does not support DualStack",[H]:ns}],[H]:lr},XT,{endpoint:{url:KT,properties:ut,headers:ut},[H]:ce}],[H]:lr}],[H]:lr},{error:"Invalid Configuration: Missing Region",[H]:ns}]},fI=qF});var GF,uI,pI=a(()=>{Do();Zt();mI();GF=new Jt({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),uI=(e,t={})=>GF.get(e,()=>Sr(fI,{endpointParams:e,logger:t.logger}));dt.aws=_r});var hI,gI=a(()=>{Ee();Ce();v();Zn();ur();ze();Su();pI();hI=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Kt,base64Encoder:e?.base64Encoder??rt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??uI,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??$T,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new qe},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Wt}],logger:e?.logger??new at,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??st,utf8Decoder:e?.utf8Decoder??Pe,utf8Encoder:e?.utf8Encoder??gt})});var yI,EI=a(()=>{GT();Ee();Gc();ri();tr();Ce();ni();br();Cr();qn();oi();wt();gI();v();ii();v();yI=e=>{Kr(process.version);let t=Cn(e),r=()=>t().then(zr),n=hI(e);return Fr(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??_n,credentialDefaultProvider:e?.credentialDefaultProvider??so,defaultUserAgentProvider:e?.defaultUserAgentProvider??xn({serviceId:n.serviceId,clientVersion:zT.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async s=>await so(s?.__config||{})()),signer:new qe},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Wt}],maxAttempts:e?.maxAttempts??M(dn),region:e?.region??M(er,nn),requestHandler:yt.create(e?.requestHandler??r),retryMode:e?.retryMode??M({...mn,default:async()=>(await r()).retryMode||rr}),sha256:e?.sha256??Rt.bind(null,"sha256"),streamCollector:e?.streamCollector??jt,useDualstackEndpoint:e?.useDualstackEndpoint??M(tn),useFipsEndpoint:e?.useFipsEndpoint??M(rn),userAgentAppId:e?.userAgentAppId??M(Sn)}}});var xI,SI,_I=a(()=>{xI=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},SI=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var il,CI,bI=a(()=>{ai();K();v();_I();il=e=>e,CI=(e,t)=>{let r={...il(bn(e)),...il(jr(e)),...il(Nr(e)),...il(xI(e))};return t.forEach(n=>n.configure(r)),{...e,...wn(r),...Vr(r),...Dr(r),...SI(r)}}});var ar,Oi=a(()=>{Ds();Bs();Fs();Bo();tr();Ce();Gs();ae();br();v();Su();cr();EI();bI();ar=class extends Et{constructor(...[t]){let r=yI(t||{}),n=qT(r),o=Jr(n),s=fn(o),i=on(s),c=i,l=ln(c),d=HT(l),m=CI(d,t?.extensions||[]);super(m),this.config=m,this.middlewareStack.use(en(this.config)),this.middlewareStack.use(un(this.config)),this.middlewareStack.use(sn(this.config)),this.middlewareStack.use(Xr(this.config)),this.middlewareStack.use(Yr(this.config)),this.middlewareStack.use(Qr(this.config)),this.middlewareStack.use(Mr(this.config,{httpAuthSchemeParametersProvider:UT,identityProviderConfigProvider:async u=>new Vt({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(Lr(this.config))}destroy(){super.destroy()}}});var Qe,al=a(()=>{v();Qe=class e extends Yt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Ni,Di,Bi,Fi,Mi,Li,Ui,$i,os,bu,wu,Au,Ru,Tu,Iu,vu,kn=a(()=>{v();al();Ni=class e extends Qe{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Di=class e extends Qe{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Bi=class e extends Qe{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Fi=class e extends Qe{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Mi=class e extends Qe{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Li=class e extends Qe{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ui=class e extends Qe{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},$i=class e extends Qe{constructor(t){super({name:"InvalidAuthorizationMessageException",$fault:"client",...t}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},os=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:G}}),bu=e=>({...e,...e.Credentials&&{Credentials:os(e.Credentials)}}),wu=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:G}}),Au=e=>({...e,...e.Credentials&&{Credentials:os(e.Credentials)}}),Ru=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:G}}),Tu=e=>({...e,...e.Credentials&&{Credentials:os(e.Credentials)}}),Iu=e=>({...e,...e.Credentials&&{Credentials:os(e.Credentials)}}),vu=e=>({...e,...e.Credentials&&{Credentials:os(e.Credentials)}})});var wI,AI,RI,TI,II,vI,kI,PI,OI,NI,DI,BI,FI,MI,LI,UI,Pn,zF,KF,jF,VF,WF,XF,YF,QF,JF,ZF,eM,tM,rM,nM,oM,sM,cl,iM,aM,cM,lM,dM,$I,op,fM,mM,uM,Hi,pM,hM,gM,yM,EM,xM,SM,_M,CM,bM,wM,AM,RM,TM,Ue,IM,On,Nn,Dn,Bn,ss,vM,ku,Ir,kM,PM,is,vr,as,Je,Pu,OM,Ou,Ze,Nu,Du,Bu,Fu,Mu,NM,DM,BM,FM,Lu,Uu,$u,Hu,Nt,Dt,qu,Gu,zu,Ku,Bt,ju,kr,cs,Vu,Wu,Xu,Yu,Ft,ls,Qu,Ju,ds,fs,Zu,ep,Fn,tp,rp,np,le,Mn,MM,Pr=a(()=>{Ee();K();v();kn();al();wI=async(e,t)=>{let r=Nn,n;return n=Mn({...JF(e,t),[Bn]:vM,[Fn]:Dn}),On(t,r,"/",void 0,n)},AI=async(e,t)=>{let r=Nn,n;return n=Mn({...ZF(e,t),[Bn]:kM,[Fn]:Dn}),On(t,r,"/",void 0,n)},RI=async(e,t)=>{let r=Nn,n;return n=Mn({...eM(e,t),[Bn]:PM,[Fn]:Dn}),On(t,r,"/",void 0,n)},TI=async(e,t)=>{let r=Nn,n;return n=Mn({...tM(e,t),[Bn]:OM,[Fn]:Dn}),On(t,r,"/",void 0,n)},II=async(e,t)=>{let r=Nn,n;return n=Mn({...rM(e,t),[Bn]:NM,[Fn]:Dn}),On(t,r,"/",void 0,n)},vI=async(e,t)=>{let r=Nn,n;return n=Mn({...nM(e,t),[Bn]:DM,[Fn]:Dn}),On(t,r,"/",void 0,n)},kI=async(e,t)=>{let r=Nn,n;return n=Mn({...oM(e,t),[Bn]:BM,[Fn]:Dn}),On(t,r,"/",void 0,n)},PI=async(e,t)=>{let r=Nn,n;return n=Mn({...sM(e,t),[Bn]:FM,[Fn]:Dn}),On(t,r,"/",void 0,n)},OI=async(e,t)=>{if(e.statusCode>=300)return Pn(e,t);let r=await xt(e.body,t),n={};return n=fM(r.AssumeRoleResult,t),{$metadata:Ue(e),...n}},NI=async(e,t)=>{if(e.statusCode>=300)return Pn(e,t);let r=await xt(e.body,t),n={};return n=mM(r.AssumeRoleWithSAMLResult,t),{$metadata:Ue(e),...n}},DI=async(e,t)=>{if(e.statusCode>=300)return Pn(e,t);let r=await xt(e.body,t),n={};return n=uM(r.AssumeRoleWithWebIdentityResult,t),{$metadata:Ue(e),...n}},BI=async(e,t)=>{if(e.statusCode>=300)return Pn(e,t);let r=await xt(e.body,t),n={};return n=pM(r.DecodeAuthorizationMessageResult,t),{$metadata:Ue(e),...n}},FI=async(e,t)=>{if(e.statusCode>=300)return Pn(e,t);let r=await xt(e.body,t),n={};return n=yM(r.GetAccessKeyInfoResult,t),{$metadata:Ue(e),...n}},MI=async(e,t)=>{if(e.statusCode>=300)return Pn(e,t);let r=await xt(e.body,t),n={};return n=EM(r.GetCallerIdentityResult,t),{$metadata:Ue(e),...n}},LI=async(e,t)=>{if(e.statusCode>=300)return Pn(e,t);let r=await xt(e.body,t),n={};return n=xM(r.GetFederationTokenResult,t),{$metadata:Ue(e),...n}},UI=async(e,t)=>{if(e.statusCode>=300)return Pn(e,t);let r=await xt(e.body,t),n={};return n=SM(r.GetSessionTokenResult,t),{$metadata:Ue(e),...n}},Pn=async(e,t)=>{let r={...e,body:await Ca(e.body,t)},n=MM(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await zF(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await XF(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await YF(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await QF(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await jF(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await WF(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await KF(r,t);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await VF(r,t);default:let o=r.body;return IM({output:e,parsedBody:o.Error,errorCode:n})}},zF=async(e,t)=>{let r=e.body,n=hM(r.Error,t),o=new Ni({$metadata:Ue(e),...n});return $(o,r)},KF=async(e,t)=>{let r=e.body,n=_M(r.Error,t),o=new Ui({$metadata:Ue(e),...n});return $(o,r)},jF=async(e,t)=>{let r=e.body,n=CM(r.Error,t),o=new Mi({$metadata:Ue(e),...n});return $(o,r)},VF=async(e,t)=>{let r=e.body,n=bM(r.Error,t),o=new $i({$metadata:Ue(e),...n});return $(o,r)},WF=async(e,t)=>{let r=e.body,n=wM(r.Error,t),o=new Li({$metadata:Ue(e),...n});return $(o,r)},XF=async(e,t)=>{let r=e.body,n=AM(r.Error,t),o=new Di({$metadata:Ue(e),...n});return $(o,r)},YF=async(e,t)=>{let r=e.body,n=RM(r.Error,t),o=new Bi({$metadata:Ue(e),...n});return $(o,r)},QF=async(e,t)=>{let r=e.body,n=TM(r.Error,t),o=new Fi({$metadata:Ue(e),...n});return $(o,r)},JF=(e,t)=>{let r={};if(e[kr]!=null&&(r[kr]=e[kr]),e[cs]!=null&&(r[cs]=e[cs]),e[Dt]!=null){let n=cl(e[Dt],t);e[Dt]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}if(e[Nt]!=null&&(r[Nt]=e[Nt]),e[Ze]!=null&&(r[Ze]=e[Ze]),e[ds]!=null){let n=$I(e[ds],t);e[ds]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([o,s])=>{let i=`Tags.${o}`;r[i]=s})}if(e[Zu]!=null){let n=dM(e[Zu],t);e[Zu]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,s])=>{let i=`TransitiveTagKeys.${o}`;r[i]=s})}if(e[Du]!=null&&(r[Du]=e[Du]),e[ls]!=null&&(r[ls]=e[ls]),e[fs]!=null&&(r[fs]=e[fs]),e[Ft]!=null&&(r[Ft]=e[Ft]),e[zu]!=null){let n=cM(e[zu],t);e[zu]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([o,s])=>{let i=`ProvidedContexts.${o}`;r[i]=s})}return r},ZF=(e,t)=>{let r={};if(e[kr]!=null&&(r[kr]=e[kr]),e[qu]!=null&&(r[qu]=e[qu]),e[Xu]!=null&&(r[Xu]=e[Xu]),e[Dt]!=null){let n=cl(e[Dt],t);e[Dt]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}return e[Nt]!=null&&(r[Nt]=e[Nt]),e[Ze]!=null&&(r[Ze]=e[Ze]),r},eM=(e,t)=>{let r={};if(e[kr]!=null&&(r[kr]=e[kr]),e[cs]!=null&&(r[cs]=e[cs]),e[rp]!=null&&(r[rp]=e[rp]),e[Ku]!=null&&(r[Ku]=e[Ku]),e[Dt]!=null){let n=cl(e[Dt],t);e[Dt]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}return e[Nt]!=null&&(r[Nt]=e[Nt]),e[Ze]!=null&&(r[Ze]=e[Ze]),r},tM=(e,t)=>{let r={};return e[Bu]!=null&&(r[Bu]=e[Bu]),r},rM=(e,t)=>{let r={};return e[ss]!=null&&(r[ss]=e[ss]),r},nM=(e,t)=>({}),oM=(e,t)=>{let r={};if(e[$u]!=null&&(r[$u]=e[$u]),e[Nt]!=null&&(r[Nt]=e[Nt]),e[Dt]!=null){let n=cl(e[Dt],t);e[Dt]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}if(e[Ze]!=null&&(r[Ze]=e[Ze]),e[ds]!=null){let n=$I(e[ds],t);e[ds]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([o,s])=>{let i=`Tags.${o}`;r[i]=s})}return r},sM=(e,t)=>{let r={};return e[Ze]!=null&&(r[Ze]=e[Ze]),e[ls]!=null&&(r[ls]=e[ls]),e[fs]!=null&&(r[fs]=e[fs]),r},cl=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=iM(o,t);Object.entries(s).forEach(([i,c])=>{r[`member.${n}.${i}`]=c}),n++}return r},iM=(e,t)=>{let r={};return e[np]!=null&&(r[np]=e[np]),r},aM=(e,t)=>{let r={};return e[Gu]!=null&&(r[Gu]=e[Gu]),e[Pu]!=null&&(r[Pu]=e[Pu]),r},cM=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=aM(o,t);Object.entries(s).forEach(([i,c])=>{r[`member.${n}.${i}`]=c}),n++}return r},lM=(e,t)=>{let r={};return e[Uu]!=null&&(r[Uu]=e[Uu]),e[tp]!=null&&(r[tp]=e[tp]),r},dM=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},$I=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=lM(o,t);Object.entries(s).forEach(([i,c])=>{r[`member.${n}.${i}`]=c}),n++}return r},op=(e,t)=>{let r={};return e[ku]!=null&&(r[ku]=C(e[ku])),e[vr]!=null&&(r[vr]=C(e[vr])),r},fM=(e,t)=>{let r={};return e[Je]!=null&&(r[Je]=Hi(e[Je],t)),e[Ir]!=null&&(r[Ir]=op(e[Ir],t)),e[Bt]!=null&&(r[Bt]=yr(e[Bt])),e[Ft]!=null&&(r[Ft]=C(e[Ft])),r},mM=(e,t)=>{let r={};return e[Je]!=null&&(r[Je]=Hi(e[Je],t)),e[Ir]!=null&&(r[Ir]=op(e[Ir],t)),e[Bt]!=null&&(r[Bt]=yr(e[Bt])),e[Vu]!=null&&(r[Vu]=C(e[Vu])),e[Qu]!=null&&(r[Qu]=C(e[Qu])),e[Lu]!=null&&(r[Lu]=C(e[Lu])),e[as]!=null&&(r[as]=C(e[as])),e[Hu]!=null&&(r[Hu]=C(e[Hu])),e[Ft]!=null&&(r[Ft]=C(e[Ft])),r},uM=(e,t)=>{let r={};return e[Je]!=null&&(r[Je]=Hi(e[Je],t)),e[Yu]!=null&&(r[Yu]=C(e[Yu])),e[Ir]!=null&&(r[Ir]=op(e[Ir],t)),e[Bt]!=null&&(r[Bt]=yr(e[Bt])),e[ju]!=null&&(r[ju]=C(e[ju])),e[as]!=null&&(r[as]=C(e[as])),e[Ft]!=null&&(r[Ft]=C(e[Ft])),r},Hi=(e,t)=>{let r={};return e[ss]!=null&&(r[ss]=C(e[ss])),e[Wu]!=null&&(r[Wu]=C(e[Wu])),e[Ju]!=null&&(r[Ju]=C(e[Ju])),e[Nu]!=null&&(r[Nu]=ye(As(e[Nu]))),r},pM=(e,t)=>{let r={};return e[Ou]!=null&&(r[Ou]=C(e[Ou])),r},hM=(e,t)=>{let r={};return e[le]!=null&&(r[le]=C(e[le])),r},gM=(e,t)=>{let r={};return e[Mu]!=null&&(r[Mu]=C(e[Mu])),e[vr]!=null&&(r[vr]=C(e[vr])),r},yM=(e,t)=>{let r={};return e[is]!=null&&(r[is]=C(e[is])),r},EM=(e,t)=>{let r={};return e[ep]!=null&&(r[ep]=C(e[ep])),e[is]!=null&&(r[is]=C(e[is])),e[vr]!=null&&(r[vr]=C(e[vr])),r},xM=(e,t)=>{let r={};return e[Je]!=null&&(r[Je]=Hi(e[Je],t)),e[Fu]!=null&&(r[Fu]=gM(e[Fu],t)),e[Bt]!=null&&(r[Bt]=yr(e[Bt])),r},SM=(e,t)=>{let r={};return e[Je]!=null&&(r[Je]=Hi(e[Je],t)),r},_M=(e,t)=>{let r={};return e[le]!=null&&(r[le]=C(e[le])),r},CM=(e,t)=>{let r={};return e[le]!=null&&(r[le]=C(e[le])),r},bM=(e,t)=>{let r={};return e[le]!=null&&(r[le]=C(e[le])),r},wM=(e,t)=>{let r={};return e[le]!=null&&(r[le]=C(e[le])),r},AM=(e,t)=>{let r={};return e[le]!=null&&(r[le]=C(e[le])),r},RM=(e,t)=>{let r={};return e[le]!=null&&(r[le]=C(e[le])),r},TM=(e,t)=>{let r={};return e[le]!=null&&(r[le]=C(e[le])),r},Ue=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),IM=Gr(Qe),On=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:c,path:l}=await e.endpoint(),d={protocol:i,hostname:s,port:c,method:"POST",path:l.endsWith("/")?l.slice(0,-1)+r:l+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new B(d)},Nn={"content-type":"application/x-www-form-urlencoded"},Dn="2011-06-15",Bn="Action",ss="AccessKeyId",vM="AssumeRole",ku="AssumedRoleId",Ir="AssumedRoleUser",kM="AssumeRoleWithSAML",PM="AssumeRoleWithWebIdentity",is="Account",vr="Arn",as="Audience",Je="Credentials",Pu="ContextAssertion",OM="DecodeAuthorizationMessage",Ou="DecodedMessage",Ze="DurationSeconds",Nu="Expiration",Du="ExternalId",Bu="EncodedMessage",Fu="FederatedUser",Mu="FederatedUserId",NM="GetAccessKeyInfo",DM="GetCallerIdentity",BM="GetFederationToken",FM="GetSessionToken",Lu="Issuer",Uu="Key",$u="Name",Hu="NameQualifier",Nt="Policy",Dt="PolicyArns",qu="PrincipalArn",Gu="ProviderArn",zu="ProvidedContexts",Ku="ProviderId",Bt="PackedPolicySize",ju="Provider",kr="RoleArn",cs="RoleSessionName",Vu="Subject",Wu="SecretAccessKey",Xu="SAMLAssertion",Yu="SubjectFromWebIdentityToken",Ft="SourceIdentity",ls="SerialNumber",Qu="SubjectType",Ju="SessionToken",ds="Tags",fs="TokenCode",Zu="TransitiveTagKeys",ep="UserId",Fn="Version",tp="Value",rp="WebIdentityToken",np="arn",le="message",Mn=e=>Object.entries(e).map(([t,r])=>zn(t)+"="+zn(r)).join("&"),MM=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var co,ll=a(()=>{ae();me();v();cr();kn();Pr();co=class extends U.classBuilder().ep(Me).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,bu).ser(wI).de(OI).build(){}});var qi,sp=a(()=>{ae();me();v();cr();kn();Pr();qi=class extends U.classBuilder().ep(Me).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithSAML",{}).n("STSClient","AssumeRoleWithSAMLCommand").f(wu,Au).ser(AI).de(NI).build(){}});var lo,dl=a(()=>{ae();me();v();cr();kn();Pr();lo=class extends U.classBuilder().ep(Me).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Ru,Tu).ser(RI).de(DI).build(){}});var Gi,ip=a(()=>{ae();me();v();cr();Pr();Gi=class extends U.classBuilder().ep(Me).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","DecodeAuthorizationMessage",{}).n("STSClient","DecodeAuthorizationMessageCommand").f(void 0,void 0).ser(TI).de(BI).build(){}});var zi,ap=a(()=>{ae();me();v();cr();Pr();zi=class extends U.classBuilder().ep(Me).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetAccessKeyInfo",{}).n("STSClient","GetAccessKeyInfoCommand").f(void 0,void 0).ser(II).de(FI).build(){}});var Ki,cp=a(()=>{ae();me();v();cr();Pr();Ki=class extends U.classBuilder().ep(Me).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetCallerIdentity",{}).n("STSClient","GetCallerIdentityCommand").f(void 0,void 0).ser(vI).de(MI).build(){}});var ji,lp=a(()=>{ae();me();v();cr();kn();Pr();ji=class extends U.classBuilder().ep(Me).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetFederationToken",{}).n("STSClient","GetFederationTokenCommand").f(void 0,Iu).ser(kI).de(LI).build(){}});var Vi,dp=a(()=>{ae();me();v();cr();kn();Pr();Vi=class extends U.classBuilder().ep(Me).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetSessionToken",{}).n("STSClient","GetSessionTokenCommand").f(void 0,vu).ser(PI).de(UI).build(){}});var LM,fl,HI=a(()=>{v();ll();sp();dl();ip();ap();cp();lp();dp();Oi();LM={AssumeRoleCommand:co,AssumeRoleWithSAMLCommand:qi,AssumeRoleWithWebIdentityCommand:lo,DecodeAuthorizationMessageCommand:Gi,GetAccessKeyInfoCommand:zi,GetCallerIdentityCommand:Ki,GetFederationTokenCommand:ji,GetSessionTokenCommand:Vi},fl=class extends ar{};wo(LM,fl)});var qI=a(()=>{ll();sp();dl();ip();ap();cp();lp();dp()});var GI=a(()=>{kn()});var zI,KI,jI,VI,WI,XI,YI=a(()=>{He();ll();dl();zI="us-east-1",KI=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},jI=async(e,t,r)=>{let n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t;return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${o} (parent client)`,`${zI} (STS default)`),n??o??zI},VI=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:m=e?.parentClientConfig?.logger,region:u,requestHandler:h=e?.parentClientConfig?.requestHandler,credentialProviderLogger:g}=e,x=await jI(u,e?.parentClientConfig?.region,g),I=!XI(h);r=new t({credentialDefaultProvider:()=>async()=>n,region:x,requestHandler:I?h:void 0,logger:m})}let{Credentials:i,AssumedRoleUser:c}=await r.send(new co(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);let l=KI(c),d={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...l&&{accountId:l}};return J(d,"CREDENTIALS_STS_ASSUME_ROLE","i"),d}},WI=(e,t)=>{let r;return async n=>{if(!r){let{logger:l=e?.parentClientConfig?.logger,region:d,requestHandler:m=e?.parentClientConfig?.requestHandler,credentialProviderLogger:u}=e,h=await jI(d,e?.parentClientConfig?.region,u),g=!XI(m);r=new t({region:h,requestHandler:g?m:void 0,logger:l})}let{Credentials:o,AssumedRoleUser:s}=await r.send(new lo(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let i=KI(s),c={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...i&&{accountId:i}};return i&&J(c,"RESOLVED_ACCOUNT_ID","T"),J(c,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),c}},XI=e=>e?.metadata?.handlerProtocol==="h2"});var QI,JI,ZI,UM,ev=a(()=>{YI();Oi();QI=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,JI=(e={},t)=>VI(e,QI(ar,t)),ZI=(e={},t)=>WI(e,QI(ar,t)),UM=e=>t=>e({roleAssumer:JI(t),roleAssumerWithWebIdentity:ZI(t),...t})});var fp={};ht(fp,{$Command:()=>U,AssumeRoleCommand:()=>co,AssumeRoleResponseFilterSensitiveLog:()=>bu,AssumeRoleWithSAMLCommand:()=>qi,AssumeRoleWithSAMLRequestFilterSensitiveLog:()=>wu,AssumeRoleWithSAMLResponseFilterSensitiveLog:()=>Au,AssumeRoleWithWebIdentityCommand:()=>lo,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Ru,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>Tu,CredentialsFilterSensitiveLog:()=>os,DecodeAuthorizationMessageCommand:()=>Gi,ExpiredTokenException:()=>Ni,GetAccessKeyInfoCommand:()=>zi,GetCallerIdentityCommand:()=>Ki,GetFederationTokenCommand:()=>ji,GetFederationTokenResponseFilterSensitiveLog:()=>Iu,GetSessionTokenCommand:()=>Vi,GetSessionTokenResponseFilterSensitiveLog:()=>vu,IDPCommunicationErrorException:()=>Ui,IDPRejectedClaimException:()=>Mi,InvalidAuthorizationMessageException:()=>$i,InvalidIdentityTokenException:()=>Li,MalformedPolicyDocumentException:()=>Di,PackedPolicyTooLargeException:()=>Bi,RegionDisabledException:()=>Fi,STS:()=>fl,STSClient:()=>ar,STSServiceException:()=>Qe,__Client:()=>Et,decorateDefaultCredentialProvider:()=>UM,getDefaultRoleAssumer:()=>JI,getDefaultRoleAssumerWithWebIdentity:()=>ZI});var mp=a(()=>{Oi();HI();qI();GI();ev();al()});var rv,$M,HM,nv,tv,ov=a(()=>{He();ee();$t();MT();up();rv=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&($M(e,{profile:t,logger:r})||HM(e,{profile:t,logger:r})),$M=(e,{profile:t,logger:r})=>{let n=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return n&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),n},HM=(e,{profile:t,logger:r})=>{let n=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return n&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),n},nv=async(e,t,r,n={})=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=t[e];if(!r.roleAssumer){let{getDefaultRoleAssumer:c}=await Promise.resolve().then(()=>(mp(),fp));r.roleAssumer=c({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:r?.parentClientConfig},r.clientPlugins)}let{source_profile:s}=o;if(s&&s in n)throw new k(`Detected a cycle attempting to resolve credentials for profile ${Ct(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${s?`source_profile=[${s}]`:`profile=[${e}]`}`);let i=s?ml(s,t,r,{...n,[s]:!0},tv(t[s]??{})):(await FT(o.credential_source,e,r.logger)(r))();if(tv(o))return i.then(c=>J(c,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let c={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:l}=o;if(l){if(!r.mfaCodeProvider)throw new k(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});c.SerialNumber=l,c.TokenCode=await r.mfaCodeProvider(l)}let d=await i;return r.roleAssumer(d,c).then(m=>J(m,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},tv=e=>!e.role_arn&&!!e.credential_source});var sv,iv=a(()=>{He();sv=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let s=new Date;if(new Date(t.Expiration)<s)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let n=t.AccountId;!n&&r?.[e]?.aws_account_id&&(n=r[e].aws_account_id);let o={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...n&&{accountId:n}};return J(o,"CREDENTIALS_PROCESS","w"),o}});import{exec as qM}from"child_process";import{promisify as GM}from"util";var av,cv=a(()=>{ee();iv();av=async(e,t,r)=>{let n=t[e];if(t[e]){let o=n.credential_process;if(o!==void 0){let s=GM(qM);try{let{stdout:i}=await s(o),c;try{c=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return sv(e,c,t)}catch(i){throw new k(i.message,{logger:r})}}else throw new k(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new k(`Profile ${e} could not be found in shared credentials file.`,{logger:r})}});var zM,lv=a(()=>{$t();cv();zM=(e={})=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let t=await cn(e);return av(Ct(e),t,e.logger)}});var pp={};ht(pp,{fromProcess:()=>zM});var hp=a(()=>{lv()});var dv,fv,mv=a(()=>{He();dv=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",fv=async(e,t)=>Promise.resolve().then(()=>(hp(),pp)).then(({fromProcess:r})=>r({...e,profile:t})().then(n=>J(n,"CREDENTIALS_PROFILE_PROCESS","v")))});var uv,pv,hv=a(()=>{He();uv=async(e,t,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>(Eu(),yu));return n({profile:e,logger:r.logger})().then(o=>t.sso_session?J(o,"CREDENTIALS_PROFILE_SSO","r"):J(o,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},pv=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string")});var gp,yp,gv=a(()=>{He();gp=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,yp=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return J(r,"CREDENTIALS_PROFILE","n")}});var Ep,xp=a(()=>{Ep=e=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:o,policyArns:s,policy:i,durationSeconds:c}=e,{roleAssumerWithWebIdentity:l}=e;if(!l){let{getDefaultRoleAssumerWithWebIdentity:d}=await Promise.resolve().then(()=>(mp(),fp));l=d({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:e.parentClientConfig},e.clientPlugins)}return l({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:s,Policy:i,DurationSeconds:c})}});import{readFileSync as KM}from"fs";var yv,jM,VM,WM,Ev=a(()=>{He();ee();xp();yv="AWS_WEB_IDENTITY_TOKEN_FILE",jM="AWS_ROLE_ARN",VM="AWS_ROLE_SESSION_NAME",WM=(e={})=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let t=e?.webIdentityTokenFile??process.env[yv],r=e?.roleArn??process.env[jM],n=e?.roleSessionName??process.env[VM];if(!t||!r)throw new k("Web identity configuration not specified",{logger:e.logger});let o=await Ep({...e,webIdentityToken:KM(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})();return t===process.env[yv]&&J(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o}});var Sp={};ht(Sp,{fromTokenFile:()=>WM,fromWebToken:()=>Ep});var _p=a(()=>{Ev();xp()});var xv,Sv,_v=a(()=>{He();xv=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,Sv=async(e,t)=>Promise.resolve().then(()=>(_p(),Sp)).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(n=>J(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q")))});var ml,up=a(()=>{ee();ov();mv();hv();gv();_v();ml=async(e,t,r,n={},o=!1)=>{let s=t[e];if(Object.keys(n).length>0&&gp(s))return yp(s,r);if(o||rv(s,{profile:e,logger:r.logger}))return nv(e,t,r,n);if(gp(s))return yp(s,r);if(xv(s))return Sv(s,r);if(dv(s))return fv(r,e);if(pv(s))return await uv(e,s,r);throw new k(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})}});var XM,Cv=a(()=>{$t();up();XM=(e={})=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let t=await cn(e);return ml(Ct(e),t,e)}});var bv={};ht(bv,{fromIni:()=>XM});var wv=a(()=>{Cv()});var Av,so,YM,QM,Rv=a(()=>{bm();ee();$t();r0();Av=!1,so=(e={})=>Kn(gr(async()=>{if(e.profile??process.env[uf])throw process.env[Oc]&&process.env[Nc]&&(Av||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn:console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),Av=!0)),new k("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),Cm(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoSession:s}=e;if(!t&&!r&&!n&&!o&&!s)throw new k("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:i}=await Promise.resolve().then(()=>(Eu(),yu));return i(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:t}=await Promise.resolve().then(()=>(wv(),bv));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:t}=await Promise.resolve().then(()=>(hp(),pp));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:t}=await Promise.resolve().then(()=>(_p(),Sp));return t(e)()},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await t0(e))()),async()=>{throw new k("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}),QM,YM),YM=e=>e?.expiration!==void 0,QM=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5});var Gc=a(()=>{Rv()});import zv from"fs";import Kv from"path";function Cp(e){let t=Kv.join(e,"required-server-files.json"),r=zv.readFileSync(t,"utf-8"),{config:n}=JSON.parse(r);return n}function bp(e){let t=Kv.join(e,"BUILD_ID");return zv.readFileSync(t,"utf-8").trim()}var wp=a(()=>{});function Yi(e){if(e)return typeof e=="string"?e.split(/(?<!Expires=\w+),/i).map(t=>t.trim()):e}var Ap,wL,bl=a(()=>{Ap=e=>{let t={};if(!e)return t;for(let[r,n]of Object.entries(e))n!==void 0&&(t[r]=wL(n));return t},wL=e=>typeof e=="string"?e:Array.isArray(e)?e.join(","):String(e)});import{Transform as AL}from"stream";var mo,uo,us,Rp=a(()=>{bl();mo="set-cookie",uo="This cannot be used in OpenNext",us=class extends AL{fixHeaders;streamCreator;initialHeaders;statusCode;statusMessage="";headers={};_cookies=[];responseStream;headersSent=!1;_chunks=[];strictContentLength=!1;assignSocket(t){throw new Error(uo)}detachSocket(t){throw new Error(uo)}writeContinue(t){throw new Error(uo)}writeEarlyHints(t,r){throw new Error(uo)}writeProcessing(){throw new Error(uo)}req;chunkedEncoding=!1;shouldKeepAlive=!0;useChunkedEncodingByDefault=!0;sendDate=!1;connection=null;socket=null;setTimeout(t,r){throw new Error(uo)}addTrailers(t){throw new Error(uo)}constructor(t,r,n,o){super(),this.fixHeaders=t,this.streamCreator=n,this.initialHeaders=o,o&&o[mo]&&(this._cookies=Yi(o[mo])),this.once("finish",()=>{this.headersSent||this.flushHeaders(),r(this.headers),this.streamCreator?.onFinish()})}get originalResponse(){return this}get finished(){return!!(this.writableFinished&&this.responseStream?.writableFinished)}setHeader(t,r){let n=t.toLowerCase();return n===mo&&(Array.isArray(r)?this._cookies=r:this._cookies=[r]),this.headers[n]=r,this}removeHeader(t){let r=t.toLowerCase();return r===mo?this._cookies=[]:delete this.headers[r],this}hasHeader(t){let r=t.toLowerCase();return r===mo?this._cookies.length>0:this.headers[r]!==void 0}getHeaders(){return this.headers}getHeader(t){return this.headers[t.toLowerCase()]}getHeaderNames(){return Object.keys(this.headers)}flushHeaders(){this.headersSent=!0,this.fixHeaders(this.headers),this.initialHeaders&&(this.headers={...this.headers,...this.initialHeaders}),this._cookies.length>0&&(this.headers[mo]=[...Yi(this.initialHeaders?.[mo])??[],...this._cookies]),this.streamCreator&&(this.responseStream=this.streamCreator?.writeHeaders({statusCode:this.statusCode??200,cookies:this._cookies,headers:Ap(this.headers)}),this.pipe(this.responseStream))}appendHeader(t,r){let n=t.toLowerCase();if(this.hasHeader(n)){let o=this.getHeader(n),s=Array.isArray(r)?r:[r],i=Array.isArray(o)?[...o,...s]:[o,...s];return this.setHeader(n,i)}else return this.setHeader(n,r)}writeHead(t,r,n){let o=n,s;typeof r=="string"?s=r:o=r;let i=this.headers;if(o)if(Array.isArray(o))for(let c=0;c<o.length;c+=2)i[o[c]]=o[c+1];else for(let c of Object.keys(o))i[c]=o[c];return this.statusCode=t,n&&(this.headers=i),this.flushHeaders(),this}get body(){return Buffer.concat(this._chunks)}_internalWrite(t,r){this._chunks.push(Buffer.from(t,r)),this.push(t,r),this.streamCreator?.onWrite?.()}_transform(t,r,n){this.headersSent||this.flushHeaders(),this._internalWrite(t,r),n()}}});function Be(...e){globalThis.openNextDebug&&console.log(...e)}function jv(...e){console.warn(...e)}function Qi(...e){if(e.some(t=>TL(t))){jv(...e);return}console.error(...e)}var RL,TL,Vv,po=a(()=>{RL=[{clientName:"S3Client",commandName:"GetObjectCommand",errorName:"NoSuchKey"}],TL=e=>RL.some(t=>t.clientName===e?.clientName&&t.commandName===e?.commandName&&(t.errorName===e?.error?.name||t.errorName===e?.error?.Code));Vv={trace:()=>{},debug:()=>{},info:Be,warn:jv,error:Qi}});import Wv from"path";var IL,vL,Xv=a(()=>{po();wp();IL=Wv.join(__dirname,".next"),vL=Wv.join(__dirname,".open-next");Be({NEXT_DIR:IL,OPEN_NEXT_DIR:vL})});var Yv=a(()=>{});function Jv(e){let t=new URLSearchParams(e),r={};for(let n of t.keys()){let o=t.getAll(n);r[n]=o.length>1?o:o[0]}return r}var Qv,Zv=a(()=>{Xv();Rp();bl();Yv();po();(function(e){e.CACHE_CONTROL="cache-control",e.NEXT_CACHE="x-nextjs-cache"})(Qv||(Qv={}))});function ek(e){let t={};for(let[r,n]of Object.entries(e))n!==void 0&&(t[r]=n);return t}var tk=a(()=>{});var rk={};ht(rk,{default:()=>DL});function kL(e){let{body:t,isBase64Encoded:r}=e;return Buffer.isBuffer(t)?t:typeof t=="string"?Buffer.from(t,r?"base64":"utf8"):typeof t=="object"?Buffer.from(JSON.stringify(t)):Buffer.from("","utf8")}function PL(e){let{headers:t,cookies:r}=e,n={};Array.isArray(r)&&(n.cookie=r.join("; "));for(let[o,s]of Object.entries(t||{}))n[o.toLowerCase()]=s;return n}async function OL(e){let{rawPath:t,rawQueryString:r,requestContext:n}=e;return{type:"core",method:n.http.method,rawPath:t,url:t+(r?`?${r}`:""),body:kL(e),headers:PL(e),remoteAddress:n.http.sourceIp,query:ek(Jv(r)),cookies:e.cookies?.reduce((o,s)=>{let[i,c]=s.split("=");return{...o,[i]:c}},{})??{}}}function NL(e){let t={};Object.entries(e.headers).filter(([n])=>n.toLowerCase()!=="set-cookie").forEach(([n,o])=>{if(o===null){t[n]="";return}t[n]=Array.isArray(o)?o.join(", "):o.toString()});let r={statusCode:e.statusCode,headers:t,cookies:Yi(e.headers["set-cookie"]),body:e.body,isBase64Encoded:e.isBase64Encoded};return Be(r),r}var DL,nk=a(()=>{bl();po();Zv();tk();DL={convertFrom:OL,convertTo:NL,name:"aws-apigw-v2"}});var ok={};ht(ok,{default:()=>LL});import{Writable as BL}from"stream";function FL(e){return new Promise(t=>{setTimeout(()=>{t({serverId,type:"warmer"})},e.delay)})}var ML,LL,sk=a(()=>{ML=async(e,t)=>async r=>{if("type"in r)return FL(r);let n=await t.convertFrom(r),s=await e(n,{writeHeaders:()=>new BL({write:(i,c,l)=>{l()}}),onFinish:()=>{}});return t.convertTo(s,r)},LL={wrapper:ML,name:"aws-lambda",supportStreaming:!1}});function dk(){process.env.NODE_ENV=process.env.NODE_ENV??"production"}var fk=a(()=>{});import{createHash as qL}from"node:crypto";import GL from"node:https";import zL from"node:path";K();function _k(e){return t=>async r=>{let{request:n}=r;return B.isInstance(n)&&n.body&&e.runtime==="node"&&e.requestHandler?.constructor?.name!=="FetchHttpHandler"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}var Ck={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},zh=e=>({applyToStack:t=>{t.add(_k(e),Ck)}});var ps={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},Ji=ps.WHEN_SUPPORTED,Il={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},Zi=ps.WHEN_SUPPORTED,re;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"})(re||(re={}));var Kh;(function(e){e.HEADER="header",e.TRAILER="trailer"})(Kh||(Kh={}));var jh=re.MD5,Vh=re.CRC32;var Br;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Br||(Br={}));var Eo=(e,t,r,n)=>{if(!(t in e))return;let o=e[t].toUpperCase();if(!Object.values(r).includes(o))throw new TypeError(`Cannot load ${n} '${t}'. Expected one of ${Object.values(r)}, got '${e[t]}'.`);return o};var bk="AWS_REQUEST_CHECKSUM_CALCULATION",wk="request_checksum_calculation",Wh={environmentVariableSelector:e=>Eo(e,bk,ps,Br.ENV),configFileSelector:e=>Eo(e,wk,ps,Br.CONFIG),default:Ji};var Ak="AWS_RESPONSE_CHECKSUM_VALIDATION",Rk="response_checksum_validation",Xh={environmentVariableSelector:e=>Eo(e,Ak,Il,Br.ENV),configFileSelector:e=>Eo(e,Rk,Il,Br.CONFIG),default:Zi};Ee();K();var vs=[re.CRC32,re.CRC32C,re.SHA1,re.SHA256],Gx=[re.SHA256,re.SHA1,re.CRC32,re.CRC32C];var zx=(e,{requestChecksumRequired:t,requestAlgorithmMember:r},n)=>{let o=n?Vh:jh;if(!r||!e[r])return t?o:void 0;let s=e[r];if(!vs.includes(s))throw new Error(`The checksum algorithm "${s}" is not supported by the client. Select one of ${vs}.`);return s};var Io=e=>e===re.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`;var Kx=(e,t)=>{let r=e.toLowerCase();for(let n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1};ra();var vo=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!So(e);function ba(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function c(m){try{d(n.next(m))}catch(u){i(u)}}function l(m){try{d(n.throw(m))}catch(u){i(u)}}function d(m){m.done?s(m.value):o(m.value).then(c,l)}d((n=n.apply(e,t||[])).next())})}function wa(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function c(d){return function(m){return l([d,m])}}function l(d){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],o=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Aa(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}import{Buffer as jx}from"buffer";var Vx=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?jx.from(e,t):jx.from(e)};var Md=e=>{let t=Vx(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var vO=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:Md;function ks(e){return e instanceof Uint8Array?e:typeof e=="string"?vO(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function Ps(e){return typeof e=="string"?e.length===0:e.byteLength===0}function Os(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}function Ns(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}var Ld=function(){function e(){this.crc32=new Qn}return e.prototype.update=function(t){Ps(t)||this.crc32.update(ks(t))},e.prototype.digest=function(){return ba(this,void 0,void 0,function(){return wa(this,function(t){return[2,Os(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new Qn},e}();var Qn=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=Aa(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^PO[(this.checksum^i)&255]}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();var kO=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],PO=Ns(kO);var $d=function(){function e(){this.crc32c=new Ud}return e.prototype.update=function(t){Ps(t)||this.crc32c.update(ks(t))},e.prototype.digest=function(){return ba(this,void 0,void 0,function(){return wa(this,function(t){return[2,Os(this.crc32c.digest())]})})},e.prototype.reset=function(){this.crc32c=new Ud},e}();var Ud=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=Aa(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^NO[(this.checksum^i)&255]}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();var OO=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],NO=Ns(OO);var Ra=(e,t)=>({[re.MD5]:t.md5,[re.CRC32]:Ld,[re.CRC32C]:$d,[re.SHA1]:t.sha1,[re.SHA256]:t.sha256})[e];ze();var Ta=(e,t)=>{let r=new e;return r.update(tt(t||"")),r.digest()};var Wx={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},Xx=(e,t)=>(r,n)=>async o=>{if(!B.isInstance(o.request))return r(o);let{request:s}=o,{body:i,headers:c}=s,{base64Encoder:l,streamHasher:d}=e,{input:m,requestChecksumRequired:u,requestAlgorithmMember:h}=t,g=zx(m,{requestChecksumRequired:u,requestAlgorithmMember:h},!!n.isS3ExpressBucket),x=i,I=c;if(g){switch(g){case re.CRC32:we(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case re.CRC32C:we(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case re.SHA1:we(n,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case re.SHA256:we(n,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}let P=Io(g),X=Ra(g,e);if(vo(i)){let{getAwsChunkedEncodingStream:L,bodyLengthChecker:te}=e;x=L(i,{base64Encoder:l,bodyLengthChecker:te,checksumLocationName:P,checksumAlgorithmFn:X,streamHasher:d}),I={...c,"content-encoding":c["content-encoding"]?`${c["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":c["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":P},delete I["content-length"]}else if(!Kx(P,c)){let L=await Ta(X,i);I={...c,[P]:l(L)}}}return await r({...o,request:{...s,headers:I,body:x}})};K();var Ia=(e=[])=>{let t=[];for(let r of Gx)!e.includes(r)||!vs.includes(r)||t.push(r);return t};var Yx=e=>{let t=e.lastIndexOf("-");if(t!==-1){let r=e.slice(t+1);if(!r.startsWith("0")){let n=parseInt(r,10);if(!isNaN(n)&&n>=1&&n<=1e4)return!0}}return!1};import{Transform as DO}from"stream";function Hd(e){let t=new DO;return t.push(e),t.push(null),t}var Qx=async(e,{streamHasher:t,checksumAlgorithmFn:r,base64Encoder:n})=>{let o=vo(e)?t(r,e):Ta(r,e);return n(await o)};var Jx=async(e,{config:t,responseAlgorithms:r})=>{let n=Ia(r),{body:o,headers:s}=e;for(let i of n){let c=Io(i),l=s[c];if(l){let d=Ra(i,t),{streamHasher:m,base64Encoder:u}=t,h=await Qx(o,{streamHasher:m,checksumAlgorithmFn:d,base64Encoder:u});if(h===l)break;throw new Error(`Checksum mismatch: expected "${h}" but received "${l}" in response header "${c}".`)}}};var Zx={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},eS=(e,t)=>(r,n)=>async o=>{if(!B.isInstance(o.request))return r(o);let s=o.input,i=await r(o),c=i.response,l,{requestValidationModeMember:d,responseAlgorithms:m}=t;if(d&&s[d]==="ENABLED"){let{clientName:u,commandName:h}=n;if(u==="S3Client"&&h==="GetObjectCommand"&&Ia(m).every(I=>{let b=Io(I),P=c.headers[b];return!P||Yx(P)}))return i;let x=vo(c.body);x&&(l=await e.streamCollector(c.body),c.body=Hd(l)),await Jx(i.response,{config:e,responseAlgorithms:m}),x&&l&&(c.body=Hd(l))}return i};var tS=(e,t)=>({applyToStack:r=>{r.add(Xx(e,t),Wx),r.addRelativeTo(eS(e,t),Zx)}});Ge();var rS=e=>({...e,requestChecksumCalculation:de(e.requestChecksumCalculation??Ji),responseChecksumValidation:de(e.responseChecksumValidation??Zi)});Ds();Bs();Fs();K();v();var sS=e=>(t,r)=>async n=>{let o=await e.region(),s=e.region,i=()=>{};r.__s3RegionRedirect&&(Object.defineProperty(e,"region",{writable:!1,value:async()=>r.__s3RegionRedirect}),i=()=>Object.defineProperty(e,"region",{writable:!0,value:s}));try{let c=await t(n);if(r.__s3RegionRedirect){i();let l=await e.region();if(o!==l)throw new Error("Region was not restored following S3 region redirect.")}return c}catch(c){throw i(),c}},iS={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function GO(e){return(t,r)=>async n=>{try{return await t(n)}catch(o){if(e.followRegionRedirects&&(o?.$metadata?.httpStatusCode===301||o?.$metadata?.httpStatusCode===400&&o?.name==="IllegalLocationConstraintException")){try{let s=o.$response.headers["x-amz-bucket-region"];r.logger?.debug(`Redirecting from ${await e.region()} to ${s}`),r.__s3RegionRedirect=s}catch(s){throw new Error("Region redirect failed: "+s)}return t(n)}throw o}}}var zO={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},aS=e=>({applyToStack:t=>{t.add(GO(e),zO),t.addRelativeTo(sS(e),iS)}});K();v();var KO=e=>(t,r)=>async n=>{let o=await t(n),{response:s}=o;if($e.isInstance(s)&&s.headers.expires){s.headers.expiresstring=s.headers.expires;try{Rs(s.headers.expires)}catch(i){r.logger?.warn(`AWS SDK Warning for ${r.clientName}::${r.commandName} response parsing (${s.headers.expires}): ${i}`),delete s.headers.expires}}return o},jO={tags:["S3"],name:"s3ExpiresMiddleware",override:!0,relation:"after",toMiddleware:"deserializerMiddleware"},cS=e=>({applyToStack:t=>{t.addRelativeTo(KO(e),jO)}});var ko=class e{constructor(t={}){this.data=t,this.lastPurgeTime=Date.now()}get(t){let r=this.data[t];if(r)return r}set(t,r){return this.data[t]=r,r}delete(t){delete this.data[t]}async purgeExpired(){let t=Date.now();if(!(this.lastPurgeTime+e.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>t))for(let r in this.data){let n=this.data[r];if(!n.isRefreshing){let o=await n.identity;o.expiration&&o.expiration.getTime()<t&&delete this.data[r]}}}};ko.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;var Jn=class{constructor(t,r=!1,n=Date.now()){this._identity=t,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}};var Po=class e{constructor(t,r=new ko){this.createSessionFn=t,this.cache=r}async getS3ExpressIdentity(t,r){let n=r.Bucket,{cache:o}=this,s=o.get(n);return s?s.identity.then(i=>(i.expiration?.getTime()??0)<Date.now()?o.set(n,new Jn(this.getIdentity(n))).identity:((i.expiration?.getTime()??0)<Date.now()+e.REFRESH_WINDOW_MS&&!s.isRefreshing&&(s.isRefreshing=!0,this.getIdentity(n).then(d=>{o.set(n,new Jn(Promise.resolve(d)))})),i)):o.set(n,new Jn(this.getIdentity(n))).identity}async getIdentity(t){await this.cache.purgeExpired().catch(o=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+o)});let r=await this.createSessionFn(t);if(!r.Credentials?.AccessKeyId||!r.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}};Po.REFRESH_WINDOW_MS=6e4;Ed();Oo();var mS="Directory",uS="S3Express",pS="sigv4-s3express",va="X-Amz-S3session-Token",Ms=va.toLowerCase(),VO="AWS_S3_DISABLE_EXPRESS_SESSION_AUTH",WO="s3_disable_express_session_auth",qd={environmentVariableSelector:e=>lt(e,VO,Ve.ENV),configFileSelector:e=>lt(e,WO,Ve.CONFIG),default:!1};var Ls=class extends Vn{async signWithCredentials(t,r,n){let o=hS(r);t.headers[Ms]=r.sessionToken;let s=this;return gS(s,o),s.signRequest(t,n??{})}async presignWithCredentials(t,r,n){let o=hS(r);return delete t.headers[Ms],t.headers[va]=r.sessionToken,t.query=t.query??{},t.query[va]=r.sessionToken,gS(this,o),this.presign(t,n)}};function hS(e){return{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,expiration:e.expiration}}function gS(e,t){let r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=e.credentialProvider,o=()=>(clearTimeout(r),e.credentialProvider=n,Promise.resolve(t));e.credentialProvider=o}Ee();K();var yS=e=>(t,r)=>async n=>{if(r.endpointV2){let o=r.endpointV2,s=o.properties?.authSchemes?.[0]?.name===pS;if((o.properties?.backend===uS||o.properties?.bucketType===mS)&&(we(r,"S3_EXPRESS_BUCKET","J"),r.isS3ExpressBucket=!0),s){let c=n.input.Bucket;if(c){let l=await e.s3ExpressIdentityProvider.getS3ExpressIdentity(await e.credentials(),{Bucket:c});r.s3ExpressIdentity=l,B.isInstance(n.request)&&l.sessionToken&&(n.request.headers[Ms]=l.sessionToken)}}}return t(n)},ES={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},Gd=e=>({applyToStack:t=>{t.add(yS(e),ES)}});Ce();K();et();Ge();var xS=async(e,t,r,n)=>{let o=await n.signWithCredentials(r,e,{});if(o.headers["X-Amz-Security-Token"]||o.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return o};var XO=e=>t=>{throw t},YO=(e,t)=>{};var SS=e=>(t,r)=>async n=>{if(!B.isInstance(n.request))return t(n);let s=ke(r).selectedHttpAuthScheme;if(!s)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:c,signer:l}=s,d;r.s3ExpressIdentity?d=await xS(r.s3ExpressIdentity,i,n.request,await e.signer()):d=await l.sign(n.request,c,i);let m=await t({...n,request:d}).catch((l.errorHandler||XO)(i));return(l.successHandler||YO)(m.response,i),m},zd=e=>({applyToStack:t=>{t.addRelativeTo(SS(e),Ll)}});var _S=(e,{session:t})=>{let[r,n]=t;return{...e,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,followRegionRedirects:e.followRegionRedirects??!1,s3ExpressIdentityProvider:e.s3ExpressIdentityProvider??new Po(async o=>r().send(new n({Bucket:o,SessionMode:"ReadWrite"}))),bucketEndpoint:e.bucketEndpoint??!1}};K();xs();var QO={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},JO=3e3,ZO=e=>(t,r)=>async n=>{let o=await t(n),{response:s}=o;if(!$e.isInstance(s))return o;let{statusCode:i,body:c}=s;if(i<200||i>=300||!(typeof c?.stream=="function"||typeof c?.pipe=="function"||typeof c?.tee=="function"))return o;let d=c,m=c;c&&typeof c=="object"&&!(c instanceof Uint8Array)&&([d,m]=await ay(c)),s.body=m;let u=await eN(d,{streamCollector:async g=>fy(g,JO)});typeof d?.destroy=="function"&&d.destroy();let h=e.utf8Encoder(u.subarray(u.length-16));if(u.length===0&&QO[r.commandName]){let g=new Error("S3 aborted request");throw g.name="InternalError",g}return h&&h.endsWith("</Error>")&&(s.statusCode=400),o},eN=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),tN={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},CS=e=>({applyToStack:t=>{t.addRelativeTo(ZO(e),tN)}});var Kd=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function bS(e){return(t,r)=>async n=>{if(e.bucketEndpoint){let o=r.endpointV2;if(o){let s=n.input.Bucket;if(typeof s=="string")try{let i=new URL(s);r.endpointV2={...o,url:i}}catch(i){let c=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${s} could not be parsed as URL.`;throw r.logger?.constructor?.name==="NoOpLogger"?console.warn(c):r.logger?.warn?.(c),i}}}return t(n)}}var wS={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function rN({bucketEndpoint:e}){return t=>async r=>{let{input:{Bucket:n}}=r;if(!e&&typeof n=="string"&&!Kd(n)&&n.indexOf("/")>=0){let o=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw o.name="InvalidBucketName",o}return t({...r})}}var nN={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},AS=e=>({applyToStack:t=>{t.add(rN(e),nN),t.addRelativeTo(bS(e),wS)}});Bo();tr();Ce();var cC=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)});Gs();ae();br();v();Ee();var sc={CrtSignerV4:null};var ic=class{constructor(t){this.sigv4Signer=new Ls(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async signWithCredentials(t,r,n={}){if(n.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().signWithCredentials(t,r,n)}return this.sigv4Signer.signWithCredentials(t,r,n)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}async presignWithCredentials(t,r,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(t,r,n)}getSigv4aSigner(){if(!this.sigv4aSigner){let t=null;try{if(t=sc.CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}};ae();Ge();Do();Zt();var sm="required",f="type",p="conditions",y="fn",E="argv",N="ref",fe="assign",w="url",A="properties",Rw="backend",Gt="authSchemes",ft="disableDoubleEncoding",mt="signingName",sr="signingRegion",R="headers",im="signingRegionSet";var At="isSet",Ie="booleanEquals",T="error",uc="aws.partition",ie="stringEquals",he="getAttr",Fe="name",nr="substring",Rb="bucketSuffix",Tw="parseURL",Tb="{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",_="endpoint",S="tree",Iw="aws.isVirtualHostableS3Bucket",dc="{url#scheme}://{Bucket}.{url#authority}{url#path}",or="not",fc="{url#scheme}://{url#authority}{url#path}",vw="hardwareType",kw="regionPrefix",Ib="bucketAliasSuffix",nm="outpostId",no="isValidHostLabel",am="sigv4a",Ys="s3-outposts",zo="s3",Pw="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",Ow="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",vb="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Nw="aws.parseArn",Dw="bucketArn",Bw="arnType",pc="",cm="s3-object-lambda",Fw="accesspoint",lm="accessPointName",kb="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",Pb="mrapPartition",Ob="outpostType",Nb="arnPrefix",Mw="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",Db="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",Bb="https://s3.{partitionResult#dnsSuffix}",Ho={[sm]:!1,[f]:"String"},qo={[sm]:!0,default:!1,[f]:"Boolean"},Ws={[sm]:!1,[f]:"Boolean"},qt={[y]:Ie,[E]:[{[N]:"Accelerate"},!0]},se={[y]:Ie,[E]:[{[N]:"UseFIPS"},!0]},oe={[y]:Ie,[E]:[{[N]:"UseDualStack"},!0]},Se={[y]:At,[E]:[{[N]:"Endpoint"}]},Lw={[y]:uc,[E]:[{[N]:"Region"}],[fe]:"partitionResult"},Fb={[y]:ie,[E]:[{[y]:he,[E]:[{[N]:"partitionResult"},Fe]},"aws-cn"]},hc={[y]:At,[E]:[{[N]:"Bucket"}]},Xe={[N]:"Bucket"},We={[y]:Tw,[E]:[{[N]:"Endpoint"}],[fe]:"url"},mc={[y]:Ie,[E]:[{[y]:he,[E]:[{[N]:"url"},"isIp"]},!0]},Uw={[N]:"url"},$w={[y]:"uriEncode",[E]:[Xe],[fe]:"uri_encoded_bucket"},wr={[Rw]:"S3Express",[Gt]:[{[ft]:!0,[Fe]:"sigv4",[mt]:"s3express",[sr]:"{Region}"}]},D={},Hw={[y]:Iw,[E]:[Xe,!1]},Df={[T]:"S3Express bucket name is not a valid virtual hostable name.",[f]:T},gc={[Rw]:"S3Express",[Gt]:[{[ft]:!0,[Fe]:"sigv4-s3express",[mt]:"s3express",[sr]:"{Region}"}]},Mb={[y]:At,[E]:[{[N]:"UseS3ExpressControlEndpoint"}]},Lb={[y]:Ie,[E]:[{[N]:"UseS3ExpressControlEndpoint"},!0]},F={[y]:or,[E]:[Se]},Ub={[T]:"Unrecognized S3Express bucket name format.",[f]:T},$b={[y]:or,[E]:[hc]},Hb={[N]:vw},qb={[p]:[F],[T]:"Expected a endpoint to be specified but no endpoint was found",[f]:T},ac={[Gt]:[{[ft]:!0,[Fe]:am,[mt]:Ys,[im]:["*"]},{[ft]:!0,[Fe]:"sigv4",[mt]:Ys,[sr]:"{Region}"}]},Bf={[y]:Ie,[E]:[{[N]:"ForcePathStyle"},!1]},sD={[N]:"ForcePathStyle"},xe={[y]:Ie,[E]:[{[N]:"Accelerate"},!1]},be={[y]:ie,[E]:[{[N]:"Region"},"aws-global"]},Ae={[Gt]:[{[ft]:!0,[Fe]:"sigv4",[mt]:zo,[sr]:"us-east-1"}]},W={[y]:or,[E]:[be]},Re={[y]:Ie,[E]:[{[N]:"UseGlobalEndpoint"},!0]},Gb={[w]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[A]:{[Gt]:[{[ft]:!0,[Fe]:"sigv4",[mt]:zo,[sr]:"{Region}"}]},[R]:{}},_e={[Gt]:[{[ft]:!0,[Fe]:"sigv4",[mt]:zo,[sr]:"{Region}"}]},Te={[y]:Ie,[E]:[{[N]:"UseGlobalEndpoint"},!1]},z={[y]:Ie,[E]:[{[N]:"UseDualStack"},!1]},zb={[w]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[R]:{}},q={[y]:Ie,[E]:[{[N]:"UseFIPS"},!1]},Kb={[w]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[A]:_e,[R]:{}},jb={[w]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[R]:{}},Ff={[y]:Ie,[E]:[{[y]:he,[E]:[Uw,"isIp"]},!1]},Mf={[w]:Pw,[A]:_e,[R]:{}},om={[w]:dc,[A]:_e,[R]:{}},Vb={[_]:om,[f]:_},Lf={[w]:Ow,[A]:_e,[R]:{}},Wb={[w]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[R]:{}},cc={[T]:"Invalid region: region was not a valid DNS name.",[f]:T},it={[N]:Dw},qw={[N]:Bw},Uf={[y]:he,[E]:[it,"service"]},dm={[N]:lm},Xb={[p]:[oe],[T]:"S3 Object Lambda does not support Dual-stack",[f]:T},Yb={[p]:[qt],[T]:"S3 Object Lambda does not support S3 Accelerate",[f]:T},Qb={[p]:[{[y]:At,[E]:[{[N]:"DisableAccessPoints"}]},{[y]:Ie,[E]:[{[N]:"DisableAccessPoints"},!0]}],[T]:"Access points are not supported for this operation",[f]:T},$f={[p]:[{[y]:At,[E]:[{[N]:"UseArnRegion"}]},{[y]:Ie,[E]:[{[N]:"UseArnRegion"},!1]},{[y]:or,[E]:[{[y]:ie,[E]:[{[y]:he,[E]:[it,"region"]},"{Region}"]}]}],[T]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[f]:T},Gw={[y]:he,[E]:[{[N]:"bucketPartition"},Fe]},zw={[y]:he,[E]:[it,"accountId"]},Hf={[Gt]:[{[ft]:!0,[Fe]:"sigv4",[mt]:cm,[sr]:"{bucketArn#region}"}]},Jb={[T]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[f]:T},qf={[T]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[f]:T},Gf={[T]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[f]:T},zf={[T]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[f]:T},Zb={[T]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[f]:T},ew={[T]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[f]:T},Xs={[Gt]:[{[ft]:!0,[Fe]:"sigv4",[mt]:zo,[sr]:"{bucketArn#region}"}]},tw={[Gt]:[{[ft]:!0,[Fe]:am,[mt]:Ys,[im]:["*"]},{[ft]:!0,[Fe]:"sigv4",[mt]:Ys,[sr]:"{bucketArn#region}"}]},rw={[y]:Nw,[E]:[Xe]},nw={[w]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:_e,[R]:{}},ow={[w]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:_e,[R]:{}},sw={[w]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:_e,[R]:{}},Kf={[w]:Mw,[A]:_e,[R]:{}},iw={[w]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:_e,[R]:{}},aw={[N]:"UseObjectLambdaEndpoint"},jf={[Gt]:[{[ft]:!0,[Fe]:"sigv4",[mt]:cm,[sr]:"{Region}"}]},cw={[w]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[R]:{}},lw={[w]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[R]:{}},dw={[w]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[R]:{}},Vf={[w]:fc,[A]:_e,[R]:{}},fw={[w]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[A]:_e,[R]:{}},Wf=[{[N]:"Region"}],iD=[{[N]:"Endpoint"}],aD=[Xe],Xf=[oe],lc=[qt],ro=[Se,We],mw=[{[y]:At,[E]:[{[N]:"DisableS3ExpressSessionAuth"}]},{[y]:Ie,[E]:[{[N]:"DisableS3ExpressSessionAuth"},!0]}],uw=[mc],Yf=[$w],Qf=[Hw],Go=[se],pw=[{[y]:nr,[E]:[Xe,6,14,!0],[fe]:"s3expressAvailabilityZoneId"},{[y]:nr,[E]:[Xe,14,16,!0],[fe]:"s3expressAvailabilityZoneDelim"},{[y]:ie,[E]:[{[N]:"s3expressAvailabilityZoneDelim"},"--"]}],hw=[{[p]:[se],[_]:{[w]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[A]:wr,[R]:{}},[f]:_},{[_]:{[w]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[A]:wr,[R]:{}},[f]:_}],gw=[{[y]:nr,[E]:[Xe,6,15,!0],[fe]:"s3expressAvailabilityZoneId"},{[y]:nr,[E]:[Xe,15,17,!0],[fe]:"s3expressAvailabilityZoneDelim"},{[y]:ie,[E]:[{[N]:"s3expressAvailabilityZoneDelim"},"--"]}],yw=[{[p]:[se],[_]:{[w]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[A]:gc,[R]:{}},[f]:_},{[_]:{[w]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[A]:gc,[R]:{}},[f]:_}],cD=[hc],Ew=[{[y]:no,[E]:[{[N]:nm},!1]}],xw=[{[y]:ie,[E]:[{[N]:kw},"beta"]}],lD=["*"],pn=[Lw],Sw=[{[y]:no,[E]:[{[N]:"Region"},!1]}],hn=[{[y]:ie,[E]:[{[N]:"Region"},"us-east-1"]}],Jf=[{[y]:ie,[E]:[qw,Fw]}],_w=[{[y]:he,[E]:[it,"resourceId[1]"],[fe]:lm},{[y]:or,[E]:[{[y]:ie,[E]:[dm,pc]}]}],dD=[it,"resourceId[1]"],Zf=[{[y]:or,[E]:[{[y]:ie,[E]:[{[y]:he,[E]:[it,"region"]},pc]}]}],Cw=[{[y]:or,[E]:[{[y]:At,[E]:[{[y]:he,[E]:[it,"resourceId[2]"]}]}]}],fD=[it,"resourceId[2]"],em=[{[y]:uc,[E]:[{[y]:he,[E]:[it,"region"]}],[fe]:"bucketPartition"}],bw=[{[y]:ie,[E]:[Gw,{[y]:he,[E]:[{[N]:"partitionResult"},Fe]}]}],tm=[{[y]:no,[E]:[{[y]:he,[E]:[it,"region"]},!0]}],rm=[{[y]:no,[E]:[zw,!1]}],ww=[{[y]:no,[E]:[dm,!1]}],Aw=[{[y]:no,[E]:[{[N]:"Region"},!0]}],mD={version:"1.0",parameters:{Bucket:Ho,Region:Ho,UseFIPS:qo,UseDualStack:qo,Endpoint:Ho,ForcePathStyle:qo,Accelerate:qo,UseGlobalEndpoint:qo,UseObjectLambdaEndpoint:Ws,Key:Ho,Prefix:Ho,CopySource:Ho,DisableAccessPoints:Ws,DisableMultiRegionAccessPoints:qo,UseArnRegion:Ws,UseS3ExpressControlEndpoint:Ws,DisableS3ExpressSessionAuth:Ws},rules:[{[p]:[{[y]:At,[E]:Wf}],rules:[{[p]:[qt,se],error:"Accelerate cannot be used with FIPS",[f]:T},{[p]:[oe,Se],error:"Cannot set dual-stack in combination with a custom endpoint.",[f]:T},{[p]:[Se,se],error:"A custom endpoint cannot be combined with FIPS",[f]:T},{[p]:[Se,qt],error:"A custom endpoint cannot be combined with S3 Accelerate",[f]:T},{[p]:[se,Lw,Fb],error:"Partition does not support FIPS",[f]:T},{[p]:[hc,{[y]:nr,[E]:[Xe,0,6,!0],[fe]:Rb},{[y]:ie,[E]:[{[N]:Rb},"--x-s3"]}],rules:[{[p]:Xf,error:"S3Express does not support Dual-stack.",[f]:T},{[p]:lc,error:"S3Express does not support S3 Accelerate.",[f]:T},{[p]:ro,rules:[{[p]:mw,rules:[{[p]:uw,rules:[{[p]:Yf,rules:[{endpoint:{[w]:Tb,[A]:wr,[R]:D},[f]:_}],[f]:S}],[f]:S},{[p]:Qf,rules:[{endpoint:{[w]:dc,[A]:wr,[R]:D},[f]:_}],[f]:S},Df],[f]:S},{[p]:uw,rules:[{[p]:Yf,rules:[{endpoint:{[w]:Tb,[A]:gc,[R]:D},[f]:_}],[f]:S}],[f]:S},{[p]:Qf,rules:[{endpoint:{[w]:dc,[A]:gc,[R]:D},[f]:_}],[f]:S},Df],[f]:S},{[p]:[Mb,Lb],rules:[{[p]:[$w,F],rules:[{[p]:Go,endpoint:{[w]:"https://s3express-control-fips.{Region}.amazonaws.com/{uri_encoded_bucket}",[A]:wr,[R]:D},[f]:_},{endpoint:{[w]:"https://s3express-control.{Region}.amazonaws.com/{uri_encoded_bucket}",[A]:wr,[R]:D},[f]:_}],[f]:S}],[f]:S},{[p]:Qf,rules:[{[p]:mw,rules:[{[p]:pw,rules:hw,[f]:S},{[p]:gw,rules:hw,[f]:S},Ub],[f]:S},{[p]:pw,rules:yw,[f]:S},{[p]:gw,rules:yw,[f]:S},Ub],[f]:S},Df],[f]:S},{[p]:[$b,Mb,Lb],rules:[{[p]:ro,endpoint:{[w]:fc,[A]:wr,[R]:D},[f]:_},{[p]:Go,endpoint:{[w]:"https://s3express-control-fips.{Region}.amazonaws.com",[A]:wr,[R]:D},[f]:_},{endpoint:{[w]:"https://s3express-control.{Region}.amazonaws.com",[A]:wr,[R]:D},[f]:_}],[f]:S},{[p]:[hc,{[y]:nr,[E]:[Xe,49,50,!0],[fe]:vw},{[y]:nr,[E]:[Xe,8,12,!0],[fe]:kw},{[y]:nr,[E]:[Xe,0,7,!0],[fe]:Ib},{[y]:nr,[E]:[Xe,32,49,!0],[fe]:nm},{[y]:uc,[E]:Wf,[fe]:"regionPartition"},{[y]:ie,[E]:[{[N]:Ib},"--op-s3"]}],rules:[{[p]:Ew,rules:[{[p]:[{[y]:ie,[E]:[Hb,"e"]}],rules:[{[p]:xw,rules:[qb,{[p]:ro,endpoint:{[w]:"https://{Bucket}.ec2.{url#authority}",[A]:ac,[R]:D},[f]:_}],[f]:S},{endpoint:{[w]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[A]:ac,[R]:D},[f]:_}],[f]:S},{[p]:[{[y]:ie,[E]:[Hb,"o"]}],rules:[{[p]:xw,rules:[qb,{[p]:ro,endpoint:{[w]:"https://{Bucket}.op-{outpostId}.{url#authority}",[A]:ac,[R]:D},[f]:_}],[f]:S},{endpoint:{[w]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[A]:ac,[R]:D},[f]:_}],[f]:S},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[f]:T}],[f]:S},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[f]:T}],[f]:S},{[p]:cD,rules:[{[p]:[Se,{[y]:or,[E]:[{[y]:At,[E]:[{[y]:Tw,[E]:iD}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[f]:T},{[p]:[Bf,Hw],rules:[{[p]:pn,rules:[{[p]:Sw,rules:[{[p]:[qt,Fb],error:"S3 Accelerate cannot be used in this region",[f]:T},{[p]:[oe,se,xe,F,be],endpoint:{[w]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[A]:Ae,[R]:D},[f]:_},{[p]:[oe,se,xe,F,W,Re],rules:[{endpoint:Gb,[f]:_}],[f]:S},{[p]:[oe,se,xe,F,W,Te],endpoint:Gb,[f]:_},{[p]:[z,se,xe,F,be],endpoint:{[w]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[A]:Ae,[R]:D},[f]:_},{[p]:[z,se,xe,F,W,Re],rules:[{endpoint:zb,[f]:_}],[f]:S},{[p]:[z,se,xe,F,W,Te],endpoint:zb,[f]:_},{[p]:[oe,q,qt,F,be],endpoint:{[w]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[A]:Ae,[R]:D},[f]:_},{[p]:[oe,q,qt,F,W,Re],rules:[{endpoint:Kb,[f]:_}],[f]:S},{[p]:[oe,q,qt,F,W,Te],endpoint:Kb,[f]:_},{[p]:[oe,q,xe,F,be],endpoint:{[w]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[A]:Ae,[R]:D},[f]:_},{[p]:[oe,q,xe,F,W,Re],rules:[{endpoint:jb,[f]:_}],[f]:S},{[p]:[oe,q,xe,F,W,Te],endpoint:jb,[f]:_},{[p]:[z,q,xe,Se,We,mc,be],endpoint:{[w]:Pw,[A]:Ae,[R]:D},[f]:_},{[p]:[z,q,xe,Se,We,Ff,be],endpoint:{[w]:dc,[A]:Ae,[R]:D},[f]:_},{[p]:[z,q,xe,Se,We,mc,W,Re],rules:[{[p]:hn,endpoint:Mf,[f]:_},{endpoint:Mf,[f]:_}],[f]:S},{[p]:[z,q,xe,Se,We,Ff,W,Re],rules:[{[p]:hn,endpoint:om,[f]:_},Vb],[f]:S},{[p]:[z,q,xe,Se,We,mc,W,Te],endpoint:Mf,[f]:_},{[p]:[z,q,xe,Se,We,Ff,W,Te],endpoint:om,[f]:_},{[p]:[z,q,qt,F,be],endpoint:{[w]:Ow,[A]:Ae,[R]:D},[f]:_},{[p]:[z,q,qt,F,W,Re],rules:[{[p]:hn,endpoint:Lf,[f]:_},{endpoint:Lf,[f]:_}],[f]:S},{[p]:[z,q,qt,F,W,Te],endpoint:Lf,[f]:_},{[p]:[z,q,xe,F,be],endpoint:{[w]:vb,[A]:Ae,[R]:D},[f]:_},{[p]:[z,q,xe,F,W,Re],rules:[{[p]:hn,endpoint:{[w]:vb,[A]:_e,[R]:D},[f]:_},{endpoint:Wb,[f]:_}],[f]:S},{[p]:[z,q,xe,F,W,Te],endpoint:Wb,[f]:_}],[f]:S},cc],[f]:S}],[f]:S},{[p]:[Se,We,{[y]:ie,[E]:[{[y]:he,[E]:[Uw,"scheme"]},"http"]},{[y]:Iw,[E]:[Xe,!0]},Bf,q,z,xe],rules:[{[p]:pn,rules:[{[p]:Sw,rules:[Vb],[f]:S},cc],[f]:S}],[f]:S},{[p]:[Bf,{[y]:Nw,[E]:aD,[fe]:Dw}],rules:[{[p]:[{[y]:he,[E]:[it,"resourceId[0]"],[fe]:Bw},{[y]:or,[E]:[{[y]:ie,[E]:[qw,pc]}]}],rules:[{[p]:[{[y]:ie,[E]:[Uf,cm]}],rules:[{[p]:Jf,rules:[{[p]:_w,rules:[Xb,Yb,{[p]:Zf,rules:[Qb,{[p]:Cw,rules:[$f,{[p]:em,rules:[{[p]:pn,rules:[{[p]:bw,rules:[{[p]:tm,rules:[{[p]:[{[y]:ie,[E]:[zw,pc]}],error:"Invalid ARN: Missing account id",[f]:T},{[p]:rm,rules:[{[p]:ww,rules:[{[p]:ro,endpoint:{[w]:kb,[A]:Hf,[R]:D},[f]:_},{[p]:Go,endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:Hf,[R]:D},[f]:_},{endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:Hf,[R]:D},[f]:_}],[f]:S},Jb],[f]:S},qf],[f]:S},Gf],[f]:S},zf],[f]:S}],[f]:S}],[f]:S},Zb],[f]:S},{error:"Invalid ARN: bucket ARN is missing a region",[f]:T}],[f]:S},ew],[f]:S},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[f]:T}],[f]:S},{[p]:Jf,rules:[{[p]:_w,rules:[{[p]:Zf,rules:[{[p]:Jf,rules:[{[p]:Zf,rules:[Qb,{[p]:Cw,rules:[$f,{[p]:em,rules:[{[p]:pn,rules:[{[p]:[{[y]:ie,[E]:[Gw,"{partitionResult#name}"]}],rules:[{[p]:tm,rules:[{[p]:[{[y]:ie,[E]:[Uf,zo]}],rules:[{[p]:rm,rules:[{[p]:ww,rules:[{[p]:lc,error:"Access Points do not support S3 Accelerate",[f]:T},{[p]:[se,oe],endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:Xs,[R]:D},[f]:_},{[p]:[se,z],endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:Xs,[R]:D},[f]:_},{[p]:[q,oe],endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:Xs,[R]:D},[f]:_},{[p]:[q,z,Se,We],endpoint:{[w]:kb,[A]:Xs,[R]:D},[f]:_},{[p]:[q,z],endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:Xs,[R]:D},[f]:_}],[f]:S},Jb],[f]:S},qf],[f]:S},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[f]:T}],[f]:S},Gf],[f]:S},zf],[f]:S}],[f]:S}],[f]:S},Zb],[f]:S}],[f]:S}],[f]:S},{[p]:[{[y]:no,[E]:[dm,!0]}],rules:[{[p]:Xf,error:"S3 MRAP does not support dual-stack",[f]:T},{[p]:Go,error:"S3 MRAP does not support FIPS",[f]:T},{[p]:lc,error:"S3 MRAP does not support S3 Accelerate",[f]:T},{[p]:[{[y]:Ie,[E]:[{[N]:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[f]:T},{[p]:[{[y]:uc,[E]:Wf,[fe]:Pb}],rules:[{[p]:[{[y]:ie,[E]:[{[y]:he,[E]:[{[N]:Pb},Fe]},{[y]:he,[E]:[it,"partition"]}]}],rules:[{endpoint:{[w]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[A]:{[Gt]:[{[ft]:!0,name:am,[mt]:zo,[im]:lD}]},[R]:D},[f]:_}],[f]:S},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[f]:T}],[f]:S}],[f]:S},{error:"Invalid Access Point Name",[f]:T}],[f]:S},ew],[f]:S},{[p]:[{[y]:ie,[E]:[Uf,Ys]}],rules:[{[p]:Xf,error:"S3 Outposts does not support Dual-stack",[f]:T},{[p]:Go,error:"S3 Outposts does not support FIPS",[f]:T},{[p]:lc,error:"S3 Outposts does not support S3 Accelerate",[f]:T},{[p]:[{[y]:At,[E]:[{[y]:he,[E]:[it,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[f]:T},{[p]:[{[y]:he,[E]:dD,[fe]:nm}],rules:[{[p]:Ew,rules:[$f,{[p]:em,rules:[{[p]:pn,rules:[{[p]:bw,rules:[{[p]:tm,rules:[{[p]:rm,rules:[{[p]:[{[y]:he,[E]:fD,[fe]:Ob}],rules:[{[p]:[{[y]:he,[E]:[it,"resourceId[3]"],[fe]:lm}],rules:[{[p]:[{[y]:ie,[E]:[{[N]:Ob},Fw]}],rules:[{[p]:ro,endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[A]:tw,[R]:D},[f]:_},{endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[A]:tw,[R]:D},[f]:_}],[f]:S},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[f]:T}],[f]:S},{error:"Invalid ARN: expected an access point name",[f]:T}],[f]:S},{error:"Invalid ARN: Expected a 4-component resource",[f]:T}],[f]:S},qf],[f]:S},Gf],[f]:S},zf],[f]:S}],[f]:S}],[f]:S},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[f]:T}],[f]:S},{error:"Invalid ARN: The Outpost Id was not set",[f]:T}],[f]:S},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[f]:T}],[f]:S},{error:"Invalid ARN: No ARN type specified",[f]:T}],[f]:S},{[p]:[{[y]:nr,[E]:[Xe,0,4,!1],[fe]:Nb},{[y]:ie,[E]:[{[N]:Nb},"arn:"]},{[y]:or,[E]:[{[y]:At,[E]:[rw]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[f]:T},{[p]:[{[y]:Ie,[E]:[sD,!0]},rw],error:"Path-style addressing cannot be used with ARN buckets",[f]:T},{[p]:Yf,rules:[{[p]:pn,rules:[{[p]:[xe],rules:[{[p]:[oe,F,se,be],endpoint:{[w]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:Ae,[R]:D},[f]:_},{[p]:[oe,F,se,W,Re],rules:[{endpoint:nw,[f]:_}],[f]:S},{[p]:[oe,F,se,W,Te],endpoint:nw,[f]:_},{[p]:[z,F,se,be],endpoint:{[w]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:Ae,[R]:D},[f]:_},{[p]:[z,F,se,W,Re],rules:[{endpoint:ow,[f]:_}],[f]:S},{[p]:[z,F,se,W,Te],endpoint:ow,[f]:_},{[p]:[oe,F,q,be],endpoint:{[w]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[A]:Ae,[R]:D},[f]:_},{[p]:[oe,F,q,W,Re],rules:[{endpoint:sw,[f]:_}],[f]:S},{[p]:[oe,F,q,W,Te],endpoint:sw,[f]:_},{[p]:[z,Se,We,q,be],endpoint:{[w]:Mw,[A]:Ae,[R]:D},[f]:_},{[p]:[z,Se,We,q,W,Re],rules:[{[p]:hn,endpoint:Kf,[f]:_},{endpoint:Kf,[f]:_}],[f]:S},{[p]:[z,Se,We,q,W,Te],endpoint:Kf,[f]:_},{[p]:[z,F,q,be],endpoint:{[w]:Db,[A]:Ae,[R]:D},[f]:_},{[p]:[z,F,q,W,Re],rules:[{[p]:hn,endpoint:{[w]:Db,[A]:_e,[R]:D},[f]:_},{endpoint:iw,[f]:_}],[f]:S},{[p]:[z,F,q,W,Te],endpoint:iw,[f]:_}],[f]:S},{error:"Path-style addressing cannot be used with S3 Accelerate",[f]:T}],[f]:S}],[f]:S}],[f]:S},{[p]:[{[y]:At,[E]:[aw]},{[y]:Ie,[E]:[aw,!0]}],rules:[{[p]:pn,rules:[{[p]:Aw,rules:[Xb,Yb,{[p]:ro,endpoint:{[w]:fc,[A]:jf,[R]:D},[f]:_},{[p]:Go,endpoint:{[w]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[A]:jf,[R]:D},[f]:_},{endpoint:{[w]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[A]:jf,[R]:D},[f]:_}],[f]:S},cc],[f]:S}],[f]:S},{[p]:[$b],rules:[{[p]:pn,rules:[{[p]:Aw,rules:[{[p]:[se,oe,F,be],endpoint:{[w]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[A]:Ae,[R]:D},[f]:_},{[p]:[se,oe,F,W,Re],rules:[{endpoint:cw,[f]:_}],[f]:S},{[p]:[se,oe,F,W,Te],endpoint:cw,[f]:_},{[p]:[se,z,F,be],endpoint:{[w]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[A]:Ae,[R]:D},[f]:_},{[p]:[se,z,F,W,Re],rules:[{endpoint:lw,[f]:_}],[f]:S},{[p]:[se,z,F,W,Te],endpoint:lw,[f]:_},{[p]:[q,oe,F,be],endpoint:{[w]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[A]:Ae,[R]:D},[f]:_},{[p]:[q,oe,F,W,Re],rules:[{endpoint:dw,[f]:_}],[f]:S},{[p]:[q,oe,F,W,Te],endpoint:dw,[f]:_},{[p]:[q,z,Se,We,be],endpoint:{[w]:fc,[A]:Ae,[R]:D},[f]:_},{[p]:[q,z,Se,We,W,Re],rules:[{[p]:hn,endpoint:Vf,[f]:_},{endpoint:Vf,[f]:_}],[f]:S},{[p]:[q,z,Se,We,W,Te],endpoint:Vf,[f]:_},{[p]:[q,z,F,be],endpoint:{[w]:Bb,[A]:Ae,[R]:D},[f]:_},{[p]:[q,z,F,W,Re],rules:[{[p]:hn,endpoint:{[w]:Bb,[A]:_e,[R]:D},[f]:_},{endpoint:fw,[f]:_}],[f]:S},{[p]:[q,z,F,W,Te],endpoint:fw,[f]:_}],[f]:S},cc],[f]:S}],[f]:S}],[f]:S},{error:"A region must be set when sending requests to S3.",[f]:T}]},Kw=mD;var uD=new Jt({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),yc=(e,t={})=>uD.get(e,()=>Sr(Kw,{endpointParams:e,logger:t.logger}));dt.aws=_r;var pD=e=>async(t,r,n)=>{if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");let o=await e(t,r,n),s=ke(r)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!s)throw new Error(`getEndpointParameterInstructions() is not defined on \`${r.commandName}\``);let i=await Sf(n,{getEndpointParameterInstructions:s},t);return Object.assign(o,i)},hD=async(e,t,r)=>({operation:ke(t).operation,region:await de(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),jw=pD(hD);function Vw(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Ww(e){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var gD=(e,t,r)=>o=>{let i=e(o).properties?.authSchemes;if(!i)return t(o);let c=[];for(let l of i){let{name:d,properties:m={},...u}=l,h=d.toLowerCase();d!==h&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${d}\` to \`${h}\``);let g;if(h==="sigv4a"){g="aws.auth#sigv4a";let b=i.find(P=>{let X=P.name.toLowerCase();return X!=="sigv4a"&&X.startsWith("sigv4")});if(!sc.CrtSignerV4&&b)continue}else if(h.startsWith("sigv4"))g="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${h}\``);let x=r[g];if(!x)throw new Error(`Could not find HttpAuthOption create function for \`${g}\``);let I=x(o);I.schemeId=g,I.signingProperties={...I.signingProperties||{},...u,...m},c.push(I)}return c},yD=e=>{let t=[];switch(e.operation){default:t.push(Vw(e)),t.push(Ww(e))}return t},Xw=gD(yc,yD,{"aws.auth#sigv4":Vw,"aws.auth#sigv4a":Ww}),Yw=e=>{let t=Hr(e);return{...My(t)}};ae();me();v();var Qw=e=>({...e,useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),Ec={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};v();v();var Ye=class e extends Yt{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var xc=class e extends Ye{constructor(t){super({name:"NoSuchUpload",$fault:"client",...t}),this.name="NoSuchUpload",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var Sc=class e extends Ye{constructor(t){super({name:"ObjectNotInActiveTierError",$fault:"client",...t}),this.name="ObjectNotInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},_c=class e extends Ye{constructor(t){super({name:"BucketAlreadyExists",$fault:"client",...t}),this.name="BucketAlreadyExists",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Cc=class e extends Ye{constructor(t){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...t}),this.name="BucketAlreadyOwnedByYou",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var bc=class e extends Ye{constructor(t){super({name:"NoSuchBucket",$fault:"client",...t}),this.name="NoSuchBucket",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},fm;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(fm||(fm={}));var mm;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(mm||(mm={}));var wc=class e extends Ye{constructor(t){super({name:"InvalidObjectState",$fault:"client",...t}),this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.StorageClass=t.StorageClass,this.AccessTier=t.AccessTier}},Ac=class e extends Ye{constructor(t){super({name:"NoSuchKey",$fault:"client",...t}),this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var Rc=class e extends Ye{constructor(t){super({name:"NotFound",$fault:"client",...t}),this.name="NotFound",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var ED=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:G},...e.SessionToken&&{SessionToken:G}}),Jw=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:G},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:G},...e.Credentials&&{Credentials:ED(e.Credentials)}}),Zw=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:G},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:G}});var eA=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:G}}),tA=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:G}});Ee();Ce();K();v();v();var Tc=class e extends Ye{constructor(t){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...t}),this.name="ObjectAlreadyInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var rA;(function(e){e.visit=(t,r)=>t.Records!==void 0?r.Records(t.Records):t.Stats!==void 0?r.Stats(t.Stats):t.Progress!==void 0?r.Progress(t.Progress):t.Cont!==void 0?r.Cont(t.Cont):t.End!==void 0?r.End(t.End):r._(t.$unknown[0],t.$unknown[1])})(rA||(rA={}));var uA=async(e,t)=>{let r=nt(e,t),n=O({},Ut,{[VB]:e[hB],[Sm]:e[Em],[_m]:e[xm],[CA]:e[SA],[Qs]:[()=>Ut(e[kc]),()=>e[kc].toString()]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let o=O({[$B]:[,""]}),s;return r.m("GET").h(n).q(o).b(s),r.build()};var pA=async(e,t)=>{let r=nt(e,t),n=O({},Ut,{[IB]:e[XD],[vB]:[()=>Ut(e[nA]),()=>ya(e[nA]).toString()],[kB]:e[YD],[PB]:[()=>Ut(e[oA]),()=>ya(e[oA]).toString()],[NB]:e[oB],[bA]:e[EA],[n3]:e[gB],[wA]:e[xA],[e3]:e[mB],[XB]:e[jD],[zB]:e[UD]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let o=O({[i3]:[,"GetObject"],[DB]:[,e[iB]],[BB]:[,e[aB]],[FB]:[,e[cB]],[MB]:[,e[lB]],[LB]:[,e[dB]],[UB]:[()=>e.ResponseExpires!==void 0,()=>ya(e[fB]).toString()],[HB]:[,e[_A]],[OB]:[()=>e.PartNumber!==void 0,()=>e[nB].toString()]}),s;return r.m("GET").h(n).q(o).b(s),r.build()};var hA=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return yA(e,t);let r=O({$metadata:zt(e),[Em]:[,e.headers[Sm]],[xm]:[,e.headers[_m]],[SA]:[,e.headers[CA]],[kc]:[()=>e.headers[Qs]!==void 0,()=>ga(e.headers[Qs])]}),n=ye(Lt(await xt(e.body,t)),"body");return n[hm]!=null&&(r[hm]=kD(n[hm],t)),r};var gA=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return yA(e,t);let r=O({$metadata:zt(e),[zD]:[()=>e.headers[cA]!==void 0,()=>ga(e.headers[cA])],[PD]:[,e.headers[xB]],[Ic]:[,e.headers[WB]],[pB]:[,e.headers[JB]],[QD]:[()=>e.headers[aA]!==void 0,()=>ye(Rs(e.headers[aA]))],[LD]:[()=>e.headers[sA]!==void 0,()=>TE(e.headers[sA])],[WD]:[,e.headers[RB]],[ND]:[,e.headers[qB]],[DD]:[,e.headers[GB]],[HD]:[,e.headers[KB]],[qD]:[,e.headers[jB]],[JD]:[()=>e.headers[lA]!==void 0,()=>yr(e.headers[lA])],[_A]:[,e.headers[o3]],[OD]:[,e.headers[SB]],[BD]:[,e.headers[_B]],[FD]:[,e.headers[CB]],[MD]:[,e.headers[bB]],[$D]:[,e.headers[wB]],[GD]:[,e.headers[AB]],[KD]:[()=>e.headers[iA]!==void 0,()=>ye(Rs(e.headers[iA]))],[VD]:[,e.headers[TB]],[EB]:[,e.headers[s3]],[Em]:[,e.headers[Sm]],[EA]:[,e.headers[bA]],[xA]:[,e.headers[wA]],[xm]:[,e.headers[_m]],[kc]:[()=>e.headers[Qs]!==void 0,()=>ga(e.headers[Qs])],[vc]:[,e.headers[r3]],[sB]:[,e.headers[ZB]],[uB]:[,e.headers[t3]],[rB]:[()=>e.headers[dA]!==void 0,()=>yr(e.headers[dA])],[yB]:[()=>e.headers[mA]!==void 0,()=>yr(e.headers[mA])],[eB]:[,e.headers[QB]],[tB]:[()=>e.headers[fA]!==void 0,()=>ye(As(e.headers[fA]))],[ZD]:[,e.headers[YB]],Metadata:[,Object.keys(e.headers).filter(o=>o.startsWith("x-amz-meta-")).reduce((o,s)=>(o[s.substring(11)]=e.headers[s],o),{})]}),n=e.body;return t.sdkStreamMixin(n),r.Body=n,r};var yA=async(e,t)=>{let r={...e,body:await Ca(e.body,t)},n=$x(e,r.body);switch(n){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await RD(r,t);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await vD(r,t);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await _D(r,t);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await CD(r,t);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await wD(r,t);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await bD(r,t);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await AD(r,t);case"NotFound":case"com.amazonaws.s3#NotFound":throw await TD(r,t);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await ID(r,t);default:let o=r.body;return SD({output:e,parsedBody:o,errorCode:n})}},SD=Gr(Ye),_D=async(e,t)=>{let r=O({}),n=e.body,o=new _c({$metadata:zt(e),...r});return $(o,e.body)},CD=async(e,t)=>{let r=O({}),n=e.body,o=new Cc({$metadata:zt(e),...r});return $(o,e.body)},bD=async(e,t)=>{let r=O({}),n=e.body;n[pm]!=null&&(r[pm]=C(n[pm])),n[vc]!=null&&(r[vc]=C(n[vc]));let o=new wc({$metadata:zt(e),...r});return $(o,e.body)},wD=async(e,t)=>{let r=O({}),n=e.body,o=new bc({$metadata:zt(e),...r});return $(o,e.body)},AD=async(e,t)=>{let r=O({}),n=e.body,o=new Ac({$metadata:zt(e),...r});return $(o,e.body)},RD=async(e,t)=>{let r=O({}),n=e.body,o=new xc({$metadata:zt(e),...r});return $(o,e.body)},TD=async(e,t)=>{let r=O({}),n=e.body,o=new Rc({$metadata:zt(e),...r});return $(o,e.body)},ID=async(e,t)=>{let r=O({}),n=e.body,o=new Tc({$metadata:zt(e),...r});return $(o,e.body)},vD=async(e,t)=>{let r=O({}),n=e.body,o=new Sc({$metadata:zt(e),...r});return $(o,e.body)};var kD=(e,t)=>{let r={};return e[um]!=null&&(r[um]=C(e[um])),e[gm]!=null&&(r[gm]=C(e[gm])),e[ym]!=null&&(r[ym]=C(e[ym])),e[Ic]!=null&&(r[Ic]=ye(As(e[Ic]))),r};var zt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var um="AccessKeyId";var PD="AcceptRanges";var pm="AccessTier";var kc="BucketKeyEnabled";var hm="Credentials";var OD="CacheControl",ND="ChecksumCRC32",DD="ChecksumCRC32C",BD="ContentDisposition";var FD="ContentEncoding";var MD="ContentLanguage",LD="ContentLength",UD="ChecksumMode";var $D="ContentRange";var HD="ChecksumSHA1",qD="ChecksumSHA256";var GD="ContentType";var zD="DeleteMarker";var KD="Expires";var jD="ExpectedBucketOwner";var VD="ExpiresString";var WD="ETag";var Ic="Expiration";var XD="IfMatch",nA="IfModifiedSince",YD="IfNoneMatch";var oA="IfUnmodifiedSince";var QD="LastModified";var JD="MissingMeta";var ZD="ObjectLockLegalHoldStatus",eB="ObjectLockMode";var tB="ObjectLockRetainUntilDate";var rB="PartsCount";var nB="PartNumber";var oB="Range";var sB="RequestCharged",iB="ResponseCacheControl",aB="ResponseContentDisposition",cB="ResponseContentEncoding",lB="ResponseContentLanguage",dB="ResponseContentType";var fB="ResponseExpires";var mB="RequestPayer";var uB="ReplicationStatus";var pB="Restore";var gm="SecretAccessKey";var vc="StorageClass";var hB="SessionMode";var Em="ServerSideEncryption";var EA="SSECustomerAlgorithm",gB="SSECustomerKey",xA="SSECustomerKeyMD5";var SA="SSEKMSEncryptionContext",xm="SSEKMSKeyId";var ym="SessionToken";var yB="TagCount";var _A="VersionId";var EB="WebsiteRedirectLocation";var xB="accept-ranges";var SB="cache-control",_B="content-disposition",CB="content-encoding",bB="content-language",sA="content-length";var wB="content-range",AB="content-type";var iA="expires";var RB="etag",TB="expiresstring";var IB="if-match",vB="if-modified-since";var kB="if-none-match";var PB="if-unmodified-since";var aA="last-modified";var OB="partNumber";var NB="range",DB="response-cache-control",BB="response-content-disposition",FB="response-content-encoding",MB="response-content-language",LB="response-content-type",UB="response-expires";var $B="session";var HB="versionId";var qB="x-amz-checksum-crc32",GB="x-amz-checksum-crc32c",zB="x-amz-checksum-mode";var KB="x-amz-checksum-sha1",jB="x-amz-checksum-sha256";var VB="x-amz-create-session-mode";var cA="x-amz-delete-marker",WB="x-amz-expiration",XB="x-amz-expected-bucket-owner";var lA="x-amz-missing-meta";var dA="x-amz-mp-parts-count";var YB="x-amz-object-lock-legal-hold",QB="x-amz-object-lock-mode",fA="x-amz-object-lock-retain-until-date";var JB="x-amz-restore",ZB="x-amz-request-charged";var e3="x-amz-request-payer";var t3="x-amz-replication-status";var r3="x-amz-storage-class";var Sm="x-amz-server-side-encryption",_m="x-amz-server-side-encryption-aws-kms-key-id",Qs="x-amz-server-side-encryption-bucket-key-enabled",CA="x-amz-server-side-encryption-context",bA="x-amz-server-side-encryption-customer-algorithm",n3="x-amz-server-side-encryption-customer-key",wA="x-amz-server-side-encryption-customer-key-md5";var mA="x-amz-tagging-count";var o3="x-amz-version-id",s3="x-amz-website-redirect-location",i3="x-id";var Pc=class extends U.classBuilder().ep({...Ec,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions()),CS(n)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(Zw,Jw).ser(uA).de(hA).build(){};var AA={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.686.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-s3","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"vitest run","test:browser":"node ./test/browser-build/esbuild && vitest run -c vitest.config.browser.ts --mode development","test:browser:watch":"node ./test/browser-build/esbuild && vitest watch -c vitest.config.browser.ts","test:e2e":"vitest run -c vitest.config.e2e.ts --mode development && yarn test:browser","test:e2e:watch":"vitest watch -c vitest.config.e2e.ts","test:watch":"vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"5.2.0","@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.686.0","@aws-sdk/client-sts":"3.686.0","@aws-sdk/core":"3.686.0","@aws-sdk/credential-provider-node":"3.686.0","@aws-sdk/middleware-bucket-endpoint":"3.686.0","@aws-sdk/middleware-expect-continue":"3.686.0","@aws-sdk/middleware-flexible-checksums":"3.686.0","@aws-sdk/middleware-host-header":"3.686.0","@aws-sdk/middleware-location-constraint":"3.686.0","@aws-sdk/middleware-logger":"3.686.0","@aws-sdk/middleware-recursion-detection":"3.686.0","@aws-sdk/middleware-sdk-s3":"3.686.0","@aws-sdk/middleware-ssec":"3.686.0","@aws-sdk/middleware-user-agent":"3.686.0","@aws-sdk/region-config-resolver":"3.686.0","@aws-sdk/signature-v4-multi-region":"3.686.0","@aws-sdk/types":"3.686.0","@aws-sdk/util-endpoints":"3.686.0","@aws-sdk/util-user-agent-browser":"3.686.0","@aws-sdk/util-user-agent-node":"3.686.0","@aws-sdk/xml-builder":"3.686.0","@smithy/config-resolver":"^3.0.10","@smithy/core":"^2.5.1","@smithy/eventstream-serde-browser":"^3.0.11","@smithy/eventstream-serde-config-resolver":"^3.0.8","@smithy/eventstream-serde-node":"^3.0.10","@smithy/fetch-http-handler":"^4.0.0","@smithy/hash-blob-browser":"^3.1.7","@smithy/hash-node":"^3.0.8","@smithy/hash-stream-node":"^3.1.7","@smithy/invalid-dependency":"^3.0.8","@smithy/md5-js":"^3.0.8","@smithy/middleware-content-length":"^3.0.10","@smithy/middleware-endpoint":"^3.2.1","@smithy/middleware-retry":"^3.0.25","@smithy/middleware-serde":"^3.0.8","@smithy/middleware-stack":"^3.0.8","@smithy/node-config-provider":"^3.1.9","@smithy/node-http-handler":"^3.2.5","@smithy/protocol-http":"^4.1.5","@smithy/smithy-client":"^3.4.2","@smithy/types":"^3.6.0","@smithy/url-parser":"^3.0.8","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.25","@smithy/util-defaults-mode-node":"^3.0.25","@smithy/util-endpoints":"^2.1.4","@smithy/util-middleware":"^3.0.8","@smithy/util-retry":"^3.0.8","@smithy/util-stream":"^3.2.1","@smithy/util-utf8":"^3.0.0","@smithy/util-waiter":"^3.1.7",tslib:"^2.6.2"},devDependencies:{"@aws-sdk/signature-v4-crt":"3.686.0","@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};Ee();Gc();Oo();Oo();var JM="AWS_S3_USE_ARN_REGION",ZM="s3_use_arn_region",Tv={environmentVariableSelector:e=>lt(e,JM,Ve.ENV),configFileSelector:e=>lt(e,ZM,Ve.CONFIG),default:!1};K();ri();tr();Ur();Ur();var ms=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&Iv(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&Iv(t),parseInt(ue(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Iv(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var ul=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let c=this.fromUtf8(t.value),l=new DataView(new ArrayBuffer(3+c.byteLength));l.setUint8(0,7),l.setUint16(1,c.byteLength,!1);let d=new Uint8Array(l.buffer);return d.set(c,3),d;case"timestamp":let m=new Uint8Array(9);return m[0]=8,m.set(ms.fromNumber(t.value.valueOf()).bytes,1),m;case"uuid":if(!yL.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let u=new Uint8Array(17);return u[0]=9,u.set(aa(t.value.replace(/\-/g,"")),1),u}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:kv,value:!0};break;case 1:r[s]={type:kv,value:!1};break;case 2:r[s]={type:lL,value:t.getInt8(n++)};break;case 3:r[s]={type:dL,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:fL,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:mL,value:new ms(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:uL,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let c=t.getUint16(n,!1);n+=2,r[s]={type:pL,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,c))},n+=c;break;case 8:r[s]={type:hL,value:new Date(new ms(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let l=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:gL,value:`${ue(l.subarray(0,4))}-${ue(l.subarray(4,6))}-${ue(l.subarray(6,8))}-${ue(l.subarray(8,10))}-${ue(l.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},vv;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(vv||(vv={}));var kv="boolean",lL="byte",dL="short",fL="integer",mL="long",uL="binary",pL="string",hL="timestamp",gL="uuid",yL=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var Pv=4,Ln=Pv*2,fo=4,EL=Ln+fo*2;function Ov({byteLength:e,byteOffset:t,buffer:r}){if(e<EL)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let s=n.getUint32(Pv,!1),i=n.getUint32(Ln,!1),c=n.getUint32(e-fo,!1),l=new Qn().update(new Uint8Array(r,t,Ln));if(i!==l.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${l.digest()})`);if(l.update(new Uint8Array(r,t+Ln,e-(Ln+fo))),c!==l.digest())throw new Error(`The message checksum (${l.digest()}) did not match the expected value of ${c}`);return{headers:new DataView(r,t+Ln+fo,s),body:new Uint8Array(r,t+Ln+fo+s,o-s-(Ln+fo+fo))}}var pl=class{constructor(t,r){this.headerMarshaller=new ul(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,s=new Uint8Array(o),i=new DataView(s.buffer,s.byteOffset,s.byteLength),c=new Qn;return i.setUint32(0,o,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,c.update(s.subarray(0,8)).digest(),!1),s.set(n,12),s.set(r,n.byteLength+12),i.setUint32(o-4,c.update(s.subarray(8,o-4)).digest(),!1),s}decode(t){let{headers:r,body:n}=Ov(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}};var hl=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}};var gl=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}};var yl=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}};var El=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};function Nv(e){let t=0,r=0,n=null,o=null,s=c=>{if(typeof c!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+c);t=c,r=4,n=new Uint8Array(c),new DataView(n.buffer).setUint32(0,c,!1)},i=async function*(){let c=e[Symbol.asyncIterator]();for(;;){let{value:l,done:d}=await c.next();if(d){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let m=l.length,u=0;for(;u<m;){if(!n){let g=m-u;o||(o=new Uint8Array(4));let x=Math.min(4-r,g);if(o.set(l.slice(u,u+x),r),r+=x,u+=x,r<4)break;s(new DataView(o.buffer).getUint32(0,!1)),o=null}let h=Math.min(t-r,m-u);n.set(l.slice(u,u+h),r),r+=h,u+=h,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function Dv(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,s={[o]:r},i=await e(s);if(i.$unknown){let c=new Error(t(r.body));throw c.name=o,c}throw i[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},s=await e(o);return s.$unknown?void 0:s}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var Wi=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new pl(t,r),this.utfEncoder=t}deserialize(t,r){let n=Nv(t);return new yl({messageStream:new hl({inputStream:n,decoder:this.eventStreamCodec}),deserializer:Dv(r,this.utfEncoder)})}serialize(t,r){return new gl({messageStream:new El({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};import{Readable as xL}from"stream";async function*Bv(e){let t=!1,r=!1,n=new Array;for(e.on("error",o=>{if(t||(t=!0),o)throw o}),e.on("data",o=>{n.push(o)}),e.on("end",()=>{t=!0});!r;){let o=await new Promise(s=>setTimeout(()=>s(n.shift()),0));o&&(yield o),r=t&&n.length===0}}var xl=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new Wi({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=typeof t[Symbol.asyncIterator]=="function"?t:Bv(t);return this.universalMarshaller.deserialize(n,r)}serialize(t,r){return xL.from(this.universalMarshaller.serialize(t,r))}};var Fv=e=>new xl(e);ni();ze();import{Writable as SL}from"stream";var Xi=class extends SL{constructor(t,r){super(r),this.hash=t}_write(t,r,n){try{this.hash.update(tt(t))}catch(o){return n(o)}n()}};var Mv=(e,t)=>{if(t.readableFlowing!==null)throw new Error("Unable to calculate hash for flowing readable stream");let r=new e,n=new Xi(r);return t.pipe(n),new Promise((o,s)=>{t.on("error",i=>{n.end(),s(i)}),n.on("error",s),n.on("finish",()=>{r.digest().then(o).catch(s)})})};br();Cr();qn();oi();wt();Ee();v();Zn();ur();xs();ze();var Lv=e=>({apiVersion:"2006-03-01",base64Decoder:e?.base64Decoder??Kt,base64Encoder:e?.base64Encoder??rt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??yc,extensions:e?.extensions??[],getAwsChunkedEncodingStream:e?.getAwsChunkedEncodingStream??Rg,httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Xw,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new qe},{schemeId:"aws.auth#sigv4a",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4a"),signer:new gs}],logger:e?.logger??new at,sdkStreamMixin:e?.sdkStreamMixin??ca,serviceId:e?.serviceId??"S3",signerConstructor:e?.signerConstructor??ic,signingEscapePath:e?.signingEscapePath??!1,urlParser:e?.urlParser??st,useArnRegion:e?.useArnRegion??!1,utf8Decoder:e?.utf8Decoder??Pe,utf8Encoder:e?.utf8Encoder??gt});v();ii();v();var Uv=e=>{Kr(process.version);let t=Cn(e),r=()=>t().then(zr),n=Lv(e);return Fr(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??_n,credentialDefaultProvider:e?.credentialDefaultProvider??so,defaultUserAgentProvider:e?.defaultUserAgentProvider??xn({serviceId:n.serviceId,clientVersion:AA.version}),disableS3ExpressSessionAuth:e?.disableS3ExpressSessionAuth??M(qd),eventStreamSerdeProvider:e?.eventStreamSerdeProvider??Fv,maxAttempts:e?.maxAttempts??M(dn),md5:e?.md5??Rt.bind(null,"md5"),region:e?.region??M(er,nn),requestChecksumCalculation:e?.requestChecksumCalculation??M(Wh),requestHandler:yt.create(e?.requestHandler??r),responseChecksumValidation:e?.responseChecksumValidation??M(Xh),retryMode:e?.retryMode??M({...mn,default:async()=>(await r()).retryMode||rr}),sha1:e?.sha1??Rt.bind(null,"sha1"),sha256:e?.sha256??Rt.bind(null,"sha256"),sigv4aSigningRegionSet:e?.sigv4aSigningRegionSet??M(Ly),streamCollector:e?.streamCollector??jt,streamHasher:e?.streamHasher??Mv,useArnRegion:e?.useArnRegion??M(Tv),useDualstackEndpoint:e?.useDualstackEndpoint??M(tn),useFipsEndpoint:e?.useFipsEndpoint??M(rn),userAgentAppId:e?.userAgentAppId??M(Sn)}};ai();K();v();var $v=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},Hv=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()});var Sl=e=>e,qv=(e,t)=>{let r={...Sl(bn(e)),...Sl(jr(e)),...Sl(Nr(e)),...Sl($v(e))};return t.forEach(n=>n.configure(r)),{...e,...wn(r),...Vr(r),...Dr(r),...Hv(r)}};var _l=class extends Et{constructor(...[t]){let r=Uv(t||{}),n=Qw(r),o=Jr(n),s=rS(o),i=fn(s),c=on(i),l=c,d=ln(l),m=cC(d),u=Yw(m),h=_S(u,{session:[()=>this,Pc]}),g=qv(h,t?.extensions||[]);super(g),this.config=g,this.middlewareStack.use(en(this.config)),this.middlewareStack.use(un(this.config)),this.middlewareStack.use(sn(this.config)),this.middlewareStack.use(Xr(this.config)),this.middlewareStack.use(Yr(this.config)),this.middlewareStack.use(Qr(this.config)),this.middlewareStack.use(Mr(this.config,{httpAuthSchemeParametersProvider:jw,identityProviderConfigProvider:async x=>new Vt({"aws.auth#sigv4":x.credentials,"aws.auth#sigv4a":x.credentials})})),this.middlewareStack.use(Lr(this.config)),this.middlewareStack.use(AS(this.config)),this.middlewareStack.use(zh(this.config)),this.middlewareStack.use(aS(this.config)),this.middlewareStack.use(Gd(this.config)),this.middlewareStack.use(zd(this.config))}destroy(){super.destroy()}};function _L(e){return t=>async r=>{let n={...r.input},o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let s of o){let i=n[s.target];if(i){let c;typeof i=="string"?bL(i,e)?c=e.base64Decoder(i):(c=e.utf8Decoder(i),n[s.target]=e.base64Encoder(c)):(c=ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i),n[s.target]=e.base64Encoder(c));let l=new e.md5;l.update(c),n[s.hash]=e.base64Encoder(await l.digest())}}return t({...r,input:n})}}var CL={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Gv=e=>({applyToStack:t=>{t.add(_L(e),CL)}});function bL(e,t){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e))return!1;try{return t.base64Decoder(e).length===32}catch{return!1}}ae();me();v();var Cl=class extends U.classBuilder().ep({...Ec,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,o){return[j(n,this.serialize,this.deserialize),V(n,t.getEndpointParameterInstructions()),tS(n,{input:this.input,requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC32","CRC32C","SHA256","SHA1"]}),Gv(n),cS(n)]}).s("AmazonS3","GetObject",{}).n("S3Client","GetObjectCommand").f(tA,eA).ser(pA).de(gA).build(){};wp();Rp();import{defaultConfig as mk}from"next/dist/server/config-shared";import{ImageOptimizerCache as KL}from"next/dist/server/image-optimizer";po();async function ik(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(nk(),rk))).default}async function ak(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(sk(),ok))).default}async function ck(e){let t=await import("./open-next.config.mjs").then(s=>s.default);globalThis.openNextConfig=t;let r=t[e.type]?.override,n=await ik(r?.converter),o=await ak(r?.wrapper);return Be("Using wrapper",o.name),o.wrapper(e.handler,n)}po();po();import{fetchExternalImage as UL,fetchInternalImage as $L,imageOptimizer as HL}from"next/dist/server/image-optimizer";async function lk(e,t,r,n){let{isAbsolute:o,href:s}=t,i=o?await UL(s):await $L(s,{headers:e},{},n),c=await HL(i,t,r,!1);return Be("optimized result",c),c}fk();var{BUCKET_NAME:Tp,BUCKET_KEY_PREFIX:jL}=process.env;dk();var Ip=zL.join(__dirname,".next"),VL=Cp(Ip),WL=bp(Ip),vp={...mk,images:{...mk.images,...VL.images}};Be("Init config",{nextDir:Ip,BUCKET_NAME:Tp,nextConfig:vp});var npe=await ck({handler:XL,type:"imageOptimization"});async function XL(e,t){Be("handler event",e);let{headers:r,query:n}=e;try{let o=QL(r,n===null?void 0:n),s;if(process.env.OPENNEXT_STATIC_ETAG&&(s=JL(o)),s&&r["if-none-match"]===s)return{statusCode:304,headers:{},body:"",isBase64Encoded:!1,type:"core"};let i=await lk(r,o,vp,n1);return ZL(i,t,s)}catch(o){return e1(o,t)}}function YL(){if(!Tp)throw new Error("Bucket name must be defined!")}function QL(e,t){let r=KL.validateParams({headers:e},t,vp,!1);if(Be("image params",r),"errorMessage"in r)throw new Error(r.errorMessage);return r}function JL(e){return qL("sha1").update(JSON.stringify({href:e.href,width:e.width,quality:e.quality,buildId:WL})).digest("base64")}function ZL(e,t,r){let n={Vary:"Accept","Content-Type":e.contentType,"Cache-Control":`public,max-age=${e.maxAge},immutable`};if(Be("result",e),r&&(n.ETag=r),t){let o=new us(()=>{},async()=>{},t);o.writeHead(200,n),o.end(e.buffer)}return{type:"core",statusCode:200,body:e.buffer.toString("base64"),isBase64Encoded:!0,headers:n}}function e1(e,t){if(Be(e),t){let r=new us(()=>{},async()=>{},t);r.writeHead(500,{Vary:"Accept","Cache-Control":"public,max-age=60,immutable","Content-Type":"application/json"}),r.end(e?.message||e?.toString()||e)}return{type:"core",isBase64Encoded:!1,statusCode:500,headers:{Vary:"Accept","Cache-Control":"public,max-age=60,immutable","Content-Type":"application/json"},body:e?.message||e?.toString()||e}}var t1=()=>{let e=globalThis.openNextConfig.imageOptimization;if(typeof e?.loader=="function")return e.loader();{let t=new _l({logger:Vv});return Promise.resolve({name:"s3",load:async r=>{YL();let n=jL?.replace(/^\/|\/$/g,""),o=await t.send(new Cl({Bucket:Tp,Key:n?n+"/"+r.replace(/^\//,""):r.replace(/^\//,"")}));return{body:o.Body,contentType:o.ContentType,cacheControl:o.CacheControl}}})}},r1=await t1();async function n1(e,t,r){Be("downloadHandler url",r);let n=(o,s)=>{o.pipe(s).once("close",()=>{s.statusCode=200,s.end()}).once("error",i=>{Qi("Failed to get image",i),s.statusCode=400,s.end()})};try{if(r.href.toLowerCase().match(/^https?:\/\//))n(GL.get(r),t);else{let o=await r1.load(r.href);if(!o.body)throw new Error("Empty response body from the S3 request.");n(o.body,t),o.contentType&&t.setHeader("Content-Type",o.contentType),o.cacheControl&&t.setHeader("Cache-Control",o.cacheControl)}}catch(o){throw Qi("Failed to download image",o),o}}export{XL as defaultHandler,npe as handler};
